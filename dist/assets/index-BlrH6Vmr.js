var ac=Object.defineProperty;var As=r=>{throw TypeError(r)};var sc=(r,e,t)=>e in r?ac(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Je=(r,e,t)=>sc(r,typeof e!="symbol"?e+"":e,t),Ka=(r,e,t)=>e.has(r)||As("Cannot "+t);var p=(r,e,t)=>(Ka(r,e,"read from private field"),t?t.call(r):e.get(r)),Y=(r,e,t)=>e.has(r)?As("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),U=(r,e,t,n)=>(Ka(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),He=(r,e,t)=>(Ka(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const mo=!1;var ps=Array.isArray,oc=Array.prototype.indexOf,ms=Array.from,lc=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,_o=Object.getOwnPropertyDescriptors,cc=Object.prototype,uc=Array.prototype,_s=Object.getPrototypeOf,Ns=Object.isExtensible;function Xn(r){return typeof r=="function"}function dc(r){return r()}function es(r){for(var e=0;e<r.length;e++)r[e]()}function go(){var r,e,t=new Promise((n,i)=>{r=n,e=i});return{promise:t,resolve:r,reject:e}}function fc(r,e){if(Array.isArray(r))return r;if(!(Symbol.iterator in r))return Array.from(r);const t=[];for(const n of r)if(t.push(n),t.length===e)break;return t}const gt=2,va=4,ha=8,Er=16,Ir=32,vn=64,pa=128,ut=1024,kt=2048,fr=4096,Ot=8192,Sr=16384,gs=32768,cn=65536,Ts=1<<17,yo=1<<18,$n=1<<19,wo=1<<20,zt=256,Yi=512,Xi=32768,ts=1<<21,ys=1<<22,Br=1<<23,ur=Symbol("$state"),bo=Symbol("legacy props"),vc=Symbol(""),wn=new class extends Error{constructor(){super(...arguments);Je(this,"name","StaleReactionError");Je(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function So(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function hc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function pc(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function mc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _c(r){throw new Error("https://svelte.dev/e/effect_orphan")}function gc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yc(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function wc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Sc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Cc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ma=1,_a=2,Co=4,Dc=8,xc=16,Ec=1,Ic=2,Do=4,kc=8,Pc=16,Mc=1,Lc=2,lt=Symbol(),Ac="http://www.w3.org/1999/xhtml",Nc="@attach";function Tc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Rc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Oc=!1;function xo(r){return r===this.v}function Fc(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function Eo(r){return!Fc(r,this.v)}let Gn=!1,Vc=!1;function Bc(){Gn=!0}let We=null;function Tn(r){We=r}function yt(r,e=!1,t){We={p:We,i:!1,c:null,e:null,s:r,x:null,l:Gn&&!e?{s:null,u:null,$:[]}:null}}function wt(r){var e=We,t=e.e;if(t!==null){e.e=null;for(var n of t)zo(n)}return r!==void 0&&(e.x=r),e.i=!0,We=e.p,r??{}}function Ci(){return!Gn||We!==null&&We.l===null}let Wr=[];function Io(){var r=Wr;Wr=[],es(r)}function Dr(r){if(Wr.length===0&&!ai){var e=Wr;queueMicrotask(()=>{e===Wr&&Io()})}Wr.push(r)}function jc(){for(;Wr.length>0;)Io()}function ko(r){var e=De;if(e===null)return ke.f|=Br,r;if(e.f&gs)Rn(r,e);else{if(!(e.f&pa))throw r;e.b.error(r)}}function Rn(r,e){for(;e!==null;){if(e.f&pa)try{e.b.error(r);return}catch(t){r=t}e=e.parent}throw r}const Ai=new Set;let Re=null,ii=null,ct=null,lr=[],ga=null,rs=!1,ai=!1;var Cn,Dn,Yr,Xr,ui,xn,En,_t,ns,qr,Po,Mo;const sa=class sa{constructor(){Y(this,_t);Je(this,"committed",!1);Je(this,"current",new Map);Je(this,"previous",new Map);Y(this,Cn,new Set);Y(this,Dn,new Set);Y(this,Yr,0);Y(this,Xr,0);Y(this,ui,null);Y(this,xn,[]);Y(this,En,[]);Je(this,"skipped_effects",new Set);Je(this,"is_fork",!1)}process(e){var n;lr=[],ii=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of e)He(this,_t,ns).call(this,i,t);this.is_fork||He(this,_t,Po).call(this),p(this,Xr)>0||this.is_fork?(He(this,_t,qr).call(this,t.effects),He(this,_t,qr).call(this,t.render_effects),He(this,_t,qr).call(this,t.block_effects)):(ii=this,Re=null,Rs(t.render_effects),Rs(t.effects),ii=null,(n=p(this,ui))==null||n.resolve()),ct=null}capture(e,t){this.previous.has(e)||this.previous.set(e,t),e.f&Br||(this.current.set(e,e.v),ct==null||ct.set(e,e.v))}activate(){Re=this,this.apply()}deactivate(){Re=null,ct=null}flush(){if(this.activate(),lr.length>0){if(Lo(),Re!==null&&Re!==this)return}else p(this,Yr)===0&&this.process([]);this.deactivate()}discard(){for(const e of p(this,Dn))e(this);p(this,Dn).clear()}increment(e){U(this,Yr,p(this,Yr)+1),e&&U(this,Xr,p(this,Xr)+1)}decrement(e){U(this,Yr,p(this,Yr)-1),e&&U(this,Xr,p(this,Xr)-1),this.revive()}revive(){for(const e of p(this,xn))dt(e,kt),un(e);for(const e of p(this,En))dt(e,fr),un(e);U(this,xn,[]),U(this,En,[]),this.flush()}oncommit(e){p(this,Cn).add(e)}ondiscard(e){p(this,Dn).add(e)}settled(){return(p(this,ui)??U(this,ui,go())).promise}static ensure(){if(Re===null){const e=Re=new sa;Ai.add(Re),ai||sa.enqueue(()=>{Re===e&&e.flush()})}return Re}static enqueue(e){Dr(e)}apply(){}};Cn=new WeakMap,Dn=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,ui=new WeakMap,xn=new WeakMap,En=new WeakMap,_t=new WeakSet,ns=function(e,t){var f;e.f^=ut;for(var n=e.first;n!==null;){var i=n.f,a=(i&(Ir|vn))!==0,o=a&&(i&ut)!==0,c=o||(i&Ot)!==0||this.skipped_effects.has(n);if(n.f&pa&&((f=n.b)!=null&&f.is_pending())&&(t={parent:t,effect:n,effects:[],render_effects:[],block_effects:[]}),!c&&n.fn!==null){a?n.f^=ut:i&va?t.effects.push(n):Un(n)&&(n.f&Er&&t.block_effects.push(n),Fn(n));var l=n.first;if(l!==null){n=l;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)u===t.effect&&(He(this,_t,qr).call(this,t.effects),He(this,_t,qr).call(this,t.render_effects),He(this,_t,qr).call(this,t.block_effects),t=t.parent),n=u.next,u=u.parent}},qr=function(e){for(const t of e)(t.f&kt?p(this,xn):p(this,En)).push(t),dt(t,ut)},Po=function(){if(p(this,Xr)===0){for(const e of p(this,Cn))e();p(this,Cn).clear()}p(this,Yr)===0&&He(this,_t,Mo).call(this)},Mo=function(){var i;if(Ai.size>1){this.previous.clear();var e=ct,t=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of Ai){if(a===this){t=!1;continue}const o=[];for(const[l,u]of this.current){if(a.current.has(l))if(t&&u!==a.current.get(l))a.current.set(l,u);else continue;o.push(l)}if(o.length===0)continue;const c=[...a.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){const l=new Set,u=new Map;for(const f of o)Ao(f,c,l,u);if(lr.length>0){Re=a,a.apply();for(const f of lr)He(i=a,_t,ns).call(i,f,n);lr=[],a.deactivate()}}}Re=null,ct=e}this.committed=!0,Ai.delete(this)};let wr=sa;function $c(r){var e=ai;ai=!0;try{for(var t;;){if(jc(),lr.length===0&&(Re==null||Re.flush(),lr.length===0))return ga=null,t;Lo()}}finally{ai=e}}function Lo(){var r=Sn;rs=!0;try{var e=0;for(Bs(!0);lr.length>0;){var t=wr.ensure();if(e++>1e3){var n,i;Gc()}t.process(lr),jr.clear()}}finally{rs=!1,Bs(r),ga=null}}function Gc(){try{gc()}catch(r){Rn(r,ga)}}let Jt=null;function Rs(r){var e=r.length;if(e!==0){for(var t=0;t<e;){var n=r[t++];if(!(n.f&(Sr|Ot))&&Un(n)&&(Jt=new Set,Fn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Xo(n):n.fn=null),(Jt==null?void 0:Jt.size)>0)){jr.clear();for(const i of Jt){if(i.f&(Sr|Ot))continue;const a=[i];let o=i.parent;for(;o!==null;)Jt.has(o)&&(Jt.delete(o),a.push(o)),o=o.parent;for(let c=a.length-1;c>=0;c--){const l=a[c];l.f&(Sr|Ot)||Fn(l)}}Jt.clear()}}Jt=null}}function Ao(r,e,t,n){if(!t.has(r)&&(t.add(r),r.reactions!==null))for(const i of r.reactions){const a=i.f;a&gt?Ao(i,e,t,n):a&(ys|Er)&&!(a&kt)&&No(i,e,n)&&(dt(i,kt),un(i))}}function No(r,e,t){const n=t.get(r);if(n!==void 0)return n;if(r.deps!==null)for(const i of r.deps){if(e.includes(i))return!0;if(i.f&gt&&No(i,e,t))return t.set(i,!0),!0}return t.set(r,!1),!1}function un(r){for(var e=ga=r;e.parent!==null;){e=e.parent;var t=e.f;if(rs&&e===De&&t&Er&&!(t&yo))return;if(t&(vn|Ir)){if(!(t&ut))return;e.f^=ut}}lr.push(e)}function Kc(r){let e=0,t=$r(0),n;return()=>{nu()&&(s(t),hn(()=>(e===0&&(n=hr(()=>r(()=>si(t)))),e+=1,()=>{Dr(()=>{e-=1,e===0&&(n==null||n(),n=void 0,si(t))})})))}}var Uc=cn|$n|pa;function Hc(r,e,t){new zc(r,e,t)}var Kt,Ut,hs,nr,Jr,ir,Ht,xt,ar,_r,Ar,Zr,Nr,Qr,Tr,oa,st,qc,Wc,is,zi,qi,as;class zc{constructor(e,t,n){Y(this,st);Je(this,"parent");Y(this,Kt,!1);Y(this,Ut);Y(this,hs,null);Y(this,nr);Y(this,Jr);Y(this,ir);Y(this,Ht,null);Y(this,xt,null);Y(this,ar,null);Y(this,_r,null);Y(this,Ar,null);Y(this,Zr,0);Y(this,Nr,0);Y(this,Qr,!1);Y(this,Tr,null);Y(this,oa,Kc(()=>(U(this,Tr,$r(p(this,Zr))),()=>{U(this,Tr,null)})));U(this,Ut,e),U(this,nr,t),U(this,Jr,n),this.parent=De.b,U(this,Kt,!!p(this,nr).pending),U(this,ir,Kn(()=>{De.b=this;{var i=He(this,st,is).call(this);try{U(this,Ht,Nt(()=>n(i)))}catch(a){this.error(a)}p(this,Nr)>0?He(this,st,qi).call(this):U(this,Kt,!1)}return()=>{var a;(a=p(this,Ar))==null||a.remove()}},Uc))}is_pending(){return p(this,Kt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!p(this,nr).pending}update_pending_count(e){He(this,st,as).call(this,e),U(this,Zr,p(this,Zr)+e),p(this,Tr)&&On(p(this,Tr),p(this,Zr))}get_effect_pending(){return p(this,oa).call(this),s(p(this,Tr))}error(e){var t=p(this,nr).onerror;let n=p(this,nr).failed;if(p(this,Qr)||!t&&!n)throw e;p(this,Ht)&&(at(p(this,Ht)),U(this,Ht,null)),p(this,xt)&&(at(p(this,xt)),U(this,xt,null)),p(this,ar)&&(at(p(this,ar)),U(this,ar,null));var i=!1,a=!1;const o=()=>{if(i){Rc();return}i=!0,a&&Cc(),wr.ensure(),U(this,Zr,0),p(this,ar)!==null&&bn(p(this,ar),()=>{U(this,ar,null)}),U(this,Kt,this.has_pending_snippet()),U(this,Ht,He(this,st,zi).call(this,()=>(U(this,Qr,!1),Nt(()=>p(this,Jr).call(this,p(this,Ut)))))),p(this,Nr)>0?He(this,st,qi).call(this):U(this,Kt,!1)};var c=ke;try{Et(null),a=!0,t==null||t(e,o),a=!1}catch(l){Rn(l,p(this,ir)&&p(this,ir).parent)}finally{Et(c)}n&&Dr(()=>{U(this,ar,He(this,st,zi).call(this,()=>{wr.ensure(),U(this,Qr,!0);try{return Nt(()=>{n(p(this,Ut),()=>e,()=>o)})}catch(l){return Rn(l,p(this,ir).parent),null}finally{U(this,Qr,!1)}}))})}}Kt=new WeakMap,Ut=new WeakMap,hs=new WeakMap,nr=new WeakMap,Jr=new WeakMap,ir=new WeakMap,Ht=new WeakMap,xt=new WeakMap,ar=new WeakMap,_r=new WeakMap,Ar=new WeakMap,Zr=new WeakMap,Nr=new WeakMap,Qr=new WeakMap,Tr=new WeakMap,oa=new WeakMap,st=new WeakSet,qc=function(){try{U(this,Ht,Nt(()=>p(this,Jr).call(this,p(this,Ut))))}catch(e){this.error(e)}U(this,Kt,!1)},Wc=function(){const e=p(this,nr).pending;e&&(U(this,xt,Nt(()=>e(p(this,Ut)))),wr.enqueue(()=>{var t=He(this,st,is).call(this);U(this,Ht,He(this,st,zi).call(this,()=>(wr.ensure(),Nt(()=>p(this,Jr).call(this,t))))),p(this,Nr)>0?He(this,st,qi).call(this):(bn(p(this,xt),()=>{U(this,xt,null)}),U(this,Kt,!1))}))},is=function(){var e=p(this,Ut);return p(this,Kt)&&(U(this,Ar,Gr()),p(this,Ut).before(p(this,Ar)),e=p(this,Ar)),e},zi=function(e){var t=De,n=ke,i=We;qt(p(this,ir)),Et(p(this,ir)),Tn(p(this,ir).ctx);try{return e()}catch(a){return ko(a),null}finally{qt(t),Et(n),Tn(i)}},qi=function(){const e=p(this,nr).pending;p(this,Ht)!==null&&(U(this,_r,document.createDocumentFragment()),p(this,_r).append(p(this,Ar)),Qo(p(this,Ht),p(this,_r))),p(this,xt)===null&&U(this,xt,Nt(()=>e(p(this,Ut))))},as=function(e){var t;if(!this.has_pending_snippet()){this.parent&&He(t=this.parent,st,as).call(t,e);return}U(this,Nr,p(this,Nr)+e),p(this,Nr)===0&&(U(this,Kt,!1),p(this,xt)&&bn(p(this,xt),()=>{U(this,xt,null)}),p(this,_r)&&(p(this,Ut).before(p(this,_r)),U(this,_r,null)))};function To(r,e,t,n){const i=Ci()?Di:ws;if(t.length===0&&r.length===0){n(e.map(i));return}var a=Re,o=De,c=Yc();function l(){Promise.all(t.map(u=>Xc(u))).then(u=>{c();try{n([...e.map(i),...u])}catch(f){o.f&Sr||Rn(f,o)}a==null||a.deactivate(),Ji()}).catch(u=>{Rn(u,o)})}r.length>0?Promise.all(r).then(()=>{c();try{return l()}finally{a==null||a.deactivate(),Ji()}}):l()}function Yc(){var r=De,e=ke,t=We,n=Re;return function(a=!0){qt(r),Et(e),Tn(t),a&&(n==null||n.activate())}}function Ji(){qt(null),Et(null),Tn(null)}function Di(r){var e=gt|kt,t=ke!==null&&ke.f&gt?ke:null;return De===null||t!==null&&t.f&zt?e|=zt:De.f|=$n,{ctx:We,deps:null,effects:null,equals:xo,f:e,fn:r,reactions:null,rv:0,v:lt,wv:0,parent:t??De,ac:null}}function Xc(r,e){let t=De;t===null&&hc();var n=t.b,i=void 0,a=$r(lt),o=!ke,c=new Map;return lu(()=>{var _;var l=go();i=l.promise;try{Promise.resolve(r()).then(l.resolve,l.reject).then(()=>{u===Re&&u.committed&&u.deactivate(),Ji()})}catch(m){l.reject(m),Ji()}var u=Re;if(o){var f=!n.is_pending();n.update_pending_count(1),u.increment(f),(_=c.get(u))==null||_.reject(wn),c.delete(u),c.set(u,l)}const d=(m,h=void 0)=>{if(u.activate(),h)h!==wn&&(a.f|=Br,On(a,h));else{a.f&Br&&(a.f^=Br),On(a,m);for(const[y,v]of c){if(c.delete(y),y===u)break;v.reject(wn)}}o&&(n.update_pending_count(-1),u.decrement(f))};l.promise.then(d,m=>d(null,m||"unknown"))}),ba(()=>{for(const l of c.values())l.reject(wn)}),new Promise(l=>{function u(f){function d(){f===i?l(a):u(i)}f.then(d,d)}u(i)})}function ye(r){const e=Di(r);return el(e),e}function ws(r){const e=Di(r);return e.equals=Eo,e}function Ro(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)at(e[t])}}function Jc(r){for(var e=r.parent;e!==null;){if(!(e.f&gt))return e;e=e.parent}return null}function bs(r){var e,t=De;qt(Jc(r));try{r.f&=~Xi,Ro(r),e=il(r)}finally{qt(t)}return e}function Oo(r){var e=bs(r);if(r.equals(e)||(r.v=e,r.wv=rl()),!pn)if(ct!==null)ct.set(r,r.v);else{var t=(Fr||r.f&zt)&&r.deps!==null?fr:ut;dt(r,t)}}let ss=new Set;const jr=new Map;let Fo=!1;function $r(r,e){var t={f:0,v:r,reactions:null,equals:xo,rv:0,wv:0};return t}function z(r,e){const t=$r(r);return el(t),t}function Vo(r,e=!1,t=!0){var i;const n=$r(r);return e||(n.equals=Eo),Gn&&t&&We!==null&&We.l!==null&&((i=We.l).s??(i.s=[])).push(n),n}function C(r,e,t=!1){ke!==null&&(!er||ke.f&Ts)&&Ci()&&ke.f&(gt|Er|ys|Ts)&&!(Ct!=null&&Ct.includes(r))&&Sc();let n=t?Ae(e):e;return On(r,n)}function On(r,e){if(!r.equals(e)){var t=r.v;pn?jr.set(r,e):jr.set(r,t),r.v=e;var n=wr.ensure();n.capture(r,t),r.f&gt&&(r.f&kt&&bs(r),dt(r,r.f&zt?fr:ut)),r.wv=rl(),Bo(r,kt),Ci()&&De!==null&&De.f&ut&&!(De.f&(Ir|vn))&&(Gt===null?uu([r]):Gt.push(r)),!n.is_fork&&ss.size>0&&!Fo&&Zc()}return e}function Zc(){Fo=!1;const r=Array.from(ss);for(const e of r)e.f&ut&&dt(e,fr),Un(e)&&Fn(e);ss.clear()}function Zi(r,e=1){var t=s(r),n=e===1?t++:t--;return C(r,t),n}function si(r){C(r,r.v+1)}function Bo(r,e){var t=r.reactions;if(t!==null)for(var n=Ci(),i=t.length,a=0;a<i;a++){var o=t[a],c=o.f;if(!(!n&&o===De)){var l=(c&kt)===0;l&&dt(o,e),c&gt?c&Xi||(o.f|=Xi,Bo(o,fr)):l&&(c&Er&&Jt!==null&&Jt.add(o),un(o))}}}function Ae(r){if(typeof r!="object"||r===null||ur in r)return r;const e=_s(r);if(e!==cc&&e!==uc)return r;var t=new Map,n=ps(r),i=z(0),a=sn,o=c=>{if(sn===a)return c();var l=ke,u=sn;Et(null),$s(a);var f=c();return Et(l),$s(u),f};return n&&t.set("length",z(r.length)),new Proxy(r,{defineProperty(c,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&wc();var f=t.get(l);return f===void 0?f=o(()=>{var d=z(u.value);return t.set(l,d),d}):C(f,u.value,!0),!0},deleteProperty(c,l){var u=t.get(l);if(u===void 0){if(l in c){const f=o(()=>z(lt));t.set(l,f),si(i)}}else C(u,lt),si(i);return!0},get(c,l,u){var m;if(l===ur)return r;var f=t.get(l),d=l in c;if(f===void 0&&(!d||(m=Vr(c,l))!=null&&m.writable)&&(f=o(()=>{var h=Ae(d?c[l]:lt),y=z(h);return y}),t.set(l,f)),f!==void 0){var _=s(f);return _===lt?void 0:_}return Reflect.get(c,l,u)},getOwnPropertyDescriptor(c,l){var u=Reflect.getOwnPropertyDescriptor(c,l);if(u&&"value"in u){var f=t.get(l);f&&(u.value=s(f))}else if(u===void 0){var d=t.get(l),_=d==null?void 0:d.v;if(d!==void 0&&_!==lt)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(c,l){var _;if(l===ur)return!0;var u=t.get(l),f=u!==void 0&&u.v!==lt||Reflect.has(c,l);if(u!==void 0||De!==null&&(!f||(_=Vr(c,l))!=null&&_.writable)){u===void 0&&(u=o(()=>{var m=f?Ae(c[l]):lt,h=z(m);return h}),t.set(l,u));var d=s(u);if(d===lt)return!1}return f},set(c,l,u,f){var L;var d=t.get(l),_=l in c;if(n&&l==="length")for(var m=u;m<d.v;m+=1){var h=t.get(m+"");h!==void 0?C(h,lt):m in c&&(h=o(()=>z(lt)),t.set(m+"",h))}if(d===void 0)(!_||(L=Vr(c,l))!=null&&L.writable)&&(d=o(()=>z(void 0)),C(d,Ae(u)),t.set(l,d));else{_=d.v!==lt;var y=o(()=>Ae(u));C(d,y)}var v=Reflect.getOwnPropertyDescriptor(c,l);if(v!=null&&v.set&&v.set.call(f,u),!_){if(n&&typeof l=="string"){var D=t.get("length"),M=Number(l);Number.isInteger(M)&&M>=D.v&&C(D,M+1)}si(i)}return!0},ownKeys(c){s(i);var l=Reflect.ownKeys(c).filter(d=>{var _=t.get(d);return _===void 0||_.v!==lt});for(var[u,f]of t)f.v!==lt&&!(u in c)&&l.push(u);return l},setPrototypeOf(){bc()}})}function Os(r){try{if(r!==null&&typeof r=="object"&&ur in r)return r[ur]}catch{}return r}function jo(r,e){return Object.is(Os(r),Os(e))}var Fs,$o,Go,Ko;function Qc(){if(Fs===void 0){Fs=window,$o=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Go=Vr(e,"firstChild").get,Ko=Vr(e,"nextSibling").get,Ns(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ns(t)&&(t.__t=void 0)}}function Gr(r=""){return document.createTextNode(r)}function cr(r){return Go.call(r)}function xi(r){return Ko.call(r)}function g(r,e){return cr(r)}function he(r,e=!1){{var t=cr(r);return t instanceof Comment&&t.data===""?xi(t):t}}function w(r,e=1,t=!1){let n=r;for(;e--;)n=xi(n);return n}function eu(r){r.textContent=""}function Uo(){return!1}function Qi(r,e){if(e){const t=document.body;r.autofocus=!0,Dr(()=>{document.activeElement===t&&r.focus()})}}let Vs=!1;function tu(){Vs||(Vs=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function ya(r){var e=ke,t=De;Et(null),qt(null);try{return r()}finally{Et(e),qt(t)}}function wa(r,e,t,n=t){r.addEventListener(e,()=>ya(t));const i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),tu()}function Ho(r){De===null&&ke===null&&_c(),ke!==null&&ke.f&zt&&De===null&&mc(),pn&&pc()}function ru(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function vr(r,e,t,n=!0){var i=De;i!==null&&i.f&Ot&&(r|=Ot);var a={ctx:We,deps:null,nodes_start:null,nodes_end:null,f:r|kt,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Fn(a),a.f|=gs}catch(l){throw at(a),l}else e!==null&&un(a);if(n){var o=a;if(t&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&!(o.f&$n)&&(o=o.first,r&Er&&r&cn&&o!==null&&(o.f|=cn)),o!==null&&(o.parent=i,i!==null&&ru(o,i),ke!==null&&ke.f&gt&&!(r&vn))){var c=ke;(c.effects??(c.effects=[])).push(o)}}return a}function nu(){return ke!==null&&!er}function ba(r){const e=vr(ha,null,!1);return dt(e,ut),e.teardown=r,e}function xr(r){Ho();var e=De.f,t=!ke&&(e&Ir)!==0&&(e&gs)===0;if(t){var n=We;(n.e??(n.e=[])).push(r)}else return zo(r)}function zo(r){return vr(va|wo,r,!1)}function iu(r){return Ho(),vr(ha|wo,r,!0)}function au(r){wr.ensure();const e=vr(vn|$n,r,!0);return(t={})=>new Promise(n=>{t.outro?bn(e,()=>{at(e),n(void 0)}):(at(e),n(void 0))})}function Ei(r){return vr(va,r,!1)}function su(r,e){var t=We,n={effect:null,ran:!1,deps:r};t.l.$.push(n),n.effect=hn(()=>{r(),!n.ran&&(n.ran=!0,hr(e))})}function ou(){var r=We;hn(()=>{for(var e of r.l.$){e.deps();var t=e.effect;t.f&ut&&dt(t,fr),Un(t)&&Fn(t),e.ran=!1}})}function lu(r){return vr(ys|$n,r,!0)}function hn(r,e=0){return vr(ha|e,r,!0)}function Z(r,e=[],t=[],n=[],i=!1){To(n,e,t,a=>{vr(i?va:ha,()=>r(...a.map(s)),!0)})}function Kn(r,e=0){var t=vr(Er|e,r,!0);return t}function Nt(r,e=!0){return vr(Ir|$n,r,!0,e)}function qo(r){var e=r.teardown;if(e!==null){const t=pn,n=ke;js(!0),Et(null);try{e.call(null)}finally{js(t),Et(n)}}}function Wo(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){const i=t.ac;i!==null&&ya(()=>{i.abort(wn)});var n=t.next;t.f&vn?t.parent=null:at(t,e),t=n}}function cu(r){for(var e=r.first;e!==null;){var t=e.next;e.f&Ir||at(e),e=t}}function at(r,e=!0){var t=!1;(e||r.f&yo)&&r.nodes_start!==null&&r.nodes_end!==null&&(Yo(r.nodes_start,r.nodes_end),t=!0),Wo(r,e&&!t),ea(r,0),dt(r,Sr);var n=r.transitions;if(n!==null)for(const a of n)a.stop();qo(r);var i=r.parent;i!==null&&i.first!==null&&Xo(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function Yo(r,e){for(;r!==null;){var t=r===e?null:xi(r);r.remove(),r=t}}function Xo(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function bn(r,e,t=!0){var n=[];Ss(r,n,!0),Jo(n,()=>{t&&at(r),e&&e()})}function Jo(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function Ss(r,e,t){if(!(r.f&Ot)){if(r.f^=Ot,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var n=r.first;n!==null;){var i=n.next,a=(n.f&cn)!==0||(n.f&Ir)!==0&&(r.f&Er)!==0;Ss(n,e,a?t:!1),n=i}}}function Cs(r){Zo(r,!0)}function Zo(r,e){if(r.f&Ot){r.f^=Ot,r.f&ut||(dt(r,kt),un(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&cn)!==0||(t.f&Ir)!==0;Zo(t,i?e:!1),t=n}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}function Qo(r,e){for(var t=r.nodes_start,n=r.nodes_end;t!==null;){var i=t===n?null:xi(t);e.append(t),t=i}}let Sn=!1;function Bs(r){Sn=r}let pn=!1;function js(r){pn=r}let ke=null,er=!1;function Et(r){ke=r}let De=null;function qt(r){De=r}let Ct=null;function el(r){ke!==null&&(Ct===null?Ct=[r]:Ct.push(r))}let bt=null,Lt=0,Gt=null;function uu(r){Gt=r}let tl=1,li=0,sn=li;function $s(r){sn=r}let Fr=!1;function rl(){return++tl}function Un(r){var d;var e=r.f;if(e&kt)return!0;if(e&fr){var t=r.deps,n=(e&zt)!==0;if(e&gt&&(r.f&=~Xi),t!==null){var i,a,o=(e&Yi)!==0,c=n&&De!==null&&!Fr,l=t.length;if((o||c)&&(De===null||!(De.f&Sr))){var u=r,f=u.parent;for(i=0;i<l;i++)a=t[i],(o||!((d=a==null?void 0:a.reactions)!=null&&d.includes(u)))&&(a.reactions??(a.reactions=[])).push(u);o&&(u.f^=Yi),c&&f!==null&&!(f.f&zt)&&(u.f^=zt)}for(i=0;i<l;i++)if(a=t[i],Un(a)&&Oo(a),a.wv>r.wv)return!0}(!n||De!==null&&!Fr)&&dt(r,ut)}return!1}function nl(r,e,t=!0){var n=r.reactions;if(n!==null&&!(Ct!=null&&Ct.includes(r)))for(var i=0;i<n.length;i++){var a=n[i];a.f&gt?nl(a,e,!1):e===a&&(t?dt(a,kt):a.f&ut&&dt(a,fr),un(a))}}function il(r){var y;var e=bt,t=Lt,n=Gt,i=ke,a=Fr,o=Ct,c=We,l=er,u=sn,f=r.f;bt=null,Lt=0,Gt=null,Fr=(f&zt)!==0&&(er||!Sn||ke===null),ke=f&(Ir|vn)?null:r,Ct=null,Tn(r.ctx),er=!1,sn=++li,r.ac!==null&&(ya(()=>{r.ac.abort(wn)}),r.ac=null);try{r.f|=ts;var d=r.fn,_=d(),m=r.deps;if(bt!==null){var h;if(ea(r,Lt),m!==null&&Lt>0)for(m.length=Lt+bt.length,h=0;h<bt.length;h++)m[Lt+h]=bt[h];else r.deps=m=bt;if(!Fr||f&gt&&r.reactions!==null)for(h=Lt;h<m.length;h++)((y=m[h]).reactions??(y.reactions=[])).push(r)}else m!==null&&Lt<m.length&&(ea(r,Lt),m.length=Lt);if(Ci()&&Gt!==null&&!er&&m!==null&&!(r.f&(gt|fr|kt)))for(h=0;h<Gt.length;h++)nl(Gt[h],r);return i!==null&&i!==r&&(li++,Gt!==null&&(n===null?n=Gt:n.push(...Gt))),r.f&Br&&(r.f^=Br),_}catch(v){return ko(v)}finally{r.f^=ts,bt=e,Lt=t,Gt=n,ke=i,Fr=a,Ct=o,Tn(c),er=l,sn=u}}function du(r,e){let t=e.reactions;if(t!==null){var n=oc.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&e.f&gt&&(bt===null||!bt.includes(e))&&(dt(e,fr),e.f&(zt|Yi)||(e.f^=Yi),Ro(e),ea(e,0))}function ea(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)du(r,t[n])}function Fn(r){var e=r.f;if(!(e&Sr)){dt(r,ut);var t=De,n=Sn;De=r,Sn=!0;try{e&Er?cu(r):Wo(r),qo(r);var i=il(r);r.teardown=typeof i=="function"?i:null,r.wv=tl;var a;mo&&Vc&&r.f&kt&&r.deps}finally{Sn=n,De=t}}}async function fu(){await Promise.resolve(),$c()}function s(r){var e=r.f,t=(e&gt)!==0;if(ke!==null&&!er){var n=De!==null&&(De.f&Sr)!==0;if(!n&&!(Ct!=null&&Ct.includes(r))){var i=ke.deps;if(ke.f&ts)r.rv<li&&(r.rv=li,bt===null&&i!==null&&i[Lt]===r?Lt++:bt===null?bt=[r]:(!Fr||!bt.includes(r))&&bt.push(r));else{(ke.deps??(ke.deps=[])).push(r);var a=r.reactions;a===null?r.reactions=[ke]:a.includes(ke)||a.push(ke)}}}else if(t&&r.deps===null&&r.effects===null){var o=r,c=o.parent;c!==null&&!(c.f&zt)&&(o.f^=zt)}if(pn){if(jr.has(r))return jr.get(r);if(t){o=r;var l=o.v;return(!(o.f&ut)&&o.reactions!==null||al(o))&&(l=bs(o)),jr.set(o,l),l}}else if(t){if(o=r,ct!=null&&ct.has(o))return ct.get(o);Un(o)&&Oo(o)}if(ct!=null&&ct.has(r))return ct.get(r);if(r.f&Br)throw r.v;return r.v}function al(r){if(r.v===lt)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(jr.has(e)||e.f&gt&&al(e))return!0;return!1}function hr(r){var e=er;try{return er=!0,r()}finally{er=e}}const vu=-7169;function dt(r,e){r.f=r.f&vu|e}function sl(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(ur in r)os(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&ur in t&&os(t)}}}function os(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{os(r[n],e)}catch{}const t=_s(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=_o(t);for(let i in n){const a=n[i].get;if(a)try{a.call(r)}catch{}}}}}function hu(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const pu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function mu(r){return pu.includes(r)}const _u={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function gu(r){return r=r.toLowerCase(),_u[r]??r}const yu=["touchstart","touchmove"];function wu(r){return yu.includes(r)}const ol=new Set,ls=new Set;function ll(r,e,t,n={}){function i(a){if(n.capture||ri.call(e,a),!a.cancelBubble)return ya(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Dr(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function on(r,e,t,n,i){var a={capture:n,passive:i},o=ll(r,e,t,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ba(()=>{e.removeEventListener(r,o,a)})}function Pt(r){for(var e=0;e<r.length;e++)ol.add(r[e]);for(var t of ls)t(r)}let Gs=null;function ri(r){var v;var e=this,t=e.ownerDocument,n=r.type,i=((v=r.composedPath)==null?void 0:v.call(r))||[],a=i[0]||r.target;Gs=r;var o=0,c=Gs===r&&r.__root;if(c){var l=i.indexOf(c);if(l!==-1&&(e===document||e===window)){r.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(o=l)}if(a=i[o]||r.target,a!==e){lc(r,"currentTarget",{configurable:!0,get(){return a||t}});var f=ke,d=De;Et(null),qt(null);try{for(var _,m=[];a!==null;){var h=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+n];y!=null&&(!a.disabled||r.target===a)&&y.call(a,r)}catch(D){_?m.push(D):_=D}if(r.cancelBubble||h===e||h===null)break;a=h}if(_){for(let D of m)queueMicrotask(()=>{throw D});throw _}}finally{r.__root=e,delete r.currentTarget,Et(f),qt(d)}}}function Ds(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","<!---->"),e.content}function Vn(r,e){var t=De;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function O(r,e){var t=(e&Mc)!==0,n=(e&Lc)!==0,i,a=!r.startsWith("<!>");return()=>{i===void 0&&(i=Ds(a?r:"<!>"+r),t||(i=cr(i)));var o=n||$o?document.importNode(i,!0):i.cloneNode(!0);if(t){var c=cr(o),l=o.lastChild;Vn(c,l)}else Vn(o,o);return o}}function bu(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,a;return()=>{if(!a){var o=Ds(i),c=cr(o);a=cr(c)}var l=a.cloneNode(!0);return Vn(l,l),l}}function cl(r,e){return bu(r,e,"svg")}function rt(r=""){{var e=Gr(r+"");return Vn(e,e),e}}function it(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Gr();return r.append(e,t),Vn(e,t),r}function S(r,e){r!==null&&r.before(e)}function ne(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function Su(r,e){return Cu(r,e)}const gn=new Map;function Cu(r,{target:e,anchor:t,props:n={},events:i,context:a,intro:o=!0}){Qc();var c=new Set,l=d=>{for(var _=0;_<d.length;_++){var m=d[_];if(!c.has(m)){c.add(m);var h=wu(m);e.addEventListener(m,ri,{passive:h});var y=gn.get(m);y===void 0?(document.addEventListener(m,ri,{passive:h}),gn.set(m,1)):gn.set(m,y+1)}}};l(ms(ol)),ls.add(l);var u=void 0,f=au(()=>{var d=t??e.appendChild(Gr());return Hc(d,{pending:()=>{}},_=>{if(a){yt({});var m=We;m.c=a}i&&(n.$$events=i),u=r(_,n)||{},a&&wt()}),()=>{var h;for(var _ of c){e.removeEventListener(_,ri);var m=gn.get(_);--m===0?(document.removeEventListener(_,ri),gn.delete(_)):gn.set(_,m)}ls.delete(l),d!==t&&((h=d.parentNode)==null||h.removeChild(d))}});return Du.set(u,f),u}let Du=new WeakMap;var Zt,sr,At,di,fi,la;class ul{constructor(e,t=!0){Je(this,"anchor");Y(this,Zt,new Map);Y(this,sr,new Map);Y(this,At,new Map);Y(this,di,!0);Y(this,fi,()=>{var e=Re;if(p(this,Zt).has(e)){var t=p(this,Zt).get(e),n=p(this,sr).get(t);if(n)Cs(n);else{var i=p(this,At).get(t);i&&(p(this,sr).set(t,i.effect),p(this,At).delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[a,o]of p(this,Zt)){if(p(this,Zt).delete(a),a===e)break;const c=p(this,At).get(o);c&&(at(c.effect),p(this,At).delete(o))}for(const[a,o]of p(this,sr)){if(a===t)continue;const c=()=>{if(Array.from(p(this,Zt).values()).includes(a)){var u=document.createDocumentFragment();Qo(o,u),u.append(Gr()),p(this,At).set(a,{effect:o,fragment:u})}else at(o);p(this,sr).delete(a)};p(this,di)||!n?bn(o,c,!1):c()}}});Y(this,la,e=>{p(this,Zt).delete(e);const t=Array.from(p(this,Zt).values());for(const[n,i]of p(this,At))t.includes(n)||(at(i.effect),p(this,At).delete(n))});this.anchor=e,U(this,di,t)}ensure(e,t){var n=Re,i=Uo();if(t&&!p(this,sr).has(e)&&!p(this,At).has(e))if(i){var a=document.createDocumentFragment(),o=Gr();a.append(o),p(this,At).set(e,{effect:Nt(()=>t(o)),fragment:a})}else p(this,sr).set(e,Nt(()=>t(this.anchor)));if(p(this,Zt).set(n,e),i){for(const[c,l]of p(this,sr))c===e?n.skipped_effects.delete(l):n.skipped_effects.add(l);for(const[c,l]of p(this,At))c===e?n.skipped_effects.delete(l.effect):n.skipped_effects.add(l.effect);n.oncommit(p(this,fi)),n.ondiscard(p(this,la))}else p(this,fi).call(this)}}Zt=new WeakMap,sr=new WeakMap,At=new WeakMap,di=new WeakMap,fi=new WeakMap,la=new WeakMap;function de(r,e,t=!1){var n=new ul(r),i=t?cn:0;function a(o,c){n.ensure(o,c)}Kn(()=>{var o=!1;e((c,l=!0)=>{o=!0,a(l,c)}),o||a(!1,null)},i)}function qe(r,e){return e}function xu(r,e,t){for(var n=r.items,i=[],a=e.length,o=0;o<a;o++)Ss(e[o].e,i,!0);var c=a>0&&i.length===0&&t!==null;if(c){var l=t.parentNode;eu(l),l.append(t),n.clear(),rr(r,e[0].prev,e[a-1].next)}Jo(i,()=>{for(var u=0;u<a;u++){var f=e[u];c||(n.delete(f.k),rr(r,f.prev,f.next)),at(f.e,!c)}})}function Pe(r,e,t,n,i,a=null){var o=r,c={flags:e,items:new Map,first:null},l=(e&Co)!==0;if(l){var u=r;o=u.appendChild(Gr())}var f=null,d=!1,_=new Map,m=ws(()=>{var D=t();return ps(D)?D:D==null?[]:ms(D)}),h,y;function v(){Eu(y,h,c,_,o,i,e,n,t),a!==null&&(h.length===0?f?Cs(f):f=Nt(()=>a(o)):f!==null&&bn(f,()=>{f=null}))}Kn(()=>{y??(y=De),h=s(m);var D=h.length;if(!(d&&D===0)){d=D===0;var M,L,F,E;if(Uo()){var k=new Set,B=Re;for(L=0;L<D;L+=1){F=h[L],E=n(F,L);var q=c.items.get(E)??_.get(E);q?e&(ma|_a)&&dl(q,F,L,e):(M=fl(null,c,null,null,F,E,L,i,e,t,!0),_.set(E,M)),k.add(E)}for(const[ie,oe]of c.items)k.has(ie)||B.skipped_effects.add(oe.e);B.oncommit(v)}else v();s(m)}})}function Eu(r,e,t,n,i,a,o,c,l){var $,b,x,A;var u=(o&Dc)!==0,f=(o&(ma|_a))!==0,d=e.length,_=t.items,m=t.first,h=m,y,v=null,D,M=[],L=[],F,E,k,B;if(u)for(B=0;B<d;B+=1)F=e[B],E=c(F,B),k=_.get(E),k!==void 0&&(($=k.a)==null||$.measure(),(D??(D=new Set)).add(k));for(B=0;B<d;B+=1){if(F=e[B],E=c(F,B),k=_.get(E),k===void 0){var q=n.get(E);if(q!==void 0){n.delete(E),_.set(E,q);var ie=v?v.next:h;rr(t,v,q),rr(t,q,ie),Ua(q,ie,i),v=q}else{var oe=h?h.e.nodes_start:i;v=fl(oe,t,v,v===null?t.first:v.next,F,E,B,a,o,l)}_.set(E,v),M=[],L=[],h=v.next;continue}if(f&&dl(k,F,B,o),k.e.f&Ot&&(Cs(k.e),u&&((b=k.a)==null||b.unfix(),(D??(D=new Set)).delete(k))),k!==h){if(y!==void 0&&y.has(k)){if(M.length<L.length){var te=L[0],ae;v=te.prev;var ge=M[0],me=M[M.length-1];for(ae=0;ae<M.length;ae+=1)Ua(M[ae],te,i);for(ae=0;ae<L.length;ae+=1)y.delete(L[ae]);rr(t,ge.prev,me.next),rr(t,v,ge),rr(t,me,te),h=te,v=me,B-=1,M=[],L=[]}else y.delete(k),Ua(k,h,i),rr(t,k.prev,k.next),rr(t,k,v===null?t.first:v.next),rr(t,v,k),v=k;continue}for(M=[],L=[];h!==null&&h.k!==E;)h.e.f&Ot||(y??(y=new Set)).add(h),L.push(h),h=h.next;if(h===null)continue;k=h}M.push(k),v=k,h=k.next}if(h!==null||y!==void 0){for(var ue=y===void 0?[]:ms(y);h!==null;)h.e.f&Ot||ue.push(h),h=h.next;var xe=ue.length;if(xe>0){var Q=o&Co&&d===0?i:null;if(u){for(B=0;B<xe;B+=1)(x=ue[B].a)==null||x.measure();for(B=0;B<xe;B+=1)(A=ue[B].a)==null||A.fix()}xu(t,ue,Q)}}u&&Dr(()=>{var N;if(D!==void 0)for(k of D)(N=k.a)==null||N.apply()}),r.first=t.first&&t.first.e,r.last=v&&v.e;for(var V of n.values())at(V.e);n.clear()}function dl(r,e,t,n){n&ma&&On(r.v,e),n&_a?On(r.i,t):r.i=t}function fl(r,e,t,n,i,a,o,c,l,u,f){var d=(l&ma)!==0,_=(l&xc)===0,m=d?_?Vo(i,!1,!1):$r(i):i,h=l&_a?$r(o):o,y={i:h,v:m,k:a,a:null,e:null,prev:t,next:n};try{if(r===null){var v=document.createDocumentFragment();v.append(r=Gr())}return y.e=Nt(()=>c(r,m,h,u),Oc),y.e.prev=t&&t.e,y.e.next=n&&n.e,t===null?f||(e.first=y):(t.next=y,t.e.next=y.e),n!==null&&(n.prev=y,n.e.prev=y.e),y}finally{}}function Ua(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==null&&a!==n;){var o=xi(a);i.before(a),a=o}}function rr(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function dn(r,e,t=!1,n=!1,i=!1){var a=r,o="";Z(()=>{var c=De;if(o!==(o=e()??"")&&(c.nodes_start!==null&&(Yo(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),o!=="")){var l=o+"";t?l=`<svg>${l}</svg>`:n&&(l=`<math>${l}</math>`);var u=Ds(l);if((t||n)&&(u=cr(u)),Vn(cr(u),u.lastChild),t||n)for(;cr(u);)a.before(cr(u));else a.before(u)}})}function Wi(r,e,...t){var n=new ul(r);Kn(()=>{const i=e()??null;n.ensure(i,i&&(a=>i(a,...t)))},cn)}function Iu(r,e){var t=void 0,n;Kn(()=>{t!==(t=e())&&(n&&(at(n),n=null),t&&(n=Nt(()=>{Ei(()=>t(r))})))})}function vl(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=vl(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function ku(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=vl(r))&&(n&&(n+=" "),n+=e);return n}function Pu(r){return typeof r=="object"?ku(r):r??""}const Ks=[...` 	
\r\fÂ \v\uFEFF`];function Mu(r,e,t){var n=r==null?"":""+r;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,o=0;(o=n.indexOf(i,o))>=0;){var c=o+a;(o===0||Ks.includes(n[o-1]))&&(c===n.length||Ks.includes(n[c]))?n=(o===0?"":n.substring(0,o))+n.substring(c+1):o=c}}return n===""?null:n}function Us(r,e=!1){var t=e?" !important;":";",n="";for(var i in r){var a=r[i];a!=null&&a!==""&&(n+=" "+i+": "+a+t)}return n}function Ha(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function Lu(r,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,o=0,c=!1,l=[];n&&l.push(...Object.keys(n).map(Ha)),i&&l.push(...Object.keys(i).map(Ha));var u=0,f=-1;const y=r.length;for(var d=0;d<y;d++){var _=r[d];if(c?_==="/"&&r[d-1]==="*"&&(c=!1):a?a===_&&(a=!1):_==="/"&&r[d+1]==="*"?c=!0:_==='"'||_==="'"?a=_:_==="("?o++:_===")"&&o--,!c&&a===!1&&o===0){if(_===":"&&f===-1)f=d;else if(_===";"||d===y-1){if(f!==-1){var m=Ha(r.substring(u,f).trim());if(!l.includes(m)){_!==";"&&d++;var h=r.substring(u,d).trim();t+=" "+h+";"}}u=d+1,f=-1}}}}return n&&(t+=Us(n)),i&&(t+=Us(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function St(r,e,t,n,i,a){var o=r.__className;if(o!==t||o===void 0){var c=Mu(t,n,a);c==null?r.removeAttribute("class"):e?r.className=c:r.setAttribute("class",c),r.__className=t}else if(a&&i!==a)for(var l in a){var u=!!a[l];(i==null||u!==!!i[l])&&r.classList.toggle(l,u)}return a}function za(r,e={},t,n){for(var i in t){var a=t[i];e[i]!==a&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,a,n))}}function Rt(r,e,t,n){var i=r.__style;if(i!==e){var a=Lu(e,n);a==null?r.removeAttribute("style"):r.style.cssText=a,r.__style=e}else n&&(Array.isArray(n)?(za(r,t==null?void 0:t[0],n[0]),za(r,t==null?void 0:t[1],n[1],"important")):za(r,t,n));return n}function ta(r,e,t=!1){if(r.multiple){if(e==null)return;if(!ps(e))return Tc();for(var n of r.options)n.selected=e.includes(oi(n));return}for(n of r.options){var i=oi(n);if(jo(i,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function hl(r){var e=new MutationObserver(()=>{ta(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ba(()=>{e.disconnect()})}function tt(r,e,t=e){var n=new WeakSet,i=!0;wa(r,"change",a=>{var o=a?"[selected]":":checked",c;if(r.multiple)c=[].map.call(r.querySelectorAll(o),oi);else{var l=r.querySelector(o)??r.querySelector("option:not([disabled])");c=l&&oi(l)}t(c),Re!==null&&n.add(Re)}),Ei(()=>{var a=e();if(r===document.activeElement){var o=ii??Re;if(n.has(o))return}if(ta(r,a,i),i&&a===void 0){var c=r.querySelector(":checked");c!==null&&(a=oi(c),t(a))}r.__value=a,i=!1}),hl(r)}function oi(r){return"__value"in r?r.__value:r.value}const Jn=Symbol("class"),Zn=Symbol("style"),pl=Symbol("is custom element"),ml=Symbol("is html");function $t(r,e){var t=Sa(r);t.value===(t.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function Au(r,e){var t=Sa(r);t.checked!==(t.checked=e??void 0)&&(r.checked=e)}function Nu(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Ft(r,e,t,n){var i=Sa(r);i[e]!==(i[e]=t)&&(e==="loading"&&(r[vc]=t),t==null?r.removeAttribute(e):typeof t!="string"&&_l(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Tu(r,e,t,n,i=!1,a=!1){var o=Sa(r),c=o[pl],l=!o[ml],u=e||{},f=r.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class?t.class=Pu(t.class):t[Jn]&&(t.class=null),t[Zn]&&(t.style??(t.style=null));var _=_l(r);for(const F in t){let E=t[F];if(f&&F==="value"&&E==null){r.value=r.__value="",u[F]=E;continue}if(F==="class"){var m=r.namespaceURI==="http://www.w3.org/1999/xhtml";St(r,m,E,n,e==null?void 0:e[Jn],t[Jn]),u[F]=E,u[Jn]=t[Jn];continue}if(F==="style"){Rt(r,E,e==null?void 0:e[Zn],t[Zn]),u[F]=E,u[Zn]=t[Zn];continue}var h=u[F];if(!(E===h&&!(E===void 0&&r.hasAttribute(F)))){u[F]=E;var y=F[0]+F[1];if(y!=="$$")if(y==="on"){const k={},B="$$"+F;let q=F.slice(2);var v=mu(q);if(hu(q)&&(q=q.slice(0,-7),k.capture=!0),!v&&h){if(E!=null)continue;r.removeEventListener(q,u[B],k),u[B]=null}if(E!=null)if(v)r[`__${q}`]=E,Pt([q]);else{let ie=function(oe){u[F].call(this,oe)};var L=ie;u[B]=ll(q,r,ie,k)}else v&&(r[`__${q}`]=void 0)}else if(F==="style")Ft(r,F,E);else if(F==="autofocus")Qi(r,!!E);else if(!c&&(F==="__value"||F==="value"&&E!=null))r.value=r.__value=E;else if(F==="selected"&&f)Nu(r,E);else{var D=F;l||(D=gu(D));var M=D==="defaultValue"||D==="defaultChecked";if(E==null&&!c&&!M)if(o[F]=null,D==="value"||D==="checked"){let k=r;const B=e===void 0;if(D==="value"){let q=k.defaultValue;k.removeAttribute(D),k.defaultValue=q,k.value=k.__value=B?q:null}else{let q=k.defaultChecked;k.removeAttribute(D),k.defaultChecked=q,k.checked=B?q:!1}}else r.removeAttribute(F);else M||_.includes(D)&&(c||typeof E!="string")?(r[D]=E,D in o&&(o[D]=lt)):typeof E!="function"&&Ft(r,D,E)}}}return u}function Ru(r,e,t=[],n=[],i=[],a,o=!1,c=!1){To(i,t,n,l=>{var u=void 0,f={},d=r.nodeName==="SELECT",_=!1;if(Kn(()=>{var h=e(...l.map(s)),y=Tu(r,u,h,a,o,c);_&&d&&"value"in h&&ta(r,h.value);for(let D of Object.getOwnPropertySymbols(f))h[D]||at(f[D]);for(let D of Object.getOwnPropertySymbols(h)){var v=h[D];D.description===Nc&&(!u||v!==u[D])&&(f[D]&&at(f[D]),f[D]=Nt(()=>Iu(r,()=>v))),y[D]=v}u=y}),d){var m=r;Ei(()=>{ta(m,u.value,!0),hl(m)})}_=!0})}function Sa(r){return r.__attributes??(r.__attributes={[pl]:r.nodeName.includes("-"),[ml]:r.namespaceURI===Ac})}var Hs=new Map;function _l(r){var e=r.getAttribute("is")||r.nodeName,t=Hs.get(e);if(t)return t;Hs.set(e,t=[]);for(var n,i=r,a=Element.prototype;a!==i;){n=_o(i);for(var o in n)n[o].set&&t.push(o);i=_s(i)}return t}function br(r,e,t=e){var n=new WeakSet;wa(r,"input",async i=>{var a=i?r.defaultValue:r.value;if(a=Wa(r)?Ya(a):a,t(a),Re!==null&&n.add(Re),await fu(),a!==(a=e())){var o=r.selectionStart,c=r.selectionEnd,l=r.value.length;if(r.value=a??"",c!==null){var u=r.value.length;o===c&&c===l&&u>l?(r.selectionStart=u,r.selectionEnd=u):(r.selectionStart=o,r.selectionEnd=Math.min(c,u))}}}),hr(e)==null&&r.value&&(t(Wa(r)?Ya(r.value):r.value),Re!==null&&n.add(Re)),hn(()=>{var i=e();if(r===document.activeElement){var a=ii??Re;if(n.has(a))return}Wa(r)&&i===Ya(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}const qa=new Set;function yn(r,e,t,n,i=n){var a=t.getAttribute("type")==="checkbox",o=r;if(e!==null)for(var c of e)o=o[c]??(o[c]=[]);o.push(t),wa(t,"change",()=>{var l=t.__value;a&&(l=Ou(o,l,t.checked)),i(l)},()=>i(a?[]:null)),hn(()=>{var l=n();a?(l=l||[],t.checked=l.includes(t.__value)):t.checked=jo(t.__value,l)}),ba(()=>{var l=o.indexOf(t);l!==-1&&o.splice(l,1)}),qa.has(o)||(qa.add(o),Dr(()=>{o.sort((l,u)=>l.compareDocumentPosition(u)===4?-1:1),qa.delete(o)})),Dr(()=>{})}function ni(r,e,t=e){wa(r,"change",n=>{var i=n?r.defaultChecked:r.checked;t(i)}),hr(e)==null&&t(r.checked),hn(()=>{var n=e();r.checked=!!n})}function Ou(r,e,t){for(var n=new Set,i=0;i<r.length;i+=1)r[i].checked&&n.add(r[i].__value);return t||n.delete(e),Array.from(n)}function Wa(r){var e=r.type;return e==="number"||e==="range"}function Ya(r){return r===""?null:+r}var Rr,In,vi,ca,gl;const ua=class ua{constructor(e){Y(this,ca);Y(this,Rr,new WeakMap);Y(this,In);Y(this,vi);U(this,vi,e)}observe(e,t){var n=p(this,Rr).get(e)||new Set;return n.add(t),p(this,Rr).set(e,n),He(this,ca,gl).call(this).observe(e,p(this,vi)),()=>{var i=p(this,Rr).get(e);i.delete(t),i.size===0&&(p(this,Rr).delete(e),p(this,In).unobserve(e))}}};Rr=new WeakMap,In=new WeakMap,vi=new WeakMap,ca=new WeakSet,gl=function(){return p(this,In)??U(this,In,new ResizeObserver(e=>{for(var t of e){ua.entries.set(t.target,t);for(var n of p(this,Rr).get(t.target)||[])n(t)}}))},Je(ua,"entries",new WeakMap);let cs=ua;var Fu=new cs({box:"border-box"});function Vu(r,e,t){var n=Fu.observe(r,()=>t(r[e]));Ei(()=>(hr(()=>t(r[e])),n))}function zs(r,e){return r===e||(r==null?void 0:r[ur])===e}function fn(r={},e,t,n){return Ei(()=>{var i,a;return hn(()=>{i=a,a=[],hr(()=>{r!==t(...a)&&(e(r,...a),i&&zs(t(...i),r)&&e(null,...i))})}),()=>{Dr(()=>{a&&zs(t(...a),r)&&e(null,...a)})}}),r}function Bu(r=!1){const e=We,t=e.l.u;if(!t)return;let n=()=>sl(e.s);if(r){let i=0,a={};const o=Di(()=>{let c=!1;const l=e.s;for(const u in l)l[u]!==a[u]&&(a[u]=l[u],c=!0);return c&&i++,i});n=()=>s(o)}t.b.length&&iu(()=>{qs(e,n),es(t.b)}),xr(()=>{const i=hr(()=>t.m.map(dc));return()=>{for(const a of i)typeof a=="function"&&a()}}),t.a.length&&xr(()=>{qs(e,n),es(t.a)})}function qs(r,e){if(r.l.s)for(const t of r.l.s)s(t);e()}let Ni=!1;function ju(r){var e=Ni;try{return Ni=!1,[r(),Ni]}finally{Ni=e}}const $u={get(r,e){if(!r.exclude.includes(e))return s(r.version),e in r.special?r.special[e]():r.props[e]},set(r,e,t){if(!(e in r.special)){var n=De;try{qt(r.parent_effect),r.special[e]=pe({get[e](){return r.props[e]}},e,Do)}finally{qt(n)}}return r.special[e](t),Zi(r.version),!0},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},deleteProperty(r,e){return r.exclude.includes(e)||(r.exclude.push(e),Zi(r.version)),!0},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function Ws(r,e){return new Proxy({props:r,exclude:e,special:{},version:$r(0),parent_effect:De},$u)}const Gu={get(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(Xn(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(r,e,t){let n=r.props.length;for(;n--;){let i=r.props[n];Xn(i)&&(i=i());const a=Vr(i,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(Xn(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const i=Vr(n,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(r,e){if(e===ur||e===bo)return!1;for(let t of r.props)if(Xn(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if(Xn(t)&&(t=t()),!!t){for(const n in t)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(t))e.includes(n)||e.push(n)}return e}};function Ku(...r){return new Proxy({props:r},Gu)}function pe(r,e,t,n){var L;var i=!Gn||(t&Ic)!==0,a=(t&kc)!==0,o=(t&Pc)!==0,c=n,l=!0,u=()=>(l&&(l=!1,c=o?hr(n):n),c),f;if(a){var d=ur in r||bo in r;f=((L=Vr(r,e))==null?void 0:L.set)??(d&&e in r?F=>r[e]=F:void 0)}var _,m=!1;a?[_,m]=ju(()=>r[e]):_=r[e],_===void 0&&n!==void 0&&(_=u(),f&&(i&&yc(),f(_)));var h;if(i?h=()=>{var F=r[e];return F===void 0?u():(l=!0,F)}:h=()=>{var F=r[e];return F!==void 0&&(c=void 0),F===void 0?c:F},i&&!(t&Do))return h;if(f){var y=r.$$legacy;return function(F,E){return arguments.length>0?((!i||!E||y||m)&&f(E?h():F),F):h()}}var v=!1,D=(t&Ec?Di:ws)(()=>(v=!1,h()));a&&s(D);var M=De;return function(F,E){if(arguments.length>0){const k=E?s(D):i&&a?Ae(F):F;return C(D,k),v=!0,c!==void 0&&(c=k),F}return pn&&v||M.f&Sr?D.v:s(D)}}function Hn(r){We===null&&So(),Gn&&We.l!==null?Uu(We).m.push(r):xr(()=>{const e=hr(r);if(typeof e=="function")return e})}function Ca(r){We===null&&So(),Hn(()=>()=>hr(r))}function Uu(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Hu="5";var po;typeof window<"u"&&((po=window.__svelte??(window.__svelte={})).v??(po.v=new Set)).add(Hu);const zu=0,qu=126,Wu=231,Yu=6;class Xu{constructor(){this.universe=new Uint8Array(512).fill(0),this.device=null,this.interval=null,this.updateRate=1e3/60,this.connected=!1}async connect(){if(!("usb"in navigator))throw new Error("WebUSB is not supported in this browser");try{return this.device=await navigator.usb.requestDevice({filters:[{vendorId:1027}]}),await this.device.open(),await this.device.claimInterface(0),await this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:0}),this.connected=!0,this.interval=setInterval(()=>{this.sendUniverse()},this.updateRate),!0}catch(e){throw console.error("Failed to connect:",e),e}}disconnect(){this.interval&&(clearInterval(this.interval),this.interval=null),this.device&&(this.device.close(),this.device=null),this.connected=!1}setChannel(e,t){e>=0&&e<512&&(this.universe[e]=Math.max(0,Math.min(255,t)))}getChannel(e){return this.universe[e]||0}setChannels(e,t){t.forEach((n,i)=>{this.setChannel(e+i,n)})}getUniverse(){return this.universe}clearUniverse(){this.universe.fill(0)}sendUniverse(){if(!this.device||!this.connected)return;const e=Uint8Array.from([zu,...this.universe]),t=Uint8Array.from([qu,Yu,e.length&255,e.length>>8&255,...e,Wu]);this.device.transferOut(2,t).catch(n=>{console.error("Failed to send DMX data:",n)})}}const Me={RGB:{name:"RGB Light",channels:3,components:[{name:"Red",channel:0},{name:"Green",channel:1},{name:"Blue",channel:2}],controls:[{name:"Color",type:"rgb",components:{r:0,g:1,b:2}}]},RGBA:{name:"RGBA Light",channels:4,components:[{name:"Red",channel:0},{name:"Green",channel:1},{name:"Blue",channel:2},{name:"Amber",channel:3}],controls:[{name:"Color",type:"rgb",components:{r:0,g:1,b:2}},{name:"Amber",type:"slider",color:"#ffbf00",components:{value:3}}]},RGBW:{name:"RGBW Light",channels:4,components:[{name:"Red",channel:0},{name:"Green",channel:1},{name:"Blue",channel:2},{name:"White",channel:3}],controls:[{name:"Color",type:"rgb",components:{r:0,g:1,b:2}},{name:"White",type:"slider",color:"#808080",components:{value:3}}]},DIMMER:{name:"Dimmer",channels:1,components:[{name:"Intensity",channel:0}],controls:[{name:"Intensity",type:"slider",color:"#888888",components:{value:0}}]},SMOKE:{name:"Smoke Machine",channels:1,components:[{name:"Output",channel:0}],controls:[{name:"Output",type:"slider",color:"#666666",components:{value:0}}]},MOVING_HEAD:{name:"Moving Head (Basic)",channels:7,components:[{name:"Pan",channel:0},{name:"Tilt",channel:1},{name:"Dimmer",channel:2},{name:"Red",channel:3},{name:"Green",channel:4},{name:"Blue",channel:5},{name:"White",channel:6}],controls:[{name:"Pan/Tilt",type:"xypad",components:{x:0,y:1}},{name:"Dimmer",type:"slider",color:"#888888",components:{value:2}},{name:"Color",type:"rgb",components:{r:3,g:4,b:5}},{name:"White",type:"slider",color:"#808080",components:{value:6}}]},FLAMETHROWER:{name:"Flamethrower",channels:2,components:[{name:"Safety",channel:0},{name:"Fuel",channel:1}],controls:[{name:"Safety",type:"toggle",offValue:0,onValue:125,components:{value:0}},{name:"Fuel",type:"slider",color:"#ff5722",components:{value:1}}]}};class Qn{constructor(e,t,n,i="",a=null,o=null,c=null,l=!1){this.id=e,this.type=t,this.startChannel=n,this.name=i||`${Me[t].name} ${e}`,this.defaultValues=new Array(Me[t].channels).fill(0),this.linkedTo=a,this.syncedControls=c,this.mirrorPan=l,this.cssId=o||this.generateCssId(this.name)}generateCssId(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}updateCssId(){this.cssId=this.generateCssId(this.name)}setValue(e,t){this.defaultValues[e]=Math.max(0,Math.min(255,t))}getValue(e){return this.defaultValues[e]}getChannelValues(){return this.defaultValues}isLinked(){return this.linkedTo!==null}}function ln(r,e){if(!e||e.length===0)return"#000000";switch(r){case"RGB":{const[t,n,i]=e;return`rgb(${t}, ${n}, ${i})`}case"RGBA":{const[t,n,i,a]=e,o=255,c=191,l=0,u=Math.min(255,t+o*a/255),f=Math.min(255,n+c*a/255),d=Math.min(255,i+l*a/255);return`rgb(${Math.round(u)}, ${Math.round(f)}, ${Math.round(d)})`}case"RGBW":{const[t,n,i,a]=e,o=Math.min(255,t+a),c=Math.min(255,n+a),l=Math.min(255,i+a);return`rgb(${Math.round(o)}, ${Math.round(c)}, ${Math.round(l)})`}case"MOVING_HEAD":{const t=e[2]||0,n=e[3]||0,i=e[4]||0,a=e[5]||0,o=e[6]||0;let c=Math.min(255,n+o),l=Math.min(255,i+o),u=Math.min(255,a+o);return c=Math.round(c*t/255),l=Math.round(l*t/255),u=Math.round(u*t/255),`rgb(${c}, ${l}, ${u})`}case"DIMMER":{const t=e[0]||0;return`rgb(${t}, ${t}, ${t})`}case"SMOKE":{const t=e[0]||0,n=Math.round(t*.7);return`rgb(${Math.round(t*.5)}, ${Math.round(t*.5)}, ${n})`}default:return"#000000"}}const Ju={xypad:{properties:{x:{name:"--pan",convert:r=>`${(r/255*100-50).toFixed(1)}%`},y:{name:"--tilt",convert:r=>`${(r/255*100).toFixed(1)}%`}}},rgb:{properties:{color:{name:"color",convert:"color"}}},slider:{properties:{value:{getName:r=>r==="Dimmer"||r==="Intensity"?"--intensity":`--${r.toLowerCase().replace(/\s+/g,"-")}`,convert:(r,e)=>e==="Dimmer"||e==="Intensity"?(r/255).toFixed(3):r.toString()}}}};class Zu{constructor(e=0,t="RGB",n=[0,0,0]){this.time=e,this.deviceType=t,this.values=[...n]}getProperties(){const e=ln(this.deviceType,this.values);if(this.deviceType==="MOVING_HEAD"){const t=this.values[0]||0,n=this.values[1]||0,i=t/255*100-50,a=n/255*100-50;return{color:e,transform:`translate(${i}%, ${a}%)`}}return{color:e}}toCSS(){const e=this.getProperties(),t=Object.entries(e).map(([i,a])=>`${i}: ${a}`).join("; ");return`${Math.round(this.time*100)}% { ${t}; }`}}class Da{constructor(e="animation",t="RGB",n=[],i=null,a=null,o=null){this.name=e,this.controls=a||[],this.displayName=o,this.keyframes=n,this.cssName=i||this._generateCSSName()}getControlsForRendering(){if(!this.controls||this.controls.length===0)return{controls:Me.RGB.controls,components:Me.RGB.components};for(const[e,t]of Object.entries(Me))if(this.controls.every(i=>t.controls.some(a=>a.name===i)))return{controls:t.controls.filter(a=>this.controls.includes(a.name)),components:t.components};return{controls:Me.RGB.controls,components:Me.RGB.components}}_generateCSSName(){return this.name?this.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):"animation"}updateCSSName(){this.cssName=this._generateCSSName()}addKeyframe(e,t){const{controls:n,components:i}=this.getControlsForRendering();let a="RGB";for(const[c,l]of Object.entries(Me))if(l.controls===n&&l.components===i){a=c;break}const o=new Zu(e,a,t);return this.keyframes=[...this.keyframes,o].sort((c,l)=>c.time-l.time),o}removeKeyframe(e){const t=this.keyframes.indexOf(e);t!==-1&&this.keyframes.splice(t,1)}toCSS(){if(this.keyframes.length===0)return"";const e=this.keyframes.map(t=>{const n=Math.round(t.time*100),i=this._getKeyframeProperties(t),a=Object.entries(i).map(([o,c])=>`${o}: ${c}`).join("; ");return`${n}% { ${a}; }`}).join(`
  `);return`@keyframes ${this.cssName} {
  ${e}
}`}_getKeyframeProperties(e){const t={},{controls:n,components:i}=this.getControlsForRendering();for(const a of n){const o=Ju[a.type];if(o){if(a.type==="xypad"){const c=i[a.components.x].channel,l=i[a.components.y].channel,u=e.values[c]||0,f=e.values[l]||0;t[o.properties.x.name]=o.properties.x.convert(u),t[o.properties.y.name]=o.properties.y.convert(f)}else if(a.type==="rgb")t.color=ln(e.deviceType,e.values);else if(a.type==="slider"){const c=i[a.components.value].channel,l=e.values[c]||0,u=o.properties.value.getName(a.name),f=o.properties.value.convert(l,a.name);t[u]=f}}}return Object.keys(t).length===0&&(t.color=ln(e.deviceType,e.values)),t}getKeyframeColor(e){return ln(e.deviceType,e.values)}getValuesAtTime(e){if(this.keyframes.length===0){const{components:n}=this.getControlsForRendering(),i=n.length;return new Array(i).fill(0)}const t=[...this.keyframes].sort((n,i)=>n.time-i.time);if(e<=t[0].time)return[...t[0].values];if(e>=t[t.length-1].time)return[...t[t.length-1].values];for(let n=0;n<t.length-1;n++){const i=t[n],a=t[n+1];if(e>=i.time&&e<=a.time){const o=(e-i.time)/(a.time-i.time),c=[];for(let l=0;l<i.values.length;l++){const u=i.values[l],f=a.values[l];c.push(Math.round(u+(f-u)*o))}return c}}return[...t[0].values]}getGradientSegments(e=1e3){if(this.keyframes.length===0)return[{left:0,width:e,gradient:"#000000"}];const t=[],n=[...this.keyframes].sort((a,o)=>a.time-o.time);if(n[0].time>0){const a=this.getKeyframeColor(n[0]);t.push({left:0,width:n[0].time*e,gradient:`linear-gradient(to right, #000000, ${a})`})}for(let a=0;a<n.length-1;a++){const o=n[a],c=n[a+1],l=this.getKeyframeColor(o),u=this.getKeyframeColor(c);t.push({left:o.time*e,width:(c.time-o.time)*e,gradient:`linear-gradient(to right, ${l}, ${u})`})}const i=n[n.length-1];if(i.time<1){const a=this.getKeyframeColor(i);t.push({left:i.time*e,width:(1-i.time)*e,gradient:`linear-gradient(to right, ${a}, #000000)`})}return t}getAffectedChannels(){const{controls:e,components:t}=this.getControlsForRendering();if(!this.controls||this.controls.length===0)return Array.from({length:t.length},(i,a)=>a);const n=new Set;for(const i of e)for(const a of Object.values(i.components)){const o=t[a].channel;n.add(o)}return Array.from(n).sort((i,a)=>i-a)}getNumChannels(){return this.getAffectedChannels().length}getDisplayName(){return this.displayName?this.displayName:this.controls&&this.controls.length>0?this.controls.join(", "):"Animation"}getControlNames(){return this.controls||[]}toJSON(){return{name:this.name,controls:this.controls,displayName:this.displayName,keyframes:this.keyframes.map(e=>({time:e.time,deviceType:e.deviceType,values:e.values}))}}static fromJSON(e){let t=e.controls||null;if(!t&&e.controlName&&(t=[e.controlName]),!t&&e.deviceType){const a=Me[e.deviceType];a&&(t=a.controls.map(o=>o.name))}(!t||t.length===0)&&(t=["Color"]);const n=e.displayName||null,i=new Da(e.name,"RGB",[],null,t,n);for(const a of e.keyframes)if(a.values)i.addKeyframe(a.time,a.values);else if(a.properties){const o=new Array(i.deviceType==="RGB"?3:4).fill(0);i.addKeyframe(a.time,o)}return i}}class Qu{constructor(){this.animations=new Map,this.listeners=new Map,this.load()}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}add(e){this.animations.set(e.name,e),this.save(),this._emit("changed",{type:"add",animation:e})}remove(e){const t=this.animations.get(e);this.animations.delete(e),this.save(),this._emit("changed",{type:"remove",animation:t,name:e})}get(e){return this.animations.get(e)}getAll(){return Array.from(this.animations.values())}has(e){return this.animations.has(e)}rename(e,t){const n=this.animations.get(e);return n?(n.name=t,this.animations.delete(e),this.animations.set(t,n),this.save(),!0):!1}toCSS(){return this.getAll().map(e=>e.toCSS()).filter(e=>e).join(`

`)}save(){const e=this.getAll().map(t=>t.toJSON());localStorage.setItem("dmx-animations",JSON.stringify(e))}load(){const e=localStorage.getItem("dmx-animations");if(e)try{const t=JSON.parse(e);for(const n of t){const i=Da.fromJSON(n);this.animations.set(i.name,i)}}catch(t){console.error("Failed to load animations:",t)}}clear(){this.animations.clear(),this.save()}}class Bn{constructor(e={}){this.id=e.id||`mapping-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,this.name=e.name||"Untitled Mapping",this.mode=e.mode||"trigger",this.inputDeviceId=e.inputDeviceId||null,this.inputControlId=e.inputControlId||null,this.inputDeviceName=e.inputDeviceName||null,this.color="color"in e?e.color:this._generateRandomColor(),this.triggerType=e.triggerType||"pressed",this.actionType=e.actionType||"animation",this.animationName=e.animationName||null,this.duration=e.duration||1e3,this.easing=e.easing||"linear",this.iterations=e.iterations||1,this.targetDeviceIds=e.targetDeviceIds||[],this.setValueDeviceId=e.setValueDeviceId||null,this.channelValues=e.channelValues||{},this.propertyName=e.propertyName||"--value",this.propertyType=e.propertyType||"percentage",this.range=e.range||[0,100],this.cssClassName=e.cssClassName||this._generateClassName(),this.cssClassDown=e.cssClassDown||(this.isButtonInput()?this._generateButtonDownClass():null),this.cssClassUp=e.cssClassUp||(this.isButtonInput()?this._generateButtonUpClass():null),this.cssProperty=e.cssProperty||(this.isButtonInput()?null:this._generatePropertyName())}_generateRandomColor(){const e=Math.floor(Math.random()*360),t=70+Math.floor(Math.random()*30),n=50+Math.floor(Math.random()*20);return`hsl(${e}, ${t}%, ${n}%)`}_generateClassName(){if(!this.inputDeviceId||!this.inputControlId)return`mapping-${this.id}`;const e=this.inputControlId.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase();if(this.mode==="input")return e;const t=this.triggerType==="pressed"?"down":this.triggerType==="not-pressed"?"up":"always";return`${e}_${t}`}updateClassName(){this.cssClassName=this._generateClassName()}_generatePropertyName(){return this.name?`--${this.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}`:"--value"}_generateButtonDownClass(){return this.name?`${this.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_down`:""}_generateButtonUpClass(){return this.name?`${this.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_up`:""}updateCSSIdentifiers(){this.isButtonInput()?(this.cssClassDown=this._generateButtonDownClass(),this.cssClassUp=this._generateButtonUpClass(),this.cssProperty=null):(this.cssProperty=this._generatePropertyName(),this.cssClassDown=null,this.cssClassUp=null)}toCSS(e=[]){return this.mode==="trigger"?this._generateTriggerCSS(e):""}_generateTriggerCSS(e=[]){if(!this.animationName)return"";const t=this.targetDeviceIds.map(a=>{const o=e.find(c=>c.id===a);return o?`#${o.cssId}`:null}).filter(a=>a!==null).join(", ");if(!t)return"";const n=this.iterations==="infinite"?"infinite":this.iterations,i=(this.duration/1e3).toFixed(3);return`.${this.cssClassName} ${t} {
  animation: ${this.animationName} ${i}s ${this.easing} ${n};
}`}getPropertyName(){return this.propertyName.startsWith("--")?this.propertyName:`--${this.propertyName}`}getInputPropertyName(){return this.cssProperty}isButtonInput(){return this.inputControlId?this.inputControlId.startsWith("button-")||this.inputControlId.startsWith("note-")||this.inputControlId.startsWith("key-"):!1}getButtonDownClass(){return this.cssClassDown}getButtonUpClass(){return this.cssClassUp}mapValue(e){const[t,n]=this.range,i=t+(n-t)*e;switch(this.propertyType){case"percentage":return`${i.toFixed(1)}%`;case"degrees":return`${i.toFixed(1)}deg`;case"number":return i.toFixed(2);default:return i.toString()}}toJSON(){return{id:this.id,name:this.name,mode:this.mode,inputDeviceId:this.inputDeviceId,inputControlId:this.inputControlId,inputDeviceName:this.inputDeviceName,color:this.color,triggerType:this.triggerType,actionType:this.actionType,animationName:this.animationName,duration:this.duration,easing:this.easing,iterations:this.iterations,targetDeviceIds:this.targetDeviceIds,setValueDeviceId:this.setValueDeviceId,channelValues:this.channelValues,propertyName:this.propertyName,propertyType:this.propertyType,range:this.range,cssClassName:this.cssClassName}}static fromJSON(e){const t=new Bn(e);return t.mode==="input"&&t.cssClassName.match(/_(down|up|always)$/)&&(t.cssClassName=t._generateClassName()),t}}class yl{constructor(){this.mappings=new Map,this.listeners=new Map,this.load()}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}add(e){return this.mappings.set(e.id,e),this.save(),this._emit("changed",{type:"add",mapping:e}),e}update(e){this.mappings.has(e.id)&&(this.mappings.set(e.id,e),this.save(),this._emit("changed",{type:"update",mapping:e}))}remove(e){const t=this.mappings.get(e);this.mappings.delete(e),this.save(),this._emit("changed",{type:"remove",mapping:t,id:e})}get(e){return this.mappings.get(e)}getAll(){return Array.from(this.mappings.values())}getByInput(e,t){return this.getAll().filter(n=>n.inputDeviceId===e&&n.inputControlId===t)}getTriggerMappings(){return this.getAll().filter(e=>e.mode==="trigger")}getDirectMappings(){return this.getAll().filter(e=>e.mode==="direct")}toCSS(e=[]){return this.getTriggerMappings().map(t=>t.toCSS(e)).filter(t=>t).join(`

`)}save(){const e=this.getAll().map(t=>t.toJSON());localStorage.setItem("dmx-mappings",JSON.stringify(e))}load(){const e=localStorage.getItem("dmx-mappings");if(e)try{const t=JSON.parse(e);for(const n of t){const i=Bn.fromJSON(n);this.mappings.set(i.id,i)}}catch(t){console.error("Failed to load mappings:",t)}}clear(){this.mappings.clear(),this.save()}}class wl{constructor(){this.activeClasses=new Set,this.notPressedClasses=new Set,this.alwaysClasses=new Set,this.container=null,this.setValueCallback=null,this.activeSetValueMappings=new Map}setContainer(e){this.container=e;for(const t of this.notPressedClasses)e.classList.add(t);for(const t of this.alwaysClasses)e.classList.add(t)}setSetValueCallback(e){this.setValueCallback=e}register(e){e.mode==="trigger"&&(e.actionType==="animation"?e.triggerType==="not-pressed"?(this.notPressedClasses.add(e.cssClassName),this.container&&this.container.classList.add(e.cssClassName)):e.triggerType==="always"&&(this.alwaysClasses.add(e.cssClassName),this.container&&this.container.classList.add(e.cssClassName)):e.actionType==="setValue"&&e.triggerType==="always"&&this.setValueCallback&&(this.setValueCallback(e.setValueDeviceId,e.channelValues),this.activeSetValueMappings.set(e.id,e)))}unregister(e){e.mode==="trigger"&&(e.actionType==="animation"?(this.notPressedClasses.delete(e.cssClassName),this.alwaysClasses.delete(e.cssClassName),this.container&&this.container.classList.remove(e.cssClassName)):e.actionType==="setValue"&&this.activeSetValueMappings.delete(e.id))}trigger(e){if(e.mode==="trigger"){if(e.actionType==="animation"){if(!this.container)return;const t=e.cssClassName;e.triggerType==="pressed"?(this.container.classList.add(t),this.activeClasses.add(t)):e.triggerType==="not-pressed"&&this.container.classList.remove(t)}else if(e.actionType==="setValue"){if(!this.setValueCallback)return;e.triggerType==="pressed"?(this.setValueCallback(e.setValueDeviceId,e.channelValues),this.activeSetValueMappings.set(e.id,e)):e.triggerType==="not-pressed"&&this.activeSetValueMappings.delete(e.id)}}}release(e){if(e.mode==="trigger"){if(e.actionType==="animation"){if(!this.container)return;const t=e.cssClassName;e.triggerType==="pressed"?(this.container.classList.remove(t),this.activeClasses.delete(t)):e.triggerType==="not-pressed"&&this.container.classList.add(t)}else if(e.actionType==="setValue"){if(!this.setValueCallback)return;e.triggerType==="pressed"?this.activeSetValueMappings.delete(e.id):e.triggerType==="not-pressed"&&(this.setValueCallback(e.setValueDeviceId,e.channelValues),this.activeSetValueMappings.set(e.id,e))}}}addRawClass(e){this.container&&this.container.classList.add(e)}removeRawClass(e){this.container&&this.container.classList.remove(e)}clearAll(){if(this.container){for(const e of this.activeClasses)this.container.classList.remove(e);this.activeClasses.clear()}}}class ed{constructor(e,t){this.animationLibrary=e,this.mappingLibrary=t}generate(e=[]){const t=[];if(t.push("/* DMX Controller - Generated CSS */"),t.push("/* This stylesheet is auto-generated from your animations and input mappings */"),t.push("/* You can edit this CSS and the changes will be reflected in the interface */"),t.push(`/* Note: @property definitions are in a separate, non-editable include */
`),e.length>0){t.push("/* === Default Device Values === */"),t.push("/* These selectors set the default state for each device */");for(const o of e){const c=this._generateDeviceDefaults(o);c&&t.push(c)}t.push("")}const n=this.animationLibrary.toCSS();n&&(t.push("/* === Animations === */"),t.push(n),t.push(""));const i=this.mappingLibrary.toCSS(e);i&&(t.push("/* === Triggers === */"),t.push(i),t.push(""));const a=this.mappingLibrary.getDirectMappings();if(a.length>0){t.push("/* === Custom Properties (Direct Control) === */"),t.push("/* These properties are updated live via JavaScript */"),t.push(":root {");for(const o of a){const c=o.getPropertyName(),l=o.mapValue(0);t.push(`  ${c}: ${l}; /* ${o.name} */`)}t.push(`}
`)}return t.push("/* === Custom Styles === */"),t.push("/* Add your custom CSS below to override device defaults and apply animations */"),t.push(""),t.join(`
`)}_generateDeviceDefaults(e){if(!Me[e.type]||e.isLinked&&e.isLinked())return null;const n=[],i=e.defaultValues||[];switch(e.type){case"RGB":const[a,o,c]=i;n.push(`  color: rgb(${a||0}, ${o||0}, ${c||0});`);break;case"RGBA":const[l,u,f,d]=i;n.push(`  color: rgb(${l||0}, ${u||0}, ${f||0});`);const _=Math.round((d||0)/255*100);n.push(`  --amber: ${_}%;`);break;case"RGBW":const[m,h,y,v]=i;n.push(`  color: rgb(${m||0}, ${h||0}, ${y||0});`),n.push(`  /* White channel: ${v||0} */`);break;case"DIMMER":const D=i[0]||0;n.push(`  opacity: ${(D/255).toFixed(2)};`);break;case"SMOKE":const M=i[0]||0,L=Math.round(M/255*100);n.push(`  --smoke: ${L}%;`);break;case"MOVING_HEAD":const[F,E,k,B,q,ie,oe]=i,te=F!==void 0?Math.round(F/255*100-50):0,ae=E!==void 0?Math.round(E/255*100):0;n.push(`  --pan: ${te}%;`),n.push(`  --tilt: ${ae}%;`),n.push(`  opacity: ${k!==void 0?(k/255).toFixed(2):"1"};`),n.push(`  color: rgb(${B||0}, ${q||0}, ${ie||0});`),oe!==void 0&&n.push(`  /* White channel: ${oe} */`);break;case"FLAMETHROWER":const[ge,me]=i,ue=ge>=125?"probably":"none",xe=Math.round(me/255*100);n.push(`  --safety: ${ue};`),n.push(`  --fuel: ${xe}%;`);break;default:return null}return n.length===0?null:`#${e.cssId} {
${n.join(`
`)}
}`}}class td{constructor(){this.deviceElements=new Map,this.container=null,this.previousValues=new Map}initialize(e){this.container=e}updateDevices(e){if(this.container){for(const[t,n]of this.deviceElements)e.find(i=>i.id===t)||(n.remove(),this.deviceElements.delete(t));for(const t of e){let n=this.deviceElements.get(t.id);const i=t.cssId;n?n.id!==i&&(n.id=i):(n=document.createElement("div"),n.id=i,n.className="dmx-device",n.dataset.deviceType=t.type,this.container.appendChild(n),this.deviceElements.set(t.id,n)),n.dataset.deviceName=t.name,n.dataset.deviceType=t.type}}}sampleDevice(e){const t=this.deviceElements.get(e.id);if(!t)return console.warn(`[CSSSampler] No element found for device ${e.id}`),null;t.offsetHeight;const n=window.getComputedStyle(t),i={};switch(e.type){case"RGB":Object.assign(i,this._sampleRGB(n));break;case"RGBA":Object.assign(i,this._sampleRGBA(n));break;case"RGBW":Object.assign(i,this._sampleRGBW(n));break;case"DIMMER":Object.assign(i,this._sampleDimmer(n));break;case"SMOKE":Object.assign(i,this._sampleSmoke(n));break;case"MOVING_HEAD":Object.assign(i,this._sampleMovingHead(n));break;case"FLAMETHROWER":Object.assign(i,this._sampleFlamethrower(n));break}return this.previousValues.set(e.id,{...i}),i}sampleAll(e){const t=new Map;for(const n of e){const i=this.sampleDevice(n);i&&t.set(n.id,i)}return t}_sampleRGB(e){const t=this._parseComputedColor(e.color);return{Red:t.r,Green:t.g,Blue:t.b}}_sampleRGBA(e){const t=this._parseComputedColor(e.color),i=(e.getPropertyValue("--amber")||"0%").match(/(\d+(?:\.\d+)?)/),a=i?parseFloat(i[1]):0,o=Math.round(Math.max(0,Math.min(100,a))*255/100);return{Red:t.r,Green:t.g,Blue:t.b,Amber:o}}_sampleRGBW(e){const t=this._parseComputedColor(e.color),n=Math.min(t.r,t.g,t.b);return{Red:t.r,Green:t.g,Blue:t.b,White:n}}_sampleDimmer(e){const t=parseFloat(e.opacity)||1;return{Intensity:Math.round(t*255)}}_sampleSmoke(e){const n=(e.getPropertyValue("--smoke")||"0%").match(/(\d+(?:\.\d+)?)/),i=n?parseFloat(n[1]):0;return{Output:Math.round(Math.max(0,Math.min(100,i))*255/100)}}_sampleMovingHead(e){const t=this._parseComputedColor(e.color),n=parseFloat(e.opacity)||1,i=e.getPropertyValue("--pan")||"0%",a=e.getPropertyValue("--tilt")||"0%",o=i.match(/(-?\d+(?:\.\d+)?)/),c=o?parseFloat(o[1]):0,l=Math.round((Math.max(-50,Math.min(50,c))+50)/100*255),u=a.match(/(\d+(?:\.\d+)?)/),f=u?parseFloat(u[1]):0,d=Math.round(Math.max(0,Math.min(100,f))*255/100);return{Pan:l,Tilt:d,Dimmer:Math.round(n*255),Red:t.r,Green:t.g,Blue:t.b,White:Math.min(t.r,t.g,t.b)}}_sampleFlamethrower(e){const t=e.getPropertyValue("--safety")||"none",n=e.getPropertyValue("--fuel")||"0%",i=t.trim()==="probably"?125:0,a=n.match(/(\d+(?:\.\d+)?)/),o=a?parseFloat(a[1]):0,c=Math.round(Math.max(0,Math.min(100,o))*255/100);return{Safety:i,Fuel:c}}_parseComputedColor(e){const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return t?{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3]),a:t[4]?parseFloat(t[4]):1}:{r:0,g:0,b:0,a:1}}_parseTranslate(e){if(!e||e==="none")return{x:127,y:127};const t=e.match(/translate\(([^,)]+)(?:,?\s+([^)]+))?\)/);if(t){const n=this._parsePercentage(t[1]),i=t[2]?this._parsePercentage(t[2]):n;return{x:Math.round(n*255/100),y:Math.round(i*255/100)}}return{x:127,y:127}}_parsePercentage(e){const t=parseFloat(e);return e.includes("%")?Math.max(0,Math.min(100,t)):Math.max(0,Math.min(100,t/255*100))}getElement(e){return this.deviceElements.get(e)}clear(){for(const e of this.deviceElements.values())e.remove();this.deviceElements.clear()}}class bl{constructor(){this.properties=new Map,this.styleElement=null}initialize(){this.styleElement=document.createElement("style"),this.styleElement.id="dmx-custom-properties",document.head.appendChild(this.styleElement),this._updateStyle()}setProperty(e,t){e.startsWith("--")||(e=`--${e}`),this.properties.set(e,t),this._updateStyle()}getProperty(e){return e.startsWith("--")||(e=`--${e}`),this.properties.get(e)}_updateStyle(){if(!this.styleElement)return;const e=Array.from(this.properties.entries()).map(([t,n])=>`  ${t}: ${n};`).join(`
`);this.styleElement.textContent=`:root {
${e}
}`}getAll(){return Array.from(this.properties.entries()).map(([e,t])=>({name:e,value:t}))}clear(){this.properties.clear(),this._updateStyle()}destroy(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.properties.clear()}}function rd(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var us={},Xa={},ds=function(r,e){return ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},ds(r,e)};function Sl(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ds(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ra=function(){return ra=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ra.apply(this,arguments)};function Cl(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Dl(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function xl(r,e){return function(t,n){e(t,n,r)}}function El(r,e,t,n,i,a){function o(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var c=n.kind,l=c==="getter"?"get":c==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,_=!1,m=t.length-1;m>=0;m--){var h={};for(var y in n)h[y]=y==="access"?{}:n[y];for(var y in n.access)h.access[y]=n.access[y];h.addInitializer=function(D){if(_)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(D||null))};var v=(0,t[m])(c==="accessor"?{get:f.get,set:f.set}:f[l],h);if(c==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=o(v.get))&&(f.get=d),(d=o(v.set))&&(f.set=d),(d=o(v.init))&&i.unshift(d)}else(d=o(v))&&(c==="field"?i.unshift(d):f[l]=d)}u&&Object.defineProperty(u,n.name,f),_=!0}function Il(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function kl(r){return typeof r=="symbol"?r:"".concat(r)}function Pl(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Ml(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Ll(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(f){try{u(n.next(f))}catch(d){o(d)}}function l(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?a(f.value):i(f.value).then(c,l)}u((n=n.apply(r,e||[])).next())})}function Al(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(f){return l([u,f])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var xa=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function Nl(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xa(e,r,t)}function na(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xs(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function Tl(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(xs(arguments[e]));return r}function Rl(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)n[i]=a[o];return n}function Ol(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function jn(r){return this instanceof jn?(this.v=r,this):new jn(r)}function Fl(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(h){return Promise.resolve(h).then(m,d)}}function c(m,h){n[m]&&(i[m]=function(y){return new Promise(function(v,D){a.push([m,y,v,D])>1||l(m,y)})},h&&(i[m]=h(i[m])))}function l(m,h){try{u(n[m](h))}catch(y){_(a[0][3],y)}}function u(m){m.value instanceof jn?Promise.resolve(m.value.v).then(f,d):_(a[0][2],m)}function f(m){l("next",m)}function d(m){l("throw",m)}function _(m,h){m(h),a.shift(),a.length&&l(a[0][0],a[0][1])}}function Vl(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=r[i]?function(o){return(t=!t)?{value:jn(r[i](o)),done:!1}:a?a(o):o}:a}}function Bl(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof na=="function"?na(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=r[a]&&function(o){return new Promise(function(c,l){o=r[a](o),i(c,l,o.done,o.value)})}}function i(a,o,c,l){Promise.resolve(l).then(function(u){a({value:u,done:c})},o)}}function jl(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var nd=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e},fs=function(r){return fs=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},fs(r)};function $l(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=fs(r),n=0;n<t.length;n++)t[n]!=="default"&&xa(e,r,t[n]);return nd(e,r),e}function Gl(r){return r&&r.__esModule?r:{default:r}}function Kl(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Ul(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function Hl(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function zl(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var id=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function ql(r){function e(a){r.error=r.hasError?new id(a,r.error,"An error was suppressed during disposal."):a,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function Wl(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,a,o){return n?e?".jsx":".js":i&&(!a||!o)?t:i+a+"."+o.toLowerCase()+"js"}):r}const ad={__extends:Sl,__assign:ra,__rest:Cl,__decorate:Dl,__param:xl,__esDecorate:El,__runInitializers:Il,__propKey:kl,__setFunctionName:Pl,__metadata:Ml,__awaiter:Ll,__generator:Al,__createBinding:xa,__exportStar:Nl,__values:na,__read:xs,__spread:Tl,__spreadArrays:Rl,__spreadArray:Ol,__await:jn,__asyncGenerator:Fl,__asyncDelegator:Vl,__asyncValues:Bl,__makeTemplateObject:jl,__importStar:$l,__importDefault:Gl,__classPrivateFieldGet:Kl,__classPrivateFieldSet:Ul,__classPrivateFieldIn:Hl,__addDisposableResource:zl,__disposeResources:ql,__rewriteRelativeImportExtension:Wl},sd=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:zl,get __assign(){return ra},__asyncDelegator:Vl,__asyncGenerator:Fl,__asyncValues:Bl,__await:jn,__awaiter:Ll,__classPrivateFieldGet:Kl,__classPrivateFieldIn:Hl,__classPrivateFieldSet:Ul,__createBinding:xa,__decorate:Dl,__disposeResources:ql,__esDecorate:El,__exportStar:Nl,__extends:Sl,__generator:Al,__importDefault:Gl,__importStar:$l,__makeTemplateObject:jl,__metadata:Ml,__param:xl,__propKey:kl,__read:xs,__rest:Cl,__rewriteRelativeImportExtension:Wl,__runInitializers:Il,__setFunctionName:Pl,__spread:Tl,__spreadArray:Ol,__spreadArrays:Rl,__values:na,default:ad},Symbol.toStringTag,{value:"Module"})),od=rd(sd);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.MODEL_NAMES=ft.DeviceModelId=void 0;var pt;(function(r){r.ORIGINAL="original",r.ORIGINALV2="originalv2",r.ORIGINALMK2="original-mk2",r.ORIGINALMK2SCISSOR="original-mk2-scissor",r.MINI="mini",r.XL="xl",r.PEDAL="pedal",r.PLUS="plus",r.NEO="neo",r.STUDIO="studio",r.MODULE6="6-module",r.MODULE15="15-module",r.MODULE32="32-module",r.NETWORK_DOCK="network-dock"})(pt||(ft.DeviceModelId=pt={}));ft.MODEL_NAMES={[pt.ORIGINAL]:"Stream Deck",[pt.MINI]:"Stream Deck Mini",[pt.XL]:"Stream Deck XL",[pt.ORIGINALV2]:"Stream Deck",[pt.ORIGINALMK2]:"Stream Deck MK.2",[pt.ORIGINALMK2SCISSOR]:"Stream Deck MK.2 (Scissor)",[pt.PLUS]:"Stream Deck +",[pt.PEDAL]:"Stream Deck Pedal",[pt.NEO]:"Stream Deck Neo",[pt.STUDIO]:"Stream Deck Studio",[pt.MODULE6]:"Stream Deck 6 Module",[pt.MODULE15]:"Stream Deck 15 Module",[pt.MODULE32]:"Stream Deck 32 Module",[pt.NETWORK_DOCK]:"Stream Deck Network Dock"};var Ti={},Ri={},ei={},Yl={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function a(l,u,f,d,_){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new i(f,d||l,_),h=t?t+u:u;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],m]:l._events[h].push(m):(l._events[h]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u){var f=t?t+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var _=0,m=d.length,h=new Array(m);_<m;_++)h[_]=d[_].fn;return h},c.prototype.listenerCount=function(u){var f=t?t+u:u,d=this._events[f];return d?d.fn?1:d.length:0},c.prototype.emit=function(u,f,d,_,m,h){var y=t?t+u:u;if(!this._events[y])return!1;var v=this._events[y],D=arguments.length,M,L;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),D){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,d),!0;case 4:return v.fn.call(v.context,f,d,_),!0;case 5:return v.fn.call(v.context,f,d,_,m),!0;case 6:return v.fn.call(v.context,f,d,_,m,h),!0}for(L=1,M=new Array(D-1);L<D;L++)M[L-1]=arguments[L];v.fn.apply(v.context,M)}else{var F=v.length,E;for(L=0;L<F;L++)switch(v[L].once&&this.removeListener(u,v[L].fn,void 0,!0),D){case 1:v[L].fn.call(v[L].context);break;case 2:v[L].fn.call(v[L].context,f);break;case 3:v[L].fn.call(v[L].context,f,d);break;case 4:v[L].fn.call(v[L].context,f,d,_);break;default:if(!M)for(E=1,M=new Array(D-1);E<D;E++)M[E-1]=arguments[E];v[L].fn.apply(v[L].context,M)}}return!0},c.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},c.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},c.prototype.removeListener=function(u,f,d,_){var m=t?t+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var h=this._events[m];if(h.fn)h.fn===f&&(!_||h.once)&&(!d||h.context===d)&&o(this,m);else{for(var y=0,v=[],D=h.length;y<D;y++)(h[y].fn!==f||_&&!h[y].once||d&&h[y].context!==d)&&v.push(h[y]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=t?t+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(Yl);var Xl=Yl.exports,zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.wrapBufferToPreparedBuffer=ld;zn.unwrapPreparedBufferToBuffer=cd;function ld(r,e,t,n){let i=t;return n&&(typeof Buffer<"u"?i=t.map(a=>Buffer.from(a).toString("base64")):i=t.map(a=>btoa(String.fromCharCode(...a)))),{if_you_change_this_you_will_break_everything:"This is a encoded form of the buffer, exactly as the Stream Deck expects it. Do not touch this object, or you can crash your stream deck",modelId:r,type:e,do_not_touch:i}}function cd(r,e){const t=e;if(t.modelId!==r)throw new Error("Prepared buffer is for a different model!");return t.do_not_touch.map(n=>{if(typeof n=="string")return typeof Buffer<"u"?Buffer.from(n,"base64"):new Uint8Array(atob(n).split("").map(i=>i.charCodeAt(0)));if(n instanceof Uint8Array)return n;throw new Error("Prepared buffer is not a string or Uint8Array!")})}var Ys;function Ur(){var i,a,o,c,l;if(Ys)return ei;Ys=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.StreamDeckBase=void 0;const r=Xl,e=ia(),t=zn;class n extends r.EventEmitter{constructor(d,_,m){var h;super();Je(this,"device");Je(this,"deviceProperties");Y(this,i);Y(this,a);Y(this,o);Y(this,c);Y(this,l);this.device=d,this.deviceProperties=m.deviceProperties,U(this,i,m.properties),U(this,a,m.buttonsLcd),U(this,o,m.lcdSegmentDisplay),U(this,c,m.inputService),U(this,l,m.encoderLed),(h=m.events)==null||h.listen((y,...v)=>this.emit(y,...v)),this.device.on("input",y=>p(this,c).handleInput(y)),this.device.on("error",y=>{this.emit("error",y)})}get CONTROLS(){return this.deviceProperties.CONTROLS}get MODEL(){return this.deviceProperties.MODEL}get PRODUCT_NAME(){return this.deviceProperties.PRODUCT_NAME}get HAS_NFC_READER(){return this.deviceProperties.HAS_NFC_READER}checkValidKeyIndex(d,_){const m=this.deviceProperties.CONTROLS.find(h=>h.type==="button"&&h.index===d);if(!m)throw new TypeError("Expected a valid keyIndex");if(_&&m.feedbackType!==_)throw new TypeError("Expected a keyIndex with expected feedbackType")}calculateFillPanelDimensions(d){return p(this,a).calculateFillPanelDimensions(d)}async close(){return this.device.close()}async getHidDeviceInfo(){return this.device.getDeviceInfo()}async setBrightness(d){return p(this,i).setBrightness(d)}async resetToLogo(){return p(this,i).resetToLogo()}async getFirmwareVersion(){return p(this,i).getFirmwareVersion()}async getAllFirmwareVersions(){return p(this,i).getAllFirmwareVersions()}async getSerialNumber(){return p(this,i).getSerialNumber()}async sendPreparedBuffer(d){const _=(0,t.unwrapPreparedBufferToBuffer)(this.deviceProperties.MODEL,d);await this.device.sendReports(_)}async fillKeyColor(d,_,m,h){this.checkValidKeyIndex(d,null),await p(this,a).fillKeyColor(d,_,m,h)}async fillKeyBuffer(d,_,m){this.checkValidKeyIndex(d,"lcd"),await p(this,a).fillKeyBuffer(d,_,m)}async prepareFillKeyBuffer(d,_,m,h){return p(this,a).prepareFillKeyBuffer(d,_,m,h)}async fillPanelBuffer(d,_){await p(this,a).fillPanelBuffer(d,_)}async prepareFillPanelBuffer(d,_,m){return p(this,a).prepareFillPanelBuffer(d,_,m)}async clearKey(d){this.checkValidKeyIndex(d,null),await p(this,a).clearKey(d)}async clearPanel(){const d=[];d.push(p(this,a).clearPanel()),p(this,o)&&d.push(p(this,o).clearAllLcdSegments()),await Promise.all(d)}async fillLcd(...d){if(!p(this,o))throw new Error("Not supported for this model");return p(this,o).fillLcd(...d)}async fillLcdRegion(...d){if(!p(this,o))throw new Error("Not supported for this model");return p(this,o).fillLcdRegion(...d)}async prepareFillLcdRegion(...d){if(!p(this,o))throw new Error("Not supported for this model");return p(this,o).prepareFillLcdRegion(...d)}async clearLcdSegment(...d){if(!p(this,o))throw new Error("Not supported for this model");return p(this,o).clearLcdSegment(...d)}async setEncoderColor(...d){if(!p(this,l))throw new Error("Not supported for this model");return p(this,l).setEncoderColor(...d)}async setEncoderRingSingleColor(...d){if(!p(this,l))throw new Error("Not supported for this model");return p(this,l).setEncoderRingSingleColor(...d)}async setEncoderRingColors(...d){if(!p(this,l))throw new Error("Not supported for this model");return p(this,l).setEncoderRingColors(...d)}async getChildDeviceInfo(){const d=await this.device.getChildDeviceInfo();if(!d||d.vendorId!==e.VENDOR_ID)return null;const _=e.DEVICE_MODELS.find(m=>m.productIds.includes(d.productId));return _?{...d,model:_.id}:null}}return i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,ei.StreamDeckBase=n,ei}var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.Gen1PropertiesService=void 0;var or;class ud{constructor(e){Y(this,or);U(this,or,e)}async setBrightness(e){if(e<0||e>100)throw new RangeError("Expected brightness percentage to be between 0 and 100");const t=new Uint8Array([5,85,170,209,1,e,0,0,0,0,0,0,0,0,0,0,0]);await p(this,or).sendFeatureReport(t)}async resetToLogo(){const e=new Uint8Array([11,99,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);await p(this,or).sendFeatureReport(e)}async getFirmwareVersion(){let e;try{e=await p(this,or).getFeatureReport(4,32)}catch{e=await p(this,or).getFeatureReport(4,17)}const t=e.indexOf(0,5);return new TextDecoder("ascii").decode(e.subarray(5,t===-1?void 0:t))}async getAllFirmwareVersions(){return{}}async getSerialNumber(){let e;try{e=await p(this,or).getFeatureReport(3,32)}catch{e=await p(this,or).getFeatureReport(3,17)}return new TextDecoder("ascii").decode(e.subarray(5,17))}}or=new WeakMap;Ea.Gen1PropertiesService=ud;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.DefaultButtonsLcdService=void 0;const Xs=zn;var hi,pi,gr,mt;class dd{constructor(e,t,n,i){Y(this,hi);Y(this,pi);Y(this,gr);Y(this,mt);U(this,hi,e),U(this,pi,t),U(this,gr,n),U(this,mt,i)}getLcdButtonControls(){return p(this,mt).CONTROLS.filter(e=>e.type==="button"&&e.feedbackType==="lcd")}calculateLcdGridSpan(e){if(e.length===0)return null;const t=e.map(i=>i.row),n=e.map(i=>i.column);return{minRow:Math.min(...t),maxRow:Math.max(...t),minCol:Math.min(...n),maxCol:Math.max(...n)}}calculateDimensionsFromGridSpan(e,t,n){if(n)throw new Error("Not implemented");{const i=e.maxRow-e.minRow+1;return{width:(e.maxCol-e.minCol+1)*t.width,height:i*t.height}}}calculateFillPanelDimensions(e){const t=this.getLcdButtonControls(),n=this.calculateLcdGridSpan(t);return!n||t.length===0?null:this.calculateDimensionsFromGridSpan(n,t[0].pixelSize,e==null?void 0:e.withPadding)}async clearPanel(){const e=[];if(p(this,mt).FULLSCREEN_PANELS>0)for(let t=0;t<p(this,mt).FULLSCREEN_PANELS;t++)e.push(p(this,gr).sendFeatureReport(new Uint8Array([3,5,t,0,0,0])));else for(const t of p(this,mt).CONTROLS)if(t.type==="button")switch(t.feedbackType){case"rgb":e.push(this.sendKeyRgb(t.hidIndex,0,0,0));break;case"lcd":if(p(this,mt).SUPPORTS_RGB_KEY_FILL)e.push(this.sendKeyRgb(t.hidIndex,0,0,0));else{const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*3);e.push(this.fillImageRangeControl(t,n,{format:"rgb",offset:0,stride:t.pixelSize.width*3}))}break}await Promise.all(e)}async clearKey(e){const t=p(this,mt).CONTROLS.find(n=>n.type==="button"&&n.index===e);if(!t||t.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(p(this,mt).SUPPORTS_RGB_KEY_FILL||t.feedbackType==="rgb")await this.sendKeyRgb(e,0,0,0);else{const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*3);await this.fillImageRangeControl(t,n,{format:"rgb",offset:0,stride:t.pixelSize.width*3})}}async fillKeyColor(e,t,n,i){this.checkRGBValue(t),this.checkRGBValue(n),this.checkRGBValue(i);const a=p(this,mt).CONTROLS.find(o=>o.type==="button"&&o.index===e);if(!a||a.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(p(this,mt).SUPPORTS_RGB_KEY_FILL||a.feedbackType==="rgb")await this.sendKeyRgb(e,t,n,i);else{const o=a.pixelSize.width*a.pixelSize.height,c=new Uint8Array(o*4),l=new DataView(c.buffer,c.byteOffset,c.byteLength);l.setUint8(0,t),l.setUint8(1,n),l.setUint8(2,i),l.setUint8(3,255);const u=l.getUint32(0);for(let f=1;f<o;f++)l.setUint32(f*4,u);await this.fillImageRangeControl(a,c,{format:"rgba",offset:0,stride:a.pixelSize.width*4})}}async fillKeyBuffer(e,t,n){const i=await this.prepareFillKeyBufferInner(e,t,n);await p(this,gr).sendReports(i)}async prepareFillKeyBufferInner(e,t,n){const i=(n==null?void 0:n.format)??"rgb";this.checkSourceFormat(i);const a=p(this,mt).CONTROLS.find(c=>c.type==="button"&&c.index===e);if(!a||a.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(a.feedbackType!=="lcd")throw new TypeError(`keyIndex ${a.index} does not support lcd feedback`);const o=a.pixelSize.width*a.pixelSize.height*i.length;if(t.length!==o)throw new RangeError(`Expected image buffer of length ${o}, got length ${t.length}`);return this.prepareFillImageRangeControl(a,t,{format:i,offset:0,stride:a.pixelSize.width*i.length})}async prepareFillKeyBuffer(e,t,n,i){const a=await this.prepareFillKeyBufferInner(e,t,n);return(0,Xs.wrapBufferToPreparedBuffer)(p(this,mt).MODEL,"fill-key",a,i??!1)}async fillPanelBuffer(e,t){const n=await this.prepareFillPanelBufferInner(e,t);await p(this,gr).sendReports(n)}async prepareFillPanelBufferInner(e,t){const n=(t==null?void 0:t.format)??"rgb";this.checkSourceFormat(n);const i=this.getLcdButtonControls(),a=this.calculateLcdGridSpan(i);if(!a||i.length===0)throw new Error("Panel does not support being filled");const o=this.calculateDimensionsFromGridSpan(a,i[0].pixelSize,t==null?void 0:t.withPadding),c=n.length*o.width*o.height;if(e.length!==c)throw new RangeError(`Expected image buffer of length ${c}, got length ${e.length}`);const l=o.width*n.length,u=[];for(const d of i){const _=d.row-a.minRow,m=d.column-a.minCol,h=d.pixelSize.width*n.length,y=l*_*d.pixelSize.height,v=m*h;u.push(this.prepareFillImageRangeControl(d,e,{format:n,offset:y+v,stride:l}))}return(await Promise.all(u)).flat()}async prepareFillPanelBuffer(e,t,n){const i=await this.prepareFillPanelBufferInner(e,t);return(0,Xs.wrapBufferToPreparedBuffer)(p(this,mt).MODEL,"fill-panel",i,n??!1)}async sendKeyRgb(e,t,n,i){await p(this,gr).sendFeatureReport(new Uint8Array([3,6,e,t,n,i]))}async fillImageRangeControl(e,t,n){const i=await this.prepareFillImageRangeControl(e,t,n);await p(this,gr).sendReports(i)}async prepareFillImageRangeControl(e,t,n){if(e.feedbackType!=="lcd")throw new TypeError(`keyIndex ${e.index} does not support lcd feedback`);const i=await p(this,pi).convertPixelBuffer(t,n,e.pixelSize);return p(this,hi).generateFillImageWrites({keyIndex:e.hidIndex},i)}checkRGBValue(e){if(e<0||e>255)throw new TypeError("Expected a valid color RGB value 0 - 255")}checkSourceFormat(e){switch(e){case"rgb":case"rgba":case"bgr":case"bgra":break;default:{const t=e;throw new TypeError(`Expected a known color format not "${t}"`)}}}}hi=new WeakMap,pi=new WeakMap,gr=new WeakMap,mt=new WeakMap;Ii.DefaultButtonsLcdService=dd;var Ia={},Lr={},Js;function Hr(){if(Js)return Lr;Js=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.BMP_HEADER_LENGTH=void 0,Lr.transformImageBuffer=r,Lr.writeBMPHeader=e,Lr.uint8ArrayToDataView=t;function r(n,i,a,o,c,l){const u=t(n),f=new Uint8Array(o+c*l*a.colorMode.length),d=t(f),_=i.format.substring(0,3)!==a.colorMode.substring(0,3);for(let m=0;m<l;m++){const h=o+c*a.colorMode.length*m;for(let y=0;y<c;y++){let v=a.xFlip?c-y-1:y,D=a.yFlip?l-m-1:m;if(a.rotate){const B=v;v=D,D=B}const M=D*i.stride+i.offset+v*i.format.length,L=u.getUint8(M),F=u.getUint8(M+1),E=u.getUint8(M+2),k=h+y*a.colorMode.length;_?(d.setUint8(k,E),d.setUint8(k+1,F),d.setUint8(k+2,L)):(d.setUint8(k,L),d.setUint8(k+1,F),d.setUint8(k+2,E)),a.colorMode.length===4&&d.setUint8(k+3,255)}}return f}Lr.BMP_HEADER_LENGTH=54;function e(n,i,a,o,c){const l=t(n);l.setUint8(0,66),l.setUint8(1,77),l.setUint32(2,o+54,!0),l.setInt16(6,0,!0),l.setInt16(8,0,!0),l.setUint32(10,54,!0),l.setUint32(14,40,!0),l.setInt32(18,i,!0),l.setInt32(22,a,!0),l.setInt16(26,1,!0),l.setInt16(28,24,!0),l.setInt32(30,0,!0),l.setInt32(34,o,!0),l.setInt32(38,c,!0),l.setInt32(42,c,!0),l.setInt32(46,0,!0),l.setInt32(50,0,!0)}function t(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}return Lr}Object.defineProperty(Ia,"__esModule",{value:!0});Ia.BitmapButtonLcdImagePacker=void 0;const Oi=Hr();var mi,_i;class fd{constructor(e,t){Y(this,mi);Y(this,_i);U(this,mi,e),U(this,_i,t)}async convertPixelBuffer(e,t,n){const i=(0,Oi.transformImageBuffer)(e,t,p(this,mi),Oi.BMP_HEADER_LENGTH,n.width,n.height);return(0,Oi.writeBMPHeader)(i,n.width,n.height,i.length-Oi.BMP_HEADER_LENGTH,p(this,_i)),i}}mi=new WeakMap,_i=new WeakMap;Ia.BitmapButtonLcdImagePacker=fd;var mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.CallbackHook=void 0;var kn;class vd{constructor(){Y(this,kn,null)}emit(e,...t){if(!p(this,kn))throw new Error("No listener setup");p(this,kn).call(this,e,...t)}listen(e){U(this,kn,e)}}kn=new WeakMap;mn.CallbackHook=vd;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.ButtonOnlyInputService=void 0;var Pn,Mn;class hd{constructor(e,t){Je(this,"deviceProperties");Y(this,Pn);Y(this,Mn);this.deviceProperties=e,U(this,Mn,t);const n=this.deviceProperties.CONTROLS.filter(i=>i.type==="button").map(i=>i.index);U(this,Pn,new Array(Math.max(-1,...n)+1).fill(!1))}handleInput(e){const t=this.deviceProperties.KEY_DATA_OFFSET||0;for(const n of this.deviceProperties.CONTROLS){if(n.type!=="button")continue;const i=!!e[t+n.hidIndex];i!==p(this,Pn)[n.index]&&(p(this,Pn)[n.index]=i,i?p(this,Mn).emit("down",n):p(this,Mn).emit("up",n))}}}Pn=new WeakMap,Mn=new WeakMap;qn.ButtonOnlyInputService=hd;var Zs;function Jl(){if(Zs)return Ri;Zs=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.StreamDeckGen1Factory=c;const r=Ur(),e=Ea,t=Ii,n=Ia,i=mn,a=qn;function o(l){return{...l,KEY_DATA_OFFSET:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1}}function c(l,u,f,d,_,m){const h=o(f),y=new i.CallbackHook;return new r.StreamDeckBase(l,u,{deviceProperties:h,events:y,properties:new e.Gen1PropertiesService(l),buttonsLcd:new t.DefaultButtonsLcdService(d,new n.BitmapButtonLcdImagePacker(_,m),l,h),lcdSegmentDisplay:null,inputService:new a.ButtonOnlyInputService(h,y),encoderLed:null})}return Ri}var dr={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.StreamdeckNeoLcdImageHeaderGenerator=It.StreamdeckPlusLcdImageHeaderGenerator=It.StreamdeckGen2ImageHeaderGenerator=It.StreamdeckGen1ImageHeaderGenerator=void 0;const ka=Hr();class pd{getFillImageCommandHeaderLength(){return 16}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,ka.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,1),o.setUint16(2,n,!0),o.setUint8(4,i?1:0),o.setUint8(5,t.keyIndex+1)}}It.StreamdeckGen1ImageHeaderGenerator=pd;class md{getFillImageCommandHeaderLength(){return 8}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,ka.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,7),o.setUint8(2,t.keyIndex),o.setUint8(3,i?1:0),o.setUint16(4,a,!0),o.setUint16(6,n++,!0)}}It.StreamdeckGen2ImageHeaderGenerator=md;class _d{getFillImageCommandHeaderLength(){return 16}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,ka.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,12),o.setUint16(2,t.x,!0),o.setUint16(4,t.y,!0),o.setUint16(6,t.width,!0),o.setUint16(8,t.height,!0),o.setUint8(10,i?1:0),o.setUint16(11,n,!0),o.setUint16(13,a,!0)}}It.StreamdeckPlusLcdImageHeaderGenerator=_d;class gd{getFillImageCommandHeaderLength(){return 8}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,ka.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,11),o.setUint8(2,0),o.setUint8(3,i?1:0),o.setUint16(4,a,!0),o.setUint16(6,n,!0)}}It.StreamdeckNeoLcdImageHeaderGenerator=gd;Object.defineProperty(dr,"__esModule",{value:!0});dr.StreamdeckDefaultImageWriter=dr.StreamdeckOriginalImageWriter=void 0;const yd=It;class wd{constructor(){Je(this,"headerGenerator",new yd.StreamdeckGen1ImageHeaderGenerator)}generateFillImageWrites(e,t){const i=this.headerGenerator.getFillImageCommandHeaderLength(),a=t.length/2,o=new Uint8Array(8191);this.headerGenerator.writeFillImageCommandHeader(o,e,1,!1,a),o.set(t.subarray(0,a),i);const c=new Uint8Array(8191);return this.headerGenerator.writeFillImageCommandHeader(c,e,2,!0,a),c.set(t.subarray(a),i),[o,c]}}dr.StreamdeckOriginalImageWriter=wd;class bd{constructor(e){Je(this,"headerGenerator");this.headerGenerator=e}generateFillImageWrites(e,t){const i=this.headerGenerator.getFillImageCommandHeaderLength(),a=1024-i,o=[];let c=t.length;for(let l=0;c>0;l++){const u=new Uint8Array(1024),f=Math.min(c,a);this.headerGenerator.writeFillImageCommandHeader(u,e,l,c<=a,f);const d=t.length-c;c-=f,u.set(t.subarray(d,d+f),i),o.push(u)}return o}}dr.StreamdeckDefaultImageWriter=bd;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.generateButtonsGrid=Sd;Wt.freezeDefinitions=Dd;function Sd(r,e,t,n=!1,i=0){const a=[];for(let o=0;o<e;o++)for(let c=0;c<r;c++){const l=o*r+c,u=n?Cd(r,l):l;a.push({type:"button",row:o,column:c+i,index:l,hidIndex:u,feedbackType:"lcd",pixelSize:t})}return a}function Cd(r,e){const t=(r-1)/2,n=(e%r-t)*-t;return e+n}function Dd(r){return Object.freeze(r.map(e=>Object.freeze(e)))}var Qs;function xd(){if(Qs)return Ti;Qs=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.StreamDeckOriginalFactory=a;const r=Jl(),e=ft,t=dr,n=Wt,i={MODEL:e.DeviceModelId.ORIGINAL,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.ORIGINAL],SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,n.freezeDefinitions)((0,n.generateButtonsGrid)(5,3,{width:72,height:72},!0)),KEY_SPACING_HORIZONTAL:25,KEY_SPACING_VERTICAL:25,FULLSCREEN_PANELS:0};function a(o,c){return(0,r.StreamDeckGen1Factory)(o,c,i,new t.StreamdeckOriginalImageWriter,{colorMode:"bgr",xFlip:!0},3780)}return Ti}var Fi={},eo;function Ed(){if(eo)return Fi;eo=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.StreamDeck6KeyFactory=o;const r=Jl(),e=ft,t=Wt,n=dr,i=It,a={SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,t.freezeDefinitions)((0,t.generateButtonsGrid)(3,2,{width:80,height:80})),KEY_SPACING_HORIZONTAL:28,KEY_SPACING_VERTICAL:28,FULLSCREEN_PANELS:0};function o(c,l,u,f){const d={...a,MODEL:c,PRODUCT_NAME:e.MODEL_NAMES[c]};return(0,r.StreamDeckGen1Factory)(l,u,d,new n.StreamdeckDefaultImageWriter(new i.StreamdeckGen1ImageHeaderGenerator),{colorMode:"bgr",rotate:!0,yFlip:!0},2835)}return Fi}var Vi={},_n={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.Gen2PropertiesService=void 0;class Id{constructor(e){Je(this,"device");this.device=e}async setBrightness(e){if(e<0||e>100)throw new RangeError("Expected brightness percentage to be between 0 and 100");const t=new Uint8Array([3,8,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);await this.device.sendFeatureReport(t)}async resetToLogo(){const e=new Uint8Array([3,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);await this.device.sendFeatureReport(e)}async getFirmwareVersion(){const e=await this.device.getFeatureReport(5,32),t=e[1]+2;return new TextDecoder("ascii").decode(e.subarray(6,t))}async getAllFirmwareVersions(){return{AP2:await this.getFirmwareVersion()}}async getSerialNumber(){const e=await this.device.getFeatureReport(6,32),t=e[1]+2;return new TextDecoder("ascii").decode(e.subarray(2,t))}}ki.Gen2PropertiesService=Id;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.JpegButtonLcdImagePacker=void 0;const kd=Hr();var gi,Ln;class Pd{constructor(e,t){Y(this,gi);Y(this,Ln);U(this,gi,e),U(this,Ln,t)}async convertPixelBuffer(e,t,n){const i=(0,kd.transformImageBuffer)(e,t,{colorMode:"rgba",xFlip:p(this,Ln),yFlip:p(this,Ln)},0,n.width,n.height);return p(this,gi).call(this,i,n.width,n.height)}}gi=new WeakMap,Ln=new WeakMap;Pa.JpegButtonLcdImagePacker=Pd;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.Gen2InputService=void 0;const Md=qn,Ld=Hr();var Qt,en,An,yi,Kr,Zl,Ql,ec;class Ad extends Md.ButtonOnlyInputService{constructor(t,n){super(t,n);Y(this,Kr);Y(this,Qt);Y(this,en);Y(this,An);Y(this,yi);U(this,Qt,n),U(this,en,t.CONTROLS.filter(a=>a.type==="encoder"));const i=Math.max(-1,...p(this,en).map(a=>a.index));U(this,An,new Array(i+1).fill(!1)),U(this,yi,t.CONTROLS.filter(a=>a.type==="lcd-segment"))}handleInput(t){switch(t[0]){case 0:super.handleInput(t);break;case 2:He(this,Kr,Zl).call(this,t);break;case 3:He(this,Kr,Ql).call(this,t);break;case 4:He(this,Kr,ec).call(this,t);break}}}Qt=new WeakMap,en=new WeakMap,An=new WeakMap,yi=new WeakMap,Kr=new WeakSet,Zl=function(t){const n=p(this,yi).find(o=>o.id===0);if(!n)return;const i=(0,Ld.uint8ArrayToDataView)(t),a={x:i.getUint16(5,!0),y:i.getUint16(7,!0)};switch(t[3]){case 1:p(this,Qt).emit("lcdShortPress",n,a);break;case 2:p(this,Qt).emit("lcdLongPress",n,a);break;case 3:{const o={x:i.getUint16(9,!0),y:i.getUint16(11,!0)};p(this,Qt).emit("lcdSwipe",n,a,o);break}}},Ql=function(t){switch(t[3]){case 0:for(const n of p(this,en)){const i=!!t[4+n.hidIndex];i!==p(this,An)[n.index]&&(p(this,An)[n.index]=i,i?p(this,Qt).emit("down",n):p(this,Qt).emit("up",n))}break;case 1:for(const n of p(this,en)){const a=new Int8Array(t.buffer,t.byteOffset,t.byteLength)[4+n.hidIndex];a!==0&&p(this,Qt).emit("rotate",n,a)}break}},ec=function(t){if(!this.deviceProperties.HAS_NFC_READER)return;const n=t[1]+t[2]*256,i=new TextDecoder("ascii").decode(t.subarray(3,3+n));p(this,Qt).emit("nfcRead",i)};Ma.Gen2InputService=Ad;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.EncoderLedService=void 0;var tn,Or;class Nd{constructor(e,t){Y(this,tn);Y(this,Or);U(this,tn,e),U(this,Or,t.filter(n=>n.type==="encoder"))}async clearAll(){const e=[];for(const t of p(this,Or))t.hasLed&&e.push(this.setEncoderColor(t.index,0,0,0)),t.ledRingSteps>0&&e.push(this.setEncoderRingSingleColor(t.index,0,0,0));await Promise.all(e)}async setEncoderColor(e,t,n,i){const a=p(this,Or).find(c=>c.index===e);if(!a)throw new Error(`Invalid encoder index ${e}`);if(!a.hasLed)throw new Error("Encoder does not have an LED");const o=new Uint8Array(1024);o[0]=2,o[1]=16,o[2]=e,o[3]=t,o[4]=n,o[5]=i,await p(this,tn).sendReports([o])}async setEncoderRingSingleColor(e,t,n,i){const a=p(this,Or).find(c=>c.index===e);if(!a)throw new Error(`Invalid encoder index ${e}`);if(a.ledRingSteps<=0)throw new Error("Encoder does not have an LED ring");const o=new Uint8Array(1024);o[0]=2,o[1]=15,o[2]=e;for(let c=0;c<a.ledRingSteps;c++){const l=3+c*3;o[l]=t,o[l+1]=n,o[l+2]=i}await p(this,tn).sendReports([o])}async setEncoderRingColors(e,t){const n=p(this,Or).find(o=>o.index===e);if(!n)throw new Error(`Invalid encoder index ${e}`);if(n.ledRingSteps<=0)throw new Error("Encoder does not have an LED ring");if(t.length!==n.ledRingSteps*3)throw new Error("Invalid colors length");let i=t instanceof Uint8Array?t:new Uint8Array(t);if(n.lcdRingOffset){const o=i;i=new Uint8Array(o.length),i.set(o.slice(n.lcdRingOffset*3),0),i.set(o.slice(0,n.lcdRingOffset*3),n.lcdRingOffset*3)}const a=new Uint8Array(1024);a[0]=2,a[1]=15,a[2]=e,a.set(i,3),await p(this,tn).sendReports([a])}}tn=new WeakMap,Or=new WeakMap;La.EncoderLedService=Nd;Object.defineProperty(_n,"__esModule",{value:!0});_n.createBaseGen2Properties=Kd;const Td=dr,Rd=It,Od=Ii,Fd=mn,Vd=ki,Bd=Pa,jd=Ma,$d=La;function Gd(r){return{...r,KEY_DATA_OFFSET:3}}function Kd(r,e,t,n,i){const a=Gd(t),o=new Fd.CallbackHook;return{deviceProperties:a,events:o,properties:n??new Vd.Gen2PropertiesService(r),buttonsLcd:new Od.DefaultButtonsLcdService(new Td.StreamdeckDefaultImageWriter(new Rd.StreamdeckGen2ImageHeaderGenerator),new Bd.JpegButtonLcdImagePacker(e.encodeJPEG,!i),r,a),lcdSegmentDisplay:null,inputService:new jd.Gen2InputService(a,o),encoderLed:new $d.EncoderLedService(r,t.CONTROLS)}}var to;function Ud(){if(to)return Vi;to=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.StreamDeck32KeyFactory=a;const r=Ur(),e=_n,t=ft,n=Wt,i={SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,n.freezeDefinitions)((0,n.generateButtonsGrid)(8,4,{width:96,height:96})),KEY_SPACING_HORIZONTAL:32,KEY_SPACING_VERTICAL:39,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1};function a(o,c,l,u){const f={...i,MODEL:o,PRODUCT_NAME:t.MODEL_NAMES[o]},d=(0,e.createBaseGen2Properties)(c,l,f,null);return new r.StreamDeckBase(c,l,d)}return Vi}var Bi={},ro;function Hd(){if(ro)return Bi;ro=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.StreamDeck15KeyFactory=a;const r=Ur(),e=_n,t=ft,n=Wt,i={SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,n.freezeDefinitions)((0,n.generateButtonsGrid)(5,3,{width:72,height:72})),KEY_SPACING_HORIZONTAL:25,KEY_SPACING_VERTICAL:25,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1};function a(o,c,l,u){const f={...i,MODEL:o,PRODUCT_NAME:t.MODEL_NAMES[o]},d=(0,e.createBaseGen2Properties)(c,l,f,null);return new r.StreamDeckBase(c,l,d)}return Bi}var ji={},Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.StreamDeckPlusLcdService=void 0;const zd=It,qd=dr,Wd=Hr(),Yd=zn,Xd=ft;var wi,rn,yr,da;class Jd{constructor(e,t,n){Y(this,wi);Y(this,rn);Y(this,yr);Y(this,da,new qd.StreamdeckDefaultImageWriter(new zd.StreamdeckPlusLcdImageHeaderGenerator));U(this,wi,e),U(this,rn,t),U(this,yr,n)}async fillLcd(e,t,n){const i=p(this,yr).find(o=>o.id===e);if(!i)throw new Error(`Invalid lcd segment index ${e}`);const a=await this.prepareFillControlRegion(i,0,0,t,{format:n.format,width:i.pixelSize.width,height:i.pixelSize.height});await p(this,rn).sendReports(a)}async fillLcdRegion(e,t,n,i,a){const o=p(this,yr).find(l=>l.id===e);if(!o)throw new Error(`Invalid lcd segment index ${e}`);const c=await this.prepareFillControlRegion(o,t,n,i,a);await p(this,rn).sendReports(c)}async prepareFillLcdRegion(e,t,n,i,a,o){const c=p(this,yr).find(u=>u.id===e);if(!c)throw new Error(`Invalid lcd segment index ${e}`);const l=await this.prepareFillControlRegion(c,t,n,i,a);return(0,Yd.wrapBufferToPreparedBuffer)(Xd.DeviceModelId.PLUS,"fill-lcd-region",l,o??!1)}async clearLcdSegment(e){const t=p(this,yr).find(a=>a.id===e);if(!t)throw new Error(`Invalid lcd segment index ${e}`);const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*4),i=await this.prepareFillControlRegion(t,0,0,n,{format:"rgba",width:t.pixelSize.width,height:t.pixelSize.height});await p(this,rn).sendReports(i)}async clearAllLcdSegments(){const e=[];for(const t of p(this,yr))e.push(this.clearLcdSegment(t.id));await Promise.all(e)}async prepareFillControlRegion(e,t,n,i,a){const o=e.pixelSize;if(t<0||t+a.width>o.width)throw new TypeError("Image will not fit within the lcd segment");if(n<0||n+a.height>o.height)throw new TypeError("Image will not fit within the lcd segment");const c=a.width*a.height*a.format.length;if(i.length!==c)throw new RangeError(`Expected image buffer of length ${c}, got length ${i.length}`);const l=await this.convertFillLcdBuffer(i,a);return p(this,da).generateFillImageWrites({...a,x:t,y:n},l)}async convertFillLcdBuffer(e,t){const n={format:t.format,offset:0,stride:t.width*t.format.length},i=(0,Wd.transformImageBuffer)(e,n,{colorMode:"rgba"},0,t.width,t.height);return p(this,wi).call(this,i,t.width,t.height)}}wi=new WeakMap,rn=new WeakMap,yr=new WeakMap,da=new WeakMap;Aa.StreamDeckPlusLcdService=Jd;var no;function Zd(){if(no)return ji;no=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.StreamDeckPlusFactory=l;const r=Ur(),e=_n,t=ft,n=Wt,i=Aa,a=(0,n.generateButtonsGrid)(4,2,{width:120,height:120});a.push({type:"lcd-segment",row:2,column:0,columnSpan:4,rowSpan:1,id:0,pixelSize:Object.freeze({width:800,height:100}),drawRegions:!0},{type:"encoder",row:3,column:0,index:0,hidIndex:0,hasLed:!1,ledRingSteps:0},{type:"encoder",row:3,column:1,index:1,hidIndex:1,hasLed:!1,ledRingSteps:0},{type:"encoder",row:3,column:2,index:2,hidIndex:2,hasLed:!1,ledRingSteps:0},{type:"encoder",row:3,column:3,index:3,hidIndex:3,hasLed:!1,ledRingSteps:0});const o={MODEL:t.DeviceModelId.PLUS,PRODUCT_NAME:t.MODEL_NAMES[t.DeviceModelId.PLUS],SUPPORTS_RGB_KEY_FILL:!0,CONTROLS:(0,n.freezeDefinitions)(a),KEY_SPACING_HORIZONTAL:99,KEY_SPACING_VERTICAL:40,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1},c=o.CONTROLS.filter(u=>u.type==="lcd-segment");function l(u,f){const d=(0,e.createBaseGen2Properties)(u,f,o,null,!0);return d.lcdSegmentDisplay=new i.StreamDeckPlusLcdService(f.encodeJPEG,u,c),new r.StreamDeckBase(u,f,d)}return ji}var $i={},Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.PedalPropertiesService=void 0;var Nn;class Qd{constructor(e){Y(this,Nn);U(this,Nn,e)}async setBrightness(e){}async resetToLogo(){}async getFirmwareVersion(){const e=await p(this,Nn).getFeatureReport(5,32),t=e.indexOf(0,6);return new TextDecoder("ascii").decode(e.subarray(6,t===-1?void 0:t))}async getAllFirmwareVersions(){return{AP2:await this.getFirmwareVersion()}}async getSerialNumber(){const e=await p(this,Nn).getFeatureReport(6,32);return new TextDecoder("ascii").decode(e.subarray(2,14))}}Nn=new WeakMap;Na.PedalPropertiesService=Qd;var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.FakeLcdService=void 0;class ef{calculateFillPanelDimensions(e){return null}async clearKey(e){}async clearPanel(){}async fillKeyColor(e,t,n,i){}async fillKeyBuffer(e,t,n){}async prepareFillKeyBuffer(e,t,n,i){throw new Error("Not supported")}async fillPanelBuffer(e,t){}async prepareFillPanelBuffer(e,t,n){throw new Error("Not supported")}}Pi.FakeLcdService=ef;var io;function tf(){if(io)return $i;io=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.StreamDeckPedalFactory=u;const r=Ur(),e=ft,t=Wt,n=Na,i=Pi,a=mn,o=qn,c=[{type:"button",row:0,column:0,index:0,hidIndex:0,feedbackType:"none"},{type:"button",row:0,column:1,index:1,hidIndex:1,feedbackType:"none"},{type:"button",row:0,column:2,index:2,hidIndex:2,feedbackType:"none"}],l={MODEL:e.DeviceModelId.PEDAL,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.PEDAL],KEY_DATA_OFFSET:3,SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,t.freezeDefinitions)(c),KEY_SPACING_HORIZONTAL:0,KEY_SPACING_VERTICAL:0,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1};function u(f,d){const _=new a.CallbackHook;return new r.StreamDeckBase(f,d,{deviceProperties:l,events:_,properties:new n.PedalPropertiesService(f),buttonsLcd:new i.FakeLcdService,lcdSegmentDisplay:null,inputService:new o.ButtonOnlyInputService(l,_),encoderLed:null})}return $i}var Gi={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.StreamDeckNeoLcdService=void 0;const rf=It,nf=dr,af=Hr();var bi,Si,nn,fa;class sf{constructor(e,t,n){Y(this,bi);Y(this,Si);Y(this,nn);Y(this,fa,new nf.StreamdeckDefaultImageWriter(new rf.StreamdeckNeoLcdImageHeaderGenerator));U(this,bi,e),U(this,Si,t),U(this,nn,n)}async fillLcdRegion(e,t,n,i,a){throw new Error("Not supported for this model")}async prepareFillLcdRegion(e,t,n,i,a,o){throw new Error("Not supported for this model")}async fillLcd(e,t,n){const i=p(this,nn).find(l=>l.id===e);if(!i)throw new Error(`Invalid lcd segment index ${e}`);const a=i.pixelSize.width*i.pixelSize.height*n.format.length;if(t.length!==a)throw new RangeError(`Expected image buffer of length ${a}, got length ${t.length}`);const o=await this.convertFillLcdBuffer(t,i.pixelSize,n),c=p(this,fa).generateFillImageWrites(null,o);await p(this,Si).sendReports(c)}async clearLcdSegment(e){const t=p(this,nn).find(i=>i.id===e);if(!t)throw new Error(`Invalid lcd segment index ${e}`);const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*4);await this.fillLcd(e,n,{format:"rgba"})}async clearAllLcdSegments(){const e=[];for(const t of p(this,nn))e.push(this.clearLcdSegment(t.id));await Promise.all(e)}async convertFillLcdBuffer(e,t,n){const i={format:n.format,offset:0,stride:t.width*n.format.length},a=(0,af.transformImageBuffer)(e,i,{colorMode:"rgba",xFlip:!0,yFlip:!0},0,t.width,t.height);return p(this,bi).call(this,a,t.width,t.height)}}bi=new WeakMap,Si=new WeakMap,nn=new WeakMap,fa=new WeakMap;Ta.StreamDeckNeoLcdService=sf;var ao;function of(){if(ao)return Gi;ao=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.StreamDeckNeoFactory=l;const r=Ur(),e=ft,t=_n,n=Wt,i=Ta,a=(0,n.generateButtonsGrid)(4,2,{width:96,height:96});a.push({type:"button",row:2,column:0,index:8,hidIndex:8,feedbackType:"rgb"},{type:"lcd-segment",row:2,column:1,columnSpan:2,rowSpan:1,id:0,pixelSize:{width:248,height:58},drawRegions:!1},{type:"button",row:2,column:3,index:9,hidIndex:9,feedbackType:"rgb"});const o={MODEL:e.DeviceModelId.NEO,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.NEO],CONTROLS:(0,n.freezeDefinitions)(a),KEY_SPACING_HORIZONTAL:30,KEY_SPACING_VERTICAL:30,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1,SUPPORTS_RGB_KEY_FILL:!0},c=o.CONTROLS.filter(u=>u.type==="lcd-segment");function l(u,f){const d=(0,t.createBaseGen2Properties)(u,f,o,null);return d.lcdSegmentDisplay=new i.StreamDeckNeoLcdService(f.encodeJPEG,u,c),new r.StreamDeckBase(u,f,d)}return Gi}var Ja={},Ra={},Ki={},so;function Es(){if(so)return Ki;so=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.parseAllFirmwareVersionsHelper=e;const r=Hr();async function e(t){const n=new TextDecoder("ascii"),i={};if(t.ap2){const a=(0,r.uint8ArrayToDataView)(t.ap2);i.AP2=n.decode(t.ap2.subarray(6,14)),i.AP2_CHECKSUM=a.getUint32(2,!1).toString(16)}if(t.encoderLd&&(t.encoderLd[0]===24||t.encoderLd[1]===24)){const a=(0,r.uint8ArrayToDataView)(t.encoderLd);i.ENCODER_LD=n.decode(t.encoderLd.subarray(2,10)),i.ENCODER_LD_CHECKSUM=a.getUint32(10,!1).toString(16)}if(t.encoderAp2&&(t.encoderAp2[0]===24||t.encoderAp2[1]===24)){const a=(0,r.uint8ArrayToDataView)(t.encoderAp2);i.ENCODER_AP2=n.decode(t.encoderAp2.subarray(2,10)),i.ENCODER_AP2_CHECKSUM=a.getUint32(10,!1).toString(16)}return i}return Ki}Object.defineProperty(Ra,"__esModule",{value:!0});Ra.StudioPropertiesService=void 0;const lf=Es(),cf=ki;class uf extends cf.Gen2PropertiesService{async getAllFirmwareVersions(){const[e,t,n]=await Promise.all([this.device.getFeatureReport(5,32),this.device.getFeatureReport(17,32),this.device.getFeatureReport(19,32)]);return(0,lf.parseAllFirmwareVersionsHelper)({ap2:e,encoderAp2:t,encoderLd:n})}}Ra.StudioPropertiesService=uf;var oo;function df(){return oo||(oo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.studioProperties=void 0,r.StreamDeckStudioFactory=c;const e=Ur(),t=_n,n=ft,i=Wt,a=Ra,o=[{type:"encoder",row:0,column:0,index:0,hidIndex:0,hasLed:!0,ledRingSteps:24},...(0,i.generateButtonsGrid)(16,2,{width:144,height:112},!1,1),{type:"encoder",row:0,column:17,index:1,hidIndex:1,hasLed:!0,ledRingSteps:24,lcdRingOffset:12}];r.studioProperties={MODEL:n.DeviceModelId.STUDIO,PRODUCT_NAME:n.MODEL_NAMES[n.DeviceModelId.STUDIO],SUPPORTS_RGB_KEY_FILL:!0,CONTROLS:(0,i.freezeDefinitions)(o),KEY_SPACING_HORIZONTAL:0,KEY_SPACING_VERTICAL:0,FULLSCREEN_PANELS:2,HAS_NFC_READER:!0,SUPPORTS_CHILD_DEVICES:!0};function c(l,u,f){const d=(0,t.createBaseGen2Properties)(l,u,r.studioProperties,f??new a.StudioPropertiesService(l),!0);return new e.StreamDeckBase(l,u,d)}}(Ja)),Ja}var Ui={},Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.FakeInputService=void 0;class ff{handleInput(e){}}Oa.FakeInputService=ff;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.NetworkDockPropertiesService=void 0;const vf=Es();var an;class hf{constructor(e){Y(this,an);U(this,an,e)}async setBrightness(e){}async resetToLogo(){}async getFirmwareVersion(){const e=await p(this,an).getFeatureReport(131,-1);return new TextDecoder("ascii").decode(e.subarray(8,16))}async getAllFirmwareVersions(){const[e]=await Promise.all([p(this,an).getFeatureReport(131,-1)]);return(0,vf.parseAllFirmwareVersionsHelper)({ap2:e.slice(2),encoderAp2:null,encoderLd:null})}async getSerialNumber(){const e=await p(this,an).getFeatureReport(132,-1),t=e[3];return new TextDecoder("ascii").decode(e.subarray(4,4+t))}}an=new WeakMap;Fa.NetworkDockPropertiesService=hf;var lo;function pf(){if(lo)return Ui;lo=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.NetworkDockFactory=l;const r=Ur(),e=ft,t=Wt,n=mn,i=Pi,a=Oa,o=Fa,c={MODEL:e.DeviceModelId.NETWORK_DOCK,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.NETWORK_DOCK],KEY_DATA_OFFSET:0,SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,t.freezeDefinitions)([]),KEY_SPACING_HORIZONTAL:0,KEY_SPACING_VERTICAL:0,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!0};function l(u,f,d){const _=new n.CallbackHook;return new r.StreamDeckBase(u,f,{deviceProperties:c,events:_,properties:new o.NetworkDockPropertiesService(u),buttonsLcd:new i.FakeLcdService,lcdSegmentDisplay:null,inputService:new a.FakeInputService,encoderLed:null})}return Ui}var Za={},co;function mf(){return co||(co=1,Object.defineProperty(Za,"__esModule",{value:!0})),Za}var Qa={},uo;function _f(){return uo||(uo=1,Object.defineProperty(Qa,"__esModule",{value:!0})),Qa}var ti={},fo;function gf(){if(fo)return ti;fo=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.StreamDeckProxy=void 0;class r{constructor(t){Je(this,"device");this.device=t}get CONTROLS(){return this.device.CONTROLS}get MODEL(){return this.device.MODEL}get PRODUCT_NAME(){return this.device.PRODUCT_NAME}get HAS_NFC_READER(){return this.device.HAS_NFC_READER}calculateFillPanelDimensions(...t){return this.device.calculateFillPanelDimensions(...t)}async close(){return this.device.close()}async getHidDeviceInfo(...t){return this.device.getHidDeviceInfo(...t)}async sendPreparedBuffer(...t){return this.device.sendPreparedBuffer(...t)}async fillKeyColor(...t){return this.device.fillKeyColor(...t)}async fillKeyBuffer(...t){return this.device.fillKeyBuffer(...t)}async prepareFillKeyBuffer(...t){return this.device.prepareFillKeyBuffer(...t)}async fillPanelBuffer(...t){return this.device.fillPanelBuffer(...t)}async prepareFillPanelBuffer(...t){return this.device.prepareFillPanelBuffer(...t)}async clearKey(...t){return this.device.clearKey(...t)}async clearPanel(...t){return this.device.clearPanel(...t)}async setBrightness(...t){return this.device.setBrightness(...t)}async resetToLogo(...t){return this.device.resetToLogo(...t)}async getFirmwareVersion(){return this.device.getFirmwareVersion()}async getAllFirmwareVersions(){return this.device.getAllFirmwareVersions()}async getSerialNumber(){return this.device.getSerialNumber()}async fillLcd(...t){return this.device.fillLcd(...t)}async setEncoderColor(...t){return this.device.setEncoderColor(...t)}async setEncoderRingSingleColor(...t){return this.device.setEncoderRingSingleColor(...t)}async setEncoderRingColors(...t){return this.device.setEncoderRingColors(...t)}async fillLcdRegion(...t){return this.device.fillLcdRegion(...t)}async prepareFillLcdRegion(...t){return this.device.prepareFillLcdRegion(...t)}async clearLcdSegment(...t){return this.device.clearLcdSegment(...t)}async getChildDeviceInfo(...t){return this.device.getChildDeviceInfo(...t)}eventNames(){return this.device.eventNames()}listeners(t){return this.device.listeners(t)}listenerCount(t){return this.device.listenerCount(t)}emit(t,...n){return this.device.emit(t,...n)}on(t,n,i){return this.device.on(t,n,i),this}addListener(t,n,i){return this.device.addListener(t,n,i),this}once(t,n,i){return this.device.once(t,n,i),this}removeListener(t,n,i,a){return this.device.removeListener(t,n,i,a),this}off(t,n,i,a){return this.device.off(t,n,i,a),this}removeAllListeners(t){return this.device.removeAllListeners(t),this}}return ti.StreamDeckProxy=r,ti}var vo;function ia(){return vo||(vo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEVICE_MODELS=r.DEVICE_MODELS2=r.DeviceModelType=r.VENDOR_ID=r.parseAllFirmwareVersionsHelper=r.uint8ArrayToDataView=r.StreamDeckProxy=void 0;const e=od,t=ft,n=xd(),i=Ed(),a=Ud(),o=Hd(),c=Zd(),l=tf(),u=of(),f=df(),d=pf();e.__exportStar(mf(),r),e.__exportStar(ft,r),e.__exportStar(_f(),r);var _=gf();Object.defineProperty(r,"StreamDeckProxy",{enumerable:!0,get:function(){return _.StreamDeckProxy}});var m=Hr();Object.defineProperty(r,"uint8ArrayToDataView",{enumerable:!0,get:function(){return m.uint8ArrayToDataView}});var h=Es();Object.defineProperty(r,"parseAllFirmwareVersionsHelper",{enumerable:!0,get:function(){return h.parseAllFirmwareVersionsHelper}}),r.VENDOR_ID=4057;var y;(function(v){v.STREAMDECK="streamdeck",v.PEDAL="pedal",v.NETWORK_DOCK="network-dock"})(y||(r.DeviceModelType=y={})),r.DEVICE_MODELS2={[t.DeviceModelId.ORIGINAL]:{type:y.STREAMDECK,productIds:[96],factory:n.StreamDeckOriginalFactory,hasNativeTcp:!1},[t.DeviceModelId.MINI]:{type:y.STREAMDECK,productIds:[99,144],factory:(...v)=>(0,i.StreamDeck6KeyFactory)(t.DeviceModelId.MINI,...v),hasNativeTcp:!1},[t.DeviceModelId.XL]:{type:y.STREAMDECK,productIds:[108,143],factory:(...v)=>(0,a.StreamDeck32KeyFactory)(t.DeviceModelId.XL,...v),hasNativeTcp:!1},[t.DeviceModelId.ORIGINALV2]:{type:y.STREAMDECK,productIds:[109],factory:(...v)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.ORIGINALV2,...v),hasNativeTcp:!1},[t.DeviceModelId.ORIGINALMK2]:{type:y.STREAMDECK,productIds:[128],factory:(...v)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.ORIGINALMK2,...v),hasNativeTcp:!1},[t.DeviceModelId.ORIGINALMK2SCISSOR]:{type:y.STREAMDECK,productIds:[165],factory:(...v)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.ORIGINALMK2SCISSOR,...v),hasNativeTcp:!1},[t.DeviceModelId.PLUS]:{type:y.STREAMDECK,productIds:[132],factory:c.StreamDeckPlusFactory,hasNativeTcp:!1},[t.DeviceModelId.PEDAL]:{type:y.PEDAL,productIds:[134],factory:l.StreamDeckPedalFactory,hasNativeTcp:!1},[t.DeviceModelId.NEO]:{type:y.STREAMDECK,productIds:[154],factory:u.StreamDeckNeoFactory,hasNativeTcp:!1},[t.DeviceModelId.STUDIO]:{type:y.STREAMDECK,productIds:[170],factory:f.StreamDeckStudioFactory,hasNativeTcp:!0},[t.DeviceModelId.MODULE6]:{type:y.STREAMDECK,productIds:[184],factory:(...v)=>(0,i.StreamDeck6KeyFactory)(t.DeviceModelId.MODULE6,...v),hasNativeTcp:!1},[t.DeviceModelId.MODULE15]:{type:y.STREAMDECK,productIds:[185],factory:(...v)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.MODULE15,...v),hasNativeTcp:!1},[t.DeviceModelId.MODULE32]:{type:y.STREAMDECK,productIds:[186],factory:(...v)=>(0,a.StreamDeck32KeyFactory)(t.DeviceModelId.MODULE32,...v),hasNativeTcp:!1},[t.DeviceModelId.NETWORK_DOCK]:{type:y.NETWORK_DOCK,productIds:[65535],factory:d.NetworkDockFactory,hasNativeTcp:!0}},r.DEVICE_MODELS=Object.entries(r.DEVICE_MODELS2).map(([v,D])=>{const M=v;return{id:M,productName:t.MODEL_NAMES[M],...D}})}(Xa)),Xa}var Va={},Is={},tc={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function a(l,u,f,d,_){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new i(f,d||l,_),h=t?t+u:u;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],m]:l._events[h].push(m):(l._events[h]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u){var f=t?t+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var _=0,m=d.length,h=new Array(m);_<m;_++)h[_]=d[_].fn;return h},c.prototype.listenerCount=function(u){var f=t?t+u:u,d=this._events[f];return d?d.fn?1:d.length:0},c.prototype.emit=function(u,f,d,_,m,h){var y=t?t+u:u;if(!this._events[y])return!1;var v=this._events[y],D=arguments.length,M,L;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),D){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,d),!0;case 4:return v.fn.call(v.context,f,d,_),!0;case 5:return v.fn.call(v.context,f,d,_,m),!0;case 6:return v.fn.call(v.context,f,d,_,m,h),!0}for(L=1,M=new Array(D-1);L<D;L++)M[L-1]=arguments[L];v.fn.apply(v.context,M)}else{var F=v.length,E;for(L=0;L<F;L++)switch(v[L].once&&this.removeListener(u,v[L].fn,void 0,!0),D){case 1:v[L].fn.call(v[L].context);break;case 2:v[L].fn.call(v[L].context,f);break;case 3:v[L].fn.call(v[L].context,f,d);break;case 4:v[L].fn.call(v[L].context,f,d,_);break;default:if(!M)for(E=1,M=new Array(D-1);E<D;E++)M[E-1]=arguments[E];v[L].fn.apply(v[L].context,M)}}return!0},c.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},c.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},c.prototype.removeListener=function(u,f,d,_){var m=t?t+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var h=this._events[m];if(h.fn)h.fn===f&&(!_||h.once)&&(!d||h.context===d)&&o(this,m);else{for(var y=0,v=[],D=h.length;y<D;y++)(h[y].fn!==f||_&&!h[y].once||d&&h[y].context!==d)&&v.push(h[y]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=t?t+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(tc);var yf=tc.exports,Ba={exports:{}},wf=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})));const bf=wf;class rc extends Error{constructor(e){super(e),this.name="TimeoutError"}}const nc=(r,e,t)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(r);return}const a=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(l){i(l)}return}const o=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,c=t instanceof Error?t:new rc(o);typeof r.cancel=="function"&&r.cancel(),i(c)},e);bf(r.then(n,i),()=>{clearTimeout(a)})});Ba.exports=nc;Ba.exports.default=nc;Ba.exports.TimeoutError=rc;var Sf=Ba.exports,ks={},Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});function Cf(r,e,t){let n=0,i=r.length;for(;i>0;){const a=i/2|0;let o=n+a;t(r[o],e)<=0?(n=++o,i-=a+1):i=a}return n}Ps.default=Cf;Object.defineProperty(ks,"__esModule",{value:!0});const Df=Ps;class xf{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);const n={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}const i=Df.default(this._queue,n,(a,o)=>o.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}}ks.default=xf;Object.defineProperty(Is,"__esModule",{value:!0});const Ef=yf,ic=Sf,If=ks,Hi=()=>{},kf=new ic.TimeoutError;class Pf extends Ef{constructor(e){var t,n,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Hi,this._resolveIdle=Hi,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:If.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Hi,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Hi,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{const a=async()=>{this._pendingCount++,this._intervalCount++;try{const o=this._timeout===void 0&&t.timeout===void 0?e():ic.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&i(kf)});n(await o)}catch(o){i(o)}this._next()};this._queue.enqueue(a,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}Is.default=Pf;Object.defineProperty(Va,"__esModule",{value:!0});Va.WebHIDDevice=void 0;const Mf=Xl,Lf=Is;class Af extends Mf.EventEmitter{constructor(t){super();Je(this,"device");Je(this,"reportQueue",new Lf.default({concurrency:1}));this.device=t,this.device.addEventListener("inputreport",n=>{if(n.reportId===1){const i=new Uint8Array(n.data.buffer,n.data.byteOffset,n.data.byteLength);this.emit("input",i)}})}async close(){return this.device.close()}async forget(){return this.device.forget()}async sendFeatureReport(t){return this.device.sendFeatureReport(t[0],t.subarray(1))}async getFeatureReport(t,n){const i=await this.device.receiveFeatureReport(t);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}async sendReports(t){return this.reportQueue.add(async()=>{for(const n of t)await this.device.sendReport(n[0],n.subarray(1))})}async getDeviceInfo(){return{path:void 0,productId:this.device.productId,vendorId:this.device.vendorId}}async getChildDeviceInfo(){return null}}Va.WebHIDDevice=Af;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.encodeJPEG=Nf;async function Nf(r,e,t){const n=await new Promise((i,a)=>{const o=document.createElement("canvas");o.width=e,o.height=t;const c=o.getContext("2d");if(c){const l=c.createImageData(e,t);l.data.set(r),c.putImageData(l,0,0),o.toBlob(u=>{u?i(u):a(new Error("No image generated"))},"image/jpeg",.9)}else a(new Error("Failed to get canvas context"))});return new Uint8Array(await n.arrayBuffer())}var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.StreamDeckWeb=void 0;const Tf=ia();class Rf extends Tf.StreamDeckProxy{constructor(t,n){super(t);Je(this,"hid");this.hid=n}async forget(){await this.hid.forget()}async fillKeyCanvas(t,n){const i=n.getContext("2d");if(!i)throw new Error("Failed to get canvas context");const a=this.CONTROLS.find(c=>c.type==="button"&&c.index===t);if(!a||a.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(a.feedbackType!=="lcd")throw new TypeError(`keyIndex ${a.index} does not support lcd feedback`);const o=i.getImageData(0,0,a.pixelSize.width,a.pixelSize.height);return this.device.fillKeyBuffer(t,o.data,{format:"rgba"})}async fillPanelCanvas(t){const n=t.getContext("2d");if(!n)throw new Error("Failed to get canvas context");const i=this.device.calculateFillPanelDimensions();if(!i)throw new Error("Panel does not support filling");const a=n.getImageData(0,0,i.width,i.height);return this.device.fillPanelBuffer(a.data,{format:"rgba"})}}ci.StreamDeckWeb=Rf;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamDeckWeb=r.StreamDeckProxy=r.DeviceModelId=r.VENDOR_ID=void 0,r.requestStreamDecks=c,r.getStreamDecks=l,r.openDevice=u;const e=ia(),t=Va,n=Ms,i=ci;var a=ia();Object.defineProperty(r,"VENDOR_ID",{enumerable:!0,get:function(){return a.VENDOR_ID}}),Object.defineProperty(r,"DeviceModelId",{enumerable:!0,get:function(){return a.DeviceModelId}}),Object.defineProperty(r,"StreamDeckProxy",{enumerable:!0,get:function(){return a.StreamDeckProxy}});var o=ci;Object.defineProperty(r,"StreamDeckWeb",{enumerable:!0,get:function(){return o.StreamDeckWeb}});async function c(f){const d=await navigator.hid.requestDevice({filters:[{vendorId:e.VENDOR_ID}]});return Promise.all(d.map(async _=>u(_,f)))}async function l(f){const _=(await navigator.hid.getDevices()).filter(h=>h.vendorId===e.VENDOR_ID);return(await Promise.all(_.map(async h=>u(h,f).catch(y=>null)))).filter(h=>!!h)}async function u(f,d){const _=e.DEVICE_MODELS.find(m=>f.vendorId===e.VENDOR_ID&&m.productIds.includes(f.productId));if(!_)throw new Error("Stream Deck is of unexpected type.");await f.open();try{const m={encodeJPEG:n.encodeJPEG,...d},h=new t.WebHIDDevice(f),y=_.factory(h,m||{});return new i.StreamDeckWeb(y,h)}catch(m){throw await f.close().catch(()=>null),m}}})(us);const Of={VENDOR_ID:4057};function Ff(r){return r.vendorId===Of.VENDOR_ID}class Vf{constructor(){this.connectedDevices=new Map,this.listeners=new Map,this.buttonStates=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}async requestDevice(){if(!navigator.hid)throw new Error("WebHID not supported in this browser");try{const e=await us.requestStreamDecks();for(const t of e)await this._setupStreamDeck(t);return e[0]||null}catch(e){throw e.name==="NotAllowedError"?new Error("Failed to open Stream Deck. Please close the Elgato Stream Deck software and try again."):e}}async autoReconnect(){if(!navigator.hid)return console.warn("WebHID not supported"),[];try{const e=await us.getStreamDecks(),t=[];for(const n of e)try{await this._setupStreamDeck(n),t.push(n)}catch(i){console.warn("Failed to reconnect to Stream Deck:",i)}return t}catch(e){return console.error("Failed to auto-reconnect Stream Deck devices:",e),[]}}async _setupStreamDeck(e){try{const t=e.serialNumber||e.SERIAL_NUMBER||`${e.PRODUCT_NAME||"StreamDeck"}-${e.MODEL||e.PRODUCT_ID||"unknown"}`.replace(/\s+/g,"-").toLowerCase();return console.log("Stream Deck serial number:",t,"Product:",e.PRODUCT_NAME,"Model:",e.MODEL),this.buttonStates.set(t,new Map),e.on("down",n=>{let i;if(typeof n=="number"?i=n:typeof n=="object"&&n!==null?i=n.index:typeof n=="string"&&(i=parseInt(n)),typeof i!="number"||isNaN(i)){console.warn("Could not extract button index from Stream Deck event:",n);return}const a=this.buttonStates.get(t);a&&typeof i=="number"&&a.set(i,!0),this._emit("buttondown",{device:e,serialNumber:t,button:i,model:e.PRODUCT_NAME||"Stream Deck"})}),e.on("up",n=>{let i;if(typeof n=="number"?i=n:typeof n=="object"&&n!==null?i=n.index:typeof n=="string"&&(i=parseInt(n)),typeof i!="number"||isNaN(i))return;const a=this.buttonStates.get(t);a&&typeof i=="number"&&a.set(i,!1),this._emit("buttonup",{device:e,serialNumber:t,button:i,model:e.PRODUCT_NAME||"Stream Deck"})}),await e.setBrightness(100),await e.clearPanel(),this.connectedDevices.set(t,e),this._emit("connected",{device:e,serialNumber:t,model:e.PRODUCT_NAME||"Stream Deck",buttonCount:e.NUM_KEYS}),e}catch(t){throw console.error("Failed to setup Stream Deck:",t),t}}async disconnectDevice(e){const t=this.connectedDevices.get(e);t&&(await t.close(),this.connectedDevices.delete(e),this.buttonStates.delete(e),this._emit("disconnected",{serialNumber:e}))}async setButtonColor(e,t,n){const i=this.connectedDevices.get(e);if(!i)return!1;const a=i.NUM_KEYS||15;if(t<0||t>=a)return!1;try{const o=this._parseColor(n);return o?(await i.fillKeyColor(t,o.r,o.g,o.b),!0):!1}catch(o){return console.error(`Failed to set button ${t} color on ${e}:`,o),!1}}async clearButtonColor(e,t){return await this.setButtonColor(e,t,"#000000")}_parseColor(e){const t=document.createElement("div");t.style.color=e,document.body.appendChild(t);const n=window.getComputedStyle(t).color;document.body.removeChild(t);const i=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return i?{r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3])}:null}getConnectedDevices(){return Array.from(this.connectedDevices.values())}async disconnectAll(){const e=Array.from(this.connectedDevices.keys());for(const t of e)await this.disconnectDevice(t)}}class Mi{constructor(e,t,n){this.id=e,this.name=t,this.type=n,this.controls=new Map,this.listeners=new Map}getValue(e){const t=this.controls.get(e);return t?t.value:0}_setValue(e,t,n=0,i=1){this.controls.has(e)||this.controls.set(e,{type:"value",value:0,min:n,max:i});const a=this.controls.get(e);a.value=t,a.min=n,a.max=i,this._emit("change",{controlId:e,value:t,control:a})}_trigger(e,t=1){this._emit("trigger",{controlId:e,velocity:t})}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e),i=n.indexOf(t);i!==-1&&n.splice(i,1)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}disconnect(){}getControlIds(){return Array.from(this.controls.keys())}}class Bf extends Mi{constructor(e){super(e.id,e.name||"MIDI Device","midi"),this.midiInput=e,this.midiInput.onmidimessage=this._handleMIDIMessage.bind(this)}_handleMIDIMessage(e){const[t,n,i]=e.data;switch(t&240){case 144:if(i>0){const u=`note-${n}`;this._trigger(u,i/127)}else{const u=`note-${n}`;this._emit("release",{controlId:u})}break;case 128:const o=`note-${n}`;this._emit("release",{controlId:o});break;case 176:const c=`cc-${n}`;this._setValue(c,i/127,0,1);break;case 224:const l=(i<<7|n)-8192;this._setValue("pitchbend",l/8192,-1,1);break}}disconnect(){this.midiInput&&(this.midiInput.onmidimessage=null)}}class jf extends Mi{constructor(e,t={}){super(e.productId.toString(),t.name||"HID Device","hid"),this.hidDevice=e,this.config=t,this.buttonStates=new Map,this.hidDevice.oninputreport=this._handleInputReport.bind(this)}_handleInputReport(e){const{data:t,reportId:n}=e,i=new Uint8Array(t.buffer);for(let a=0;a<i.length;a++){const o=i[a];for(let c=0;c<8;c++){const l=a*8+c,u=o>>c&1,f=`button-${l}`,d=this.buttonStates.get(f)||!1;u&&!d?(this.buttonStates.set(f,!0),this._trigger(f,127)):!u&&d&&(this.buttonStates.set(f,!1),this._emit("release",{controlId:f}))}}}async sendOutput(e,t){this.hidDevice&&this.hidDevice.opened&&await this.hidDevice.sendReport(e,t)}disconnect(){this.hidDevice&&(this.hidDevice.oninputreport=null,this.hidDevice.close()),this.buttonStates.clear()}}class $f extends Mi{constructor(){super("keyboard","Keyboard","keyboard"),this.pressedKeys=new Set,this._boundKeyDown=this._handleKeyDown.bind(this),this._boundKeyUp=this._handleKeyUp.bind(this),window.addEventListener("keydown",this._boundKeyDown),window.addEventListener("keyup",this._boundKeyUp)}_handleKeyDown(e){if(e.target.matches("input, textarea"))return;const t=`key-${e.code}`;this.pressedKeys.has(e.code)||(this.pressedKeys.add(e.code),this._trigger(t),this._setValue(t,1,0,1))}_handleKeyUp(e){const t=`key-${e.code}`;this.pressedKeys.has(e.code)&&(this.pressedKeys.delete(e.code),this._emit("release",{controlId:t}),this._setValue(t,0,0,1))}disconnect(){window.removeEventListener("keydown",this._boundKeyDown),window.removeEventListener("keyup",this._boundKeyUp),this.pressedKeys.clear()}}class Gf extends Mi{constructor(e="Virtual"){super(`virtual-${Date.now()}`,e,"virtual")}trigger(e,t=1){this._trigger(e,t)}setValue(e,t){this._setValue(e,t,0,1)}addButton(e,t){this.controls.set(e,{type:"button",value:0,label:t})}addKnob(e,t,n=0){this.controls.set(e,{type:"knob",value:n,label:t,min:0,max:1})}}class Kf{constructor(){Je(this,"listeners",new Map);this.devices=new Map,this.midiAccess=null,this.keyboardDevice=null,this.streamDeckManager=new Vf,this._setupStreamDeckListeners()}_setupStreamDeckListeners(){this.streamDeckManager.on("connected",({device:e,model:t,serialNumber:n})=>{console.log(`Stream Deck connected: ${t}`);const i=n,a=new Mi(i,t||"Stream Deck","hid");a.streamDeck=e,this.devices.set(i,a),this._emit("deviceadded",a)}),this.streamDeckManager.on("buttondown",({device:e,button:t,model:n,serialNumber:i})=>{const a=i,o=this.devices.get(a);if(o){const c=`button-${t}`;o._trigger(c,127)}}),this.streamDeckManager.on("buttonup",({serialNumber:e,button:t})=>{const n=e,i=this.devices.get(n);if(i){const a=`button-${t}`;i._emit("release",{controlId:a})}}),this.streamDeckManager.on("disconnected",({serialNumber:e})=>{console.log("Stream Deck disconnected"),this.removeDevice(e)})}async initMIDI(){if(!navigator.requestMIDIAccess)return console.warn("WebMIDI not supported"),!1;try{this.midiAccess=await navigator.requestMIDIAccess(),this.midiAccess.onstatechange=this._handleMIDIStateChange.bind(this);for(const e of this.midiAccess.inputs.values())this._addMIDIDevice(e);return!0}catch(e){return console.error("Failed to initialize MIDI:",e),!1}}_handleMIDIStateChange(e){const t=e.port;t.type==="input"&&(t.state==="connected"?this._addMIDIDevice(t):t.state==="disconnected"&&this.removeDevice(t.id))}_addMIDIDevice(e){const t=new Bf(e);this.devices.set(t.id,t),this._emit("deviceadded",t)}async requestStreamDeck(){try{return await this.streamDeckManager.requestDevice()}catch(e){throw console.error("Failed to request Stream Deck:",e),e}}async autoReconnectStreamDecks(){try{const e=await this.streamDeckManager.autoReconnect();return console.log(`Auto-reconnected ${e.length} Stream Deck(s)`),e}catch(e){return console.error("Failed to auto-reconnect Stream Decks:",e),[]}}async requestHIDDevice(e=[]){if(!navigator.hid)return console.warn("WebHID not supported"),null;try{const t=await navigator.hid.requestDevice({filters:e});for(const n of t){if(Ff(n))return await this.streamDeckManager.connectDevice(n);if(!n.opened)try{await n.open()}catch(a){throw console.error("Failed to open HID device:",a),new Error(`Cannot open device. Make sure it's not being used by another application. Error: ${a.message}`)}const i=new jf(n);return this.devices.set(i.id,i),this._emit("deviceadded",i),i}}catch(t){throw console.error("Failed to request HID device:",t),t}return null}enableKeyboard(){return this.keyboardDevice||(this.keyboardDevice=new $f,this.devices.set(this.keyboardDevice.id,this.keyboardDevice),this._emit("deviceadded",this.keyboardDevice)),this.keyboardDevice}createVirtual(e){const t=new Gf(e);return this.devices.set(t.id,t),this._emit("deviceadded",t),t}removeDevice(e){const t=this.devices.get(e);t&&(t.disconnect(),this.devices.delete(e),this._emit("deviceremoved",t))}getDevice(e){return this.devices.get(e)}getAllDevices(){return Array.from(this.devices.values())}getInputDevices(){return this.getAllDevices()}getInputDevice(e){return this.getDevice(e)}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e),i=n.indexOf(t);i!==-1&&n.splice(i,1)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}disconnectAll(){for(const e of this.devices.values())e.disconnect();this.devices.clear()}}class Uf{constructor(e,t,n){this.inputDeviceManager=new Kf,this.mappingLibrary=e||new yl,this.customPropertyManager=t||new bl,this.triggerManager=n||new wl,this.listeners=new Map,this._setupInputListeners()}async initialize(){this.customPropertyManager.initialize(),this.inputDeviceManager.on("deviceadded",e=>{this._setupDeviceListeners(e),this._emit("deviceadded",e)}),this.inputDeviceManager.on("deviceremoved",e=>{this._emit("deviceremoved",e)}),await this.inputDeviceManager.initMIDI(),await this.inputDeviceManager.autoReconnectStreamDecks(),this.inputDeviceManager.enableKeyboard()}_setupInputListeners(){}_setupDeviceListeners(e){e.on("trigger",({controlId:t,velocity:n})=>{this._handleTrigger(e.id,t,n)}),e.on("release",({controlId:t})=>{this._handleRelease(e.id,t)}),e.on("change",({controlId:t,value:n})=>{this._handleValueChange(e.id,t,n)})}_generateClassName(e,t){return`${e.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}_${t}`}_handleTrigger(e,t,n){const i=this.mappingLibrary.getByInput(e,t);if(i.length>0){const a=this._generateClassName(t,"down");this.triggerManager.addRawClass(a);const o=this._generateClassName(t,"up");this.triggerManager.removeRawClass(o);for(const c of i)c.mode==="trigger"&&(this.triggerManager.trigger(c),this._emit("trigger",{mapping:c,velocity:n}))}}_handleRelease(e,t){const n=this.mappingLibrary.getByInput(e,t);if(n.length>0){const i=this._generateClassName(t,"down");this.triggerManager.removeRawClass(i);const a=this._generateClassName(t,"up");this.triggerManager.addRawClass(a);for(const o of n)o.mode==="trigger"&&o.triggerType!=="always"&&(this.triggerManager.release(o),this._emit("release",{mapping:o}))}}_handleValueChange(e,t,n){const i=this.mappingLibrary.getByInput(e,t),a=i.find(o=>o.mode==="input");if(a&&a.name){const o=a.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),c=Math.round(n*100);this.customPropertyManager.setProperty(o,`${c}%`)}for(const o of i)if(o.mode==="direct"){const c=o.getPropertyName(),l=o.mapValue(n);this.customPropertyManager.setProperty(c,l),this._emit("valuechange",{mapping:o,value:n,propertyValue:l})}}async requestStreamDeck(){return await this.inputDeviceManager.requestStreamDeck()}async requestHIDDevice(e=[]){return await this.inputDeviceManager.requestHIDDevice(e)}getInputDevices(){return this.inputDeviceManager.getAllDevices()}getInputDevice(e){return this.inputDeviceManager.getDevice(e)}createVirtualDevice(e){return this.inputDeviceManager.createVirtual(e)}setTriggerContainer(e){this.triggerManager.setContainer(e)}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e),i=n.indexOf(t);i!==-1&&n.splice(i,1)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}destroy(){this.inputDeviceManager.disconnectAll(),this.customPropertyManager.destroy(),this.triggerManager.clearAll(),this.listeners.clear()}}Bc();var Hf=cl("<title> </title>"),zf=cl("<svg><!><!></svg>");function Tt(r,e){const t=Ws(e,["children","$$slots","$$events","$$legacy"]),n=Ws(t,["data","viewBox","size","width","height","color","stroke","fill","title"]);yt(e,!1);const i=Vo();let a=pe(e,"data",8,""),o=pe(e,"viewBox",24,()=>h(a())),c=pe(e,"size",8,"20px"),l=pe(e,"width",24,c),u=pe(e,"height",24,c),f=pe(e,"color",8,"currentColor"),d=pe(e,"stroke",24,f),_=pe(e,"fill",24,f),m=pe(e,"title",8,"");function h(L){const E=/viewBox="([\d\- \.]+)"/.exec(L);return E?E[1]:"0 0 20 20"}su(()=>sl(a()),()=>{C(i,a().replace(/<svg[ \n]([^>]*)>/,"").replace("</svg>",""))}),ou(),Bu();var y=zf();Ru(y,()=>({xmlns:"http://www.w3.org/2000/svg",width:l(),height:u(),viewBox:o(),stroke:d(),fill:_(),...n}));var v=g(y);{var D=L=>{var F=Hf(),E=g(F);Z(()=>ne(E,m())),S(L,F)};de(v,L=>{m()&&L(D)})}var M=w(v);dn(M,()=>s(i),!0),S(r,y),wt()}const qf=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
    <path fill="#2196f3" d="M 17 2 A 1 1 0 0 0 16.123047 2.5214844 L 8.1738281 15.433594 L 8.1738281 15.435547 A 1 1 0 0 0 8 16 A 1 1 0 0 0 9 17 L 14.5 17 L 13.019531 26.800781 A 1 1 0 0 0 13 27 A 1 1 0 0 0 14 28 A 1 1 0 0 0 14.882812 27.466797 L 14.884766 27.466797 L 22.806641 14.589844 L 22.796875 14.572266 C 22.915239 14.407976 23 14.217804 23 14 C 23 13.448 22.552 13 22 13 L 16.5 13 L 17.955078 3.2949219 A 1 1 0 0 0 18 3 A 1 1 0 0 0 17 2 z"></path>
</svg>
`,Wf=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
    <path fill="#9C27B0" d="M21 4H26.001V43H21z" transform="rotate(45.001 23.5 23.5)"></path>
    <path fill="#9C27B0" d="M21 4H26.001V43H21z" transform="rotate(134.999 23.5 23.5)"></path>
</svg>
`,Yf=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#9C27B0" d="M21 6H26V41H21z"></path><path fill="#9C27B0" d="M6 21H41V26H6z"></path>
</svg>`,Xf='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="#2196F3" d="M16 15c0 1.104-.896 2-2 2H8c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V15zM29 15c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V15zM42 15c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V15zM16 26c0 1.104-.896 2-2 2H8c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V26zM29 26c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V26zM42 26c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V26zM16 37c0 1.104-.896 2-2 2H8c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V37zM29 37c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V37zM42 37c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V37z"/></svg>',Jf='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="#f44336" d="M16,13c0,0,0,23.988,0,24h3V21.583L36,16v17h3V6L16,13z"/><path fill="#f44336" d="M13 31A6 6 0 1 0 13 43 6 6 0 1 0 13 31zM33 27A6 6 0 1 0 33 39 6 6 0 1 0 33 27z"/></svg>';var Zf=O('<div class="dialog-header svelte-pz05fu"><h2 class="svelte-pz05fu"> </h2></div>'),Qf=O('<div class="dialog-footer svelte-pz05fu"><div class="dialog-footer-tools svelte-pz05fu"><!></div> <div class="dialog-footer-buttons svelte-pz05fu"><!></div></div>'),ev=O('<dialog><!> <div class="dialog-body svelte-pz05fu"><!></div> <!></dialog>');function Cr(r,e){yt(e,!0);let t=pe(e,"title",3,null),n=pe(e,"onclose",3,null),i=pe(e,"dialogRef",15,null),a=pe(e,"anchored",3,!1),o=pe(e,"anchorId",3,null),c=pe(e,"showArrow",3,!0),l=pe(e,"lightDismiss",3,!0);function u(){var L;(L=i())==null||L.close(),n()&&n()()}function f(L){a()&&l()&&L.target===i()&&u()}var d=ev();let _;d.__click=f;var m=g(d);{var h=L=>{var F=Zf(),E=g(F),k=g(E);Z(()=>ne(k,t())),S(L,F)};de(m,L=>{t()&&L(h)})}var y=w(m,2),v=g(y);Wi(v,()=>e.children);var D=w(y,2);{var M=L=>{var F=Qf(),E=g(F),k=g(E);{var B=te=>{var ae=it(),ge=he(ae);Wi(ge,()=>e.tools),S(te,ae)};de(k,te=>{e.tools&&te(B)})}var q=w(E,2),ie=g(q);{var oe=te=>{var ae=it(),ge=he(ae);Wi(ge,()=>e.buttons),S(te,ae)};de(ie,te=>{e.buttons&&te(oe)})}S(L,F)};de(D,L=>{(e.tools||e.buttons)&&L(M)})}fn(d,L=>i(L),()=>i()),Z(()=>{_=St(d,1,"dialog svelte-pz05fu",null,_,{anchored:a(),"show-arrow":c()&&a()}),Rt(d,a()&&o()?`position-anchor: --${o()}`:"")}),S(r,d),wt()}Pt(["click"]);var tv=O('<button id="start" class="svelte-4b3o1e"><!> Connect DMX controller</button>'),rv=O('<button id="stop" class="svelte-4b3o1e"><!> Disconnect</button>'),nv=O('<div class="device-item svelte-4b3o1e"><span class="device-name svelte-4b3o1e"> </span></div>'),iv=O('<div class="device-list svelte-4b3o1e"></div>'),av=O('<div class="device-item svelte-4b3o1e"><span class="device-name svelte-4b3o1e"> </span></div>'),sv=O('<div class="device-list svelte-4b3o1e"></div>'),ov=O('<div class="device-section svelte-4b3o1e"><button class="connect-device-btn svelte-4b3o1e"><!> Connect Stream Deck</button> <!></div> <div class="device-section svelte-4b3o1e"><button class="connect-device-btn svelte-4b3o1e"><!> Connect MIDI Device</button> <!></div>',1),lv=O('<header class="svelte-4b3o1e"><!> <button id="devices-button" style="anchor-name: --devices-button" title="Connect input devices" class="svelte-4b3o1e"><!></button></header> <!>',1);function cv(r,e){yt(e,!0);let t=z(null),n=z(null),i=z(Ae([])),a=ye(()=>s(i).filter(E=>E.type==="hid"&&E.id!=="keyboard")),o=ye(()=>s(i).filter(E=>E.type==="midi")),c=ye(()=>s(o).length>0);function l(){e.inputController&&C(i,e.inputController.getInputDevices(),!0),requestAnimationFrame(()=>{var E;(E=s(t))==null||E.showModal()})}function u(){var E;(E=s(t))==null||E.close()}async function f(){var E,k;try{await((E=e.inputController)==null?void 0:E.requestStreamDeck()),C(i,((k=e.inputController)==null?void 0:k.getInputDevices())||[],!0)}catch(B){alert(`Failed to connect Stream Deck: ${B.message}

Please close the Elgato Stream Deck software and try again.`)}}async function d(){var E,k,B;try{await((k=(E=e.inputController)==null?void 0:E.inputDeviceManager)==null?void 0:k.initMIDI()),C(i,((B=e.inputController)==null?void 0:B.getInputDevices())||[],!0)}catch(q){alert(`Failed to connect MIDI: ${q.message}`)}}var _=lv(),m=he(_),h=g(m);{var y=E=>{var k=tv();k.__click=function(...q){var ie;(ie=e.onconnect)==null||ie.apply(this,q)};var B=g(k);Tt(B,{get data(){return qf}}),S(E,k)},v=E=>{var k=rv();k.__click=function(...q){var ie;(ie=e.ondisconnect)==null||ie.apply(this,q)};var B=g(k);Tt(B,{get data(){return Wf}}),S(E,k)};de(h,E=>{e.connected?E(v,!1):E(y)})}var D=w(h,2);D.__click=l;var M=g(D);Tt(M,{get data(){return Yf}}),fn(D,E=>C(n,E),()=>s(n));var L=w(m,2);{var F=E=>{Cr(E,{anchored:!0,anchorId:"devices-button",showArrow:!0,lightDismiss:!0,onclose:u,get dialogRef(){return s(t)},set dialogRef(k){C(t,k,!0)},children:(k,B)=>{var q=ov(),ie=he(q),oe=g(ie);oe.__click=f;var te=g(oe);Tt(te,{get data(){return Xf}});var ae=w(oe,2);{var ge=$=>{var b=iv();Pe(b,21,()=>s(a),x=>x.id,(x,A)=>{var N=nv(),T=g(N),P=g(T);Z(()=>ne(P,s(A).name)),S(x,N)}),S($,b)};de(ae,$=>{s(a).length>0&&$(ge)})}var me=w(ie,2),ue=g(me);ue.__click=d;var xe=g(ue);Tt(xe,{get data(){return Jf}});var Q=w(ue,2);{var V=$=>{var b=sv();Pe(b,21,()=>s(o),x=>x.id,(x,A)=>{var N=av(),T=g(N),P=g(T);Z(()=>ne(P,s(A).name)),S(x,N)}),S($,b)};de(Q,$=>{s(o).length>0&&$(V)})}Z(()=>ue.disabled=s(c)),S(k,q)},$$slots:{default:!0}})};de(L,E=>{s(n)&&E(F)})}S(r,_),wt()}Pt(["click"]);const uv='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="#3F51B5" d="M17.8 18.1L10.4 25.4 6.2 21.3 4 23.5 10.4 29.9 20 20.3zM17.8 5.1L10.4 12.4 6.2 8.3 4 10.5 10.4 16.9 20 7.3zM17.8 31.1L10.4 38.4 6.2 34.3 4 36.5 10.4 42.9 20 33.3z"/><g><path fill="#90CAF9" d="M24 22H44V26H24zM24 9H44V13H24zM24 35H44V39H24z"/></g></svg>',dv='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px" baseProfile="basic"><path fill="#64b5f6" d="M24,44C12.972,44,4,35.028,4,24S12.972,4,24,4s20,8.972,20,20S35.028,44,24,44z M24,6	C14.075,6,6,14.075,6,24s8.075,18,18,18s18-8.075,18-18S33.925,6,24,6z"/><path fill="#64b5f6" d="M24,37c-7.168,0-13-5.832-13-13s5.832-13,13-13s13,5.832,13,13S31.168,37,24,37z M24,13	c-6.065,0-11,4.935-11,11s4.935,11,11,11s11-4.935,11-11S30.065,13,24,13z"/><path fill="#64b5f6" d="M24,31c-3.86,0-7-3.14-7-7s3.14-7,7-7s7,3.14,7,7S27.86,31,24,31z M24,19c-2.757,0-5,2.243-5,5	s2.243,5,5,5s5-2.243,5-5S26.757,19,24,19z"/><circle cx="40" cy="14" r="2" fill="#0d47a1"/><circle cx="12" cy="39" r="3" fill="#5e35b1"/><circle cx="33" cy="32" r="3" fill="#0d47a1"/><circle cx="14" cy="8" r="2" fill="#5e35b1"/><circle cx="12" cy="25" r="2" fill="#0d47a1"/><circle cx="24" cy="24" r="3.094" fill="#ffe082"/></svg>',fv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="none" stroke="#02abc0" stroke-miterlimit="10" stroke-width="4" d="M8 21L8 10 19 10"></path><path fill="none" stroke="#02abc0" stroke-miterlimit="10" stroke-width="4" d="M8,10c5.763,6.146,13,15,20,15 c8.505,0,13-6.102,13-9.748C41,11.932,39.013,9,35.007,9C28.52,9,23.02,16.775,23.346,23.808C23.769,33.967,31.596,41,40,41"></path>
</svg>`,vv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#2196F3" d="M11 5A7 7 0 1 0 11 19A7 7 0 1 0 11 5Z"></path><path fill="#FFA726" d="M23.082 28.861c.713 1.412 2.483 1.967 3.934 1.232 1.454-.734 2.059-2.488 1.346-3.899l-3.186-6.319c-.712-1.41-2.482-1.966-3.934-1.23-1.453.733-2.059 2.486-1.347 3.898L23.082 28.861zM28.39 26.234c.713 1.41 2.483 1.967 3.937 1.232 1.453-.733 2.057-2.488 1.344-3.9l-3.186-6.318c-.713-1.41-2.48-1.967-3.934-1.231-1.453.732-2.059 2.485-1.348 3.898L28.39 26.234zM33.7 23.607c.712 1.413 2.481 1.966 3.935 1.234 1.452-.734 2.058-2.49 1.344-3.9l-3.187-6.32c-.712-1.412-2.479-1.965-3.933-1.232-1.453.734-2.059 2.489-1.348 3.9L33.7 23.607zM40.215 23.421c-.307-.608.047.093.381.755C40.752 24.488 40.496 23.978 40.215 23.421z"></path><path fill="#FFA726" d="M20.815,22.174c-0.486,0.246-1.081,0.053-1.324-0.436l-5.78-11.459c-0.493-0.976-2.209-2.19-3.969-1.301c-1.76,0.89-1.757,3.085-1.313,3.967c0.243,0.482,3.405,6.754,6.226,12.342c2.339,4.635,4.438,8.803,4.438,8.803l-5.523-1.625c-1.83-0.603-3.687,0.198-4.15,2.302c-0.465,1.767,0.762,3.524,2.392,4.056l7.5,2.462c3.865,1.269,7.878,0.809,11.523-1.04l0.545-0.275l0.762-0.305l4.807-2.43l1.27-0.785c3.546-2.574,4.857-7.359,2.819-11.397c0,0-0.216-0.43-0.44-0.876c-0.175-0.344-0.857-1.696-2.6-5.153L20.815,22.174z"></path><g><path fill="#FFCDD2" d="M9.359 12.6c-.511-1.038-.135-2.27.846-2.751.976-.479 2.186-.024 2.692 1.011C13.409 11.898 9.869 13.635 9.359 12.6M11.882 37.605c-1.178-.316-1.874-1.527-1.561-2.707.319-1.178 1.531-1.875 2.707-1.559C14.207 33.657 13.061 37.924 11.882 37.605"></path></g>
</svg>`,hv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#FFC107" d="M33 22L23.6 22 30 5 19 5 13 26 21.6 26 17 45z"></path>
</svg>`,pv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#3F51B5" d="M36 34L33 31.5 39.8 24 33 16.5 36 14 45 24zM13 34L4 24 13 14 16 16.5 9.1 24 16 31.5z"></path><path fill="#2196F3" d="M21 39L17.2 37.7 27 9 30.8 10.3z"></path>
</svg>`;var mv=O('<div class="clear-universe svelte-1f8dwwb"><button class="svelte-1f8dwwb">Clear</button></div>'),_v=O('<div class="tabs-container svelte-1f8dwwb"><nav class="svelte-1f8dwwb"><label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Devices</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Animations</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Inputs</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Triggers</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> CSS</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Universe</label></nav> <!></div>');function gv(r,e){yt(e,!0);const t=[];let n=pe(e,"view",15),i=pe(e,"onClearUniverse",3,null);var a=_v(),o=g(a),c=g(o),l=g(c);l.value=l.__value="devices";var u=w(l,2);Tt(u,{get data(){return uv}});var f=w(c,2),d=g(f);d.value=d.__value="animations";var _=w(d,2);Tt(_,{get data(){return fv}});var m=w(f,2),h=g(m);h.value=h.__value="inputs";var y=w(h,2);Tt(y,{get data(){return vv}});var v=w(m,2),D=g(v);D.value=D.__value="triggers";var M=w(D,2);Tt(M,{get data(){return hv}});var L=w(v,2),F=g(L);F.value=F.__value="css";var E=w(F,2);Tt(E,{get data(){return pv}});var k=w(L,2),B=g(k);B.value=B.__value="universe";var q=w(B,2);Tt(q,{get data(){return dv}});var ie=w(o,2);{var oe=te=>{var ae=mv(),ge=g(ae);ge.__click=function(...me){var ue;(ue=i())==null||ue.apply(this,me)},S(te,ae)};de(ie,te=>{n()==="universe"&&i()&&te(oe)})}yn(t,[],l,n,n),yn(t,[],d,n,n),yn(t,[],h,n,n),yn(t,[],D,n,n),yn(t,[],F,n,n),yn(t,[],B,n,n),S(r,a),wt()}Pt(["click"]);var yv=O('<div class="channel svelte-134r4z3"><label class="svelte-134r4z3"></label> <input type="number" min="0" max="255" class="svelte-134r4z3"/></div>'),wv=O('<div class="universe-container svelte-134r4z3"><div class="channels-grid svelte-134r4z3"></div></div>');function bv(r,e){yt(e,!0);let t=z(Ae(new Array(512).fill(0))),n;function i(){e.dmxController&&C(t,Array.from(e.dmxController.getUniverse()),!0)}Hn(()=>{n=setInterval(i,100)}),Ca(()=>{n&&clearInterval(n)});function a(l,u){const f=parseInt(u.target.value)||0;e.dmxController&&e.dmxController.setChannel(l,f),s(t)[l]=f}var o=wv(),c=g(o);Pe(c,21,()=>s(t),qe,(l,u,f)=>{var d=yv(),_=g(d);Ft(_,"for",`ch-${f}`),_.textContent=f+1;var m=w(_,2);Ft(m,"id",`ch-${f}`),m.__change=h=>a(f,h),Z(()=>$t(m,s(u))),S(l,d)}),S(r,o),wt()}Pt(["change"]);function ja(r,e){var a,o;const t=(a=Me[r])==null?void 0:a.controls,n=(o=Me[e])==null?void 0:o.controls;if(!t||!n)return{};const i={};for(const c of t)for(const l of n)if(c.name===l.name&&c.type===l.type){i[c.name]=l.name;break}return i}function Sv(r,e){const t=ja(r,e);return Object.keys(t).length>0}function vs(r,e){const t=Me[r],n=t.controls.find(a=>a.name===e);if(!n)return[];const i=[];for(const a of Object.values(n.components)){const o=t.components[a].channel;i.push(o)}return i}function ho(r,e,t,n,i=null,a=!1){const o=ja(r,e),c=[...n];for(const[l,u]of Object.entries(o)){if(i!==null&&!i.includes(l))continue;const f=vs(r,l),d=vs(e,u);for(let _=0;_<Math.min(f.length,d.length);_++){let m=t[f[_]];a&&l==="Pan/Tilt"&&_===0&&(m=255-m),c[d[_]]=m}}return c}function Cv(r,e,t=null){const n=ja(r,e),i=[];for(const[a,o]of Object.entries(n)){if(t!==null&&!t.includes(a))continue;const c=vs(e,o);i.push(...c)}return i}function Dv(r,e){const t=ja(r,e),n=Me[r].controls,i=Me[e].controls,a=[];for(const[o,c]of Object.entries(t)){const l=n.find(f=>f.name===o),u=i.find(f=>f.name===c);a.push({controlName:o,sourceControl:l,targetControl:u})}return a}var xv=O('<div class="xy-pad svelte-wbxrfb" role="slider" aria-label="Pan and Tilt Control" tabindex="0"><div class="grid-line vertical svelte-wbxrfb" style="left: 25%"></div> <div class="grid-line vertical svelte-wbxrfb" style="left: 50%"></div> <div class="grid-line vertical svelte-wbxrfb" style="left: 75%"></div> <div class="grid-line horizontal svelte-wbxrfb" style="top: 25%"></div> <div class="grid-line horizontal svelte-wbxrfb" style="top: 50%"></div> <div class="grid-line horizontal svelte-wbxrfb" style="top: 75%"></div> <div></div></div>');function Ev(r,e){yt(e,!0);let t=pe(e,"panValue",15,127),n=pe(e,"tiltValue",15,127),i=pe(e,"onUpdate",3,null),a=z(null),o=z(!1);function c(y,v){if(!s(a))return;const D=s(a).getBoundingClientRect();let M=(y-D.left)/D.width,L=(v-D.top)/D.height;M=Math.max(0,Math.min(1,M)),L=Math.max(0,Math.min(1,L)),t(Math.round(M*255)),n(Math.round((1-L)*255)),i()&&i()(t(),n())}function l(y){C(o,!0),c(y.clientX,y.clientY),y.preventDefault()}function u(y){s(o)&&c(y.clientX,y.clientY)}xr(()=>{const y=()=>{C(o,!1)};return window.addEventListener("mouseup",y),()=>window.removeEventListener("mouseup",y)});let f=ye(()=>t()/255*100),d=ye(()=>(1-n()/255)*100);var _=xv();_.__mousedown=l,_.__mousemove=u;var m=w(g(_),12);let h;fn(_,y=>C(a,y),()=>s(a)),Z(()=>{h=St(m,1,"crosshair svelte-wbxrfb",null,h,{active:s(o)}),Rt(m,`left: ${s(f)??""}%; top: ${s(d)??""}%`)}),S(r,_),wt()}Pt(["mousedown","mousemove"]);var Iv=O('<button type="button" role="switch"><span class="toggle-slider svelte-1fjc2jm"></span></button>');function kv(r,e){yt(e,!0);let t=pe(e,"checked",15,!1),n=pe(e,"disabled",3,!1),i=pe(e,"onchange",3,null),a=pe(e,"label",3,null);function o(){n()||(t(!t()),i()&&i()(t()))}var c=Iv();let l;c.__click=o,Z(()=>{l=St(c,1,"toggle-switch svelte-1fjc2jm",null,l,{on:t()}),c.disabled=n(),Ft(c,"aria-checked",t()),Ft(c,"aria-label",a())}),S(r,c),wt()}Pt(["click"]);var Pv=O('<div class="control-xypad svelte-xb2oul"><label class="svelte-xb2oul"> </label> <div><!></div> <div class="xypad-inputs svelte-xb2oul"><input type="text" class="value-input svelte-xb2oul" title="X" maxlength="3"/> <input type="text" class="value-input svelte-xb2oul" title="Y" maxlength="3"/></div></div>'),Mv=O('<div class="control-group-label svelte-xb2oul"><label class="svelte-xb2oul"> </label></div>  <div class="control svelte-xb2oul"><label class="svelte-xb2oul"> </label> <div class="slider-wrapper svelte-xb2oul"><input type="range" min="0" max="255" class="color-slider svelte-xb2oul"/></div> <input type="text" class="value-input svelte-xb2oul" maxlength="3"/></div>  <div class="control svelte-xb2oul"><label class="svelte-xb2oul"> </label> <div class="slider-wrapper svelte-xb2oul"><input type="range" min="0" max="255" class="color-slider svelte-xb2oul"/></div> <input type="text" class="value-input svelte-xb2oul" maxlength="3"/></div>  <div class="control svelte-xb2oul"><label class="svelte-xb2oul"> </label> <div class="slider-wrapper svelte-xb2oul"><input type="range" min="0" max="255" class="color-slider svelte-xb2oul"/></div> <input type="text" class="value-input svelte-xb2oul" maxlength="3"/></div>',1),Lv=O('<div class="control svelte-xb2oul"><label class="svelte-xb2oul"> </label> <div class="toggle-wrapper svelte-xb2oul"><!></div> <input type="text" class="value-input svelte-xb2oul" maxlength="3"/></div>'),Av=O('<div class="control svelte-xb2oul"><label class="svelte-xb2oul"> </label> <div class="slider-wrapper svelte-xb2oul"><input type="range" min="0" max="255" class="color-slider svelte-xb2oul"/></div> <input type="text" class="value-input svelte-xb2oul" maxlength="3"/></div>'),Nv=O('<div class="controls svelte-xb2oul"></div>');function aa(r,e){yt(e,!0);let t=pe(e,"values",31,()=>Ae([])),n=pe(e,"onChange",3,null),i=pe(e,"disabledChannels",19,()=>[]);function a(y,v){t(t()[y]=v,!0),n()&&n()(y,v)}function o(y,v,D,M){t(t()[y]=D,!0),t(t()[v]=M,!0),n()&&(n()(y,D),n()(v,M))}function c(y,v){const M=t()[y]===v.onValue?v.offValue:v.onValue;a(y,M)}function l(y,v,D){const M=parseInt(v);!isNaN(M)&&M>=0&&M<=255?a(y,M):v===""?D.target.value="":D.target.value=t()[y]}function u(y){y.target.value=y.target.value.replace(/[^0-9]/g,"")}function f(y){return i().includes(y)}function d(y){return e.components[y].channel}function _(y){switch(y){case"Red":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,0,0) 100%)";case"Green":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(0,255,0) 100%)";case"Blue":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(0,0,255) 100%)";case"Amber":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,191,0) 100%)";case"White":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,255,255) 100%)";case"Dimmer":case"Intensity":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,255,255) 100%)";case"Output":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(200,200,200) 100%)";default:return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(128,128,128) 100%)"}}function m(y,v){switch(y){case"Red":return`rgb(${v}, 0, 0)`;case"Green":return`rgb(0, ${v}, 0)`;case"Blue":return`rgb(0, 0, ${v})`;case"Amber":return`rgb(${v}, ${Math.round(v*.749)}, 0)`;case"White":return`rgb(${v}, ${v}, ${v})`;case"Dimmer":case"Intensity":return`rgb(${v}, ${v}, ${v})`;case"Output":return`rgb(${Math.round(v*.784)}, ${Math.round(v*.784)}, ${Math.round(v*.784)})`;default:return`rgb(${Math.round(v*.5)}, ${Math.round(v*.5)}, ${Math.round(v*.5)})`}}var h=Nv();Pe(h,21,()=>e.controls,qe,(y,v)=>{var D=it(),M=he(D);{var L=E=>{const k=ye(()=>d(s(v).components.x)),B=ye(()=>d(s(v).components.y)),q=ye(()=>f(s(k))),ie=ye(()=>f(s(B))),oe=ye(()=>s(q)&&s(ie));var te=Pv(),ae=g(te),ge=g(ae),me=w(ae,2);let ue;var xe=g(me);Ev(xe,{get panValue(){return t()[s(k)]},get tiltValue(){return t()[s(B)]},onUpdate:(b,x)=>!s(oe)&&o(s(k),s(B),b,x)});var Q=w(me,2),V=g(Q);V.__input=u,V.__change=b=>!s(q)&&l(s(k),b.target.value,b);var $=w(V,2);$.__input=u,$.__change=b=>!s(ie)&&l(s(B),b.target.value,b),Z(()=>{ne(ge,s(v).name),ue=St(me,1,"xypad-wrapper svelte-xb2oul",null,ue,{disabled:s(oe)}),$t(V,t()[s(k)]),V.disabled=s(q),$t($,t()[s(B)]),$.disabled=s(ie)}),S(E,te)},F=E=>{var k=it(),B=he(k);{var q=oe=>{const te=ye(()=>d(s(v).components.r)),ae=ye(()=>d(s(v).components.g)),ge=ye(()=>d(s(v).components.b)),me=ye(()=>f(s(te))),ue=ye(()=>f(s(ae))),xe=ye(()=>f(s(ge)));var Q=Mv(),V=he(Q),$=g(V),b=g($),x=w(V,2),A=g(x),N=g(A),T=w(A,2),P=g(T);P.__input=Ie=>!s(me)&&a(s(te),parseInt(Ie.target.value));var G=w(T,2);G.__input=u,G.__change=Ie=>!s(me)&&l(s(te),Ie.target.value,Ie);var K=w(x,2),X=g(K),I=g(X),R=w(X,2),re=g(R);re.__input=Ie=>!s(ue)&&a(s(ae),parseInt(Ie.target.value));var H=w(R,2);H.__input=u,H.__change=Ie=>!s(ue)&&l(s(ae),Ie.target.value,Ie);var ee=w(K,2),se=g(ee),we=g(se),Ee=w(se,2),je=g(Ee);je.__input=Ie=>!s(xe)&&a(s(ge),parseInt(Ie.target.value));var Ve=w(Ee,2);Ve.__input=u,Ve.__change=Ie=>!s(xe)&&l(s(ge),Ie.target.value,Ie),Z((Ie,Ye,Dt,Vt,kr,Pr)=>{ne(b,s(v).name),ne(N,e.components[s(v).components.r].name),$t(P,t()[s(te)]),Rt(P,`--slider-gradient: ${Ie??""}; --thumb-color: ${Ye??""}`),P.disabled=s(me),$t(G,t()[s(te)]),G.disabled=s(me),ne(I,e.components[s(v).components.g].name),$t(re,t()[s(ae)]),Rt(re,`--slider-gradient: ${Dt??""}; --thumb-color: ${Vt??""}`),re.disabled=s(ue),$t(H,t()[s(ae)]),H.disabled=s(ue),ne(we,e.components[s(v).components.b].name),$t(je,t()[s(ge)]),Rt(je,`--slider-gradient: ${kr??""}; --thumb-color: ${Pr??""}`),je.disabled=s(xe),$t(Ve,t()[s(ge)]),Ve.disabled=s(xe)},[()=>_("Red"),()=>m("Red",t()[s(te)]),()=>_("Green"),()=>m("Green",t()[s(ae)]),()=>_("Blue"),()=>m("Blue",t()[s(ge)])]),S(oe,Q)},ie=oe=>{var te=it(),ae=he(te);{var ge=ue=>{const xe=ye(()=>d(s(v).components.value)),Q=ye(()=>f(s(xe))),V=ye(()=>t()[s(xe)]===s(v).onValue);var $=Lv(),b=g($),x=g(b),A=w(b,2),N=g(A);kv(N,{get checked(){return s(V)},get disabled(){return s(Q)},onchange:()=>c(s(xe),s(v)),get label(){return s(v).name}});var T=w(A,2);T.__input=u,T.__change=P=>!s(Q)&&l(s(xe),P.target.value,P),Z(()=>{ne(x,s(v).name),$t(T,t()[s(xe)]),T.disabled=s(Q)}),S(ue,$)},me=ue=>{var xe=it(),Q=he(xe);{var V=$=>{const b=ye(()=>d(s(v).components.value)),x=ye(()=>f(s(b)));var A=Av(),N=g(A),T=g(N),P=w(N,2),G=g(P);G.__input=X=>!s(x)&&a(s(b),parseInt(X.target.value));var K=w(P,2);K.__input=u,K.__change=X=>!s(x)&&l(s(b),X.target.value,X),Z((X,I)=>{ne(T,s(v).name),$t(G,t()[s(b)]),Rt(G,`--slider-gradient: ${X??""}; --thumb-color: ${I??""}`),G.disabled=s(x),$t(K,t()[s(b)]),K.disabled=s(x)},[()=>_(e.components[s(v).components.value].name),()=>m(e.components[s(v).components.value].name,t()[s(b)])]),S($,A)};de(Q,$=>{s(v).type==="slider"&&$(V)},!0)}S(ue,xe)};de(ae,ue=>{s(v).type==="toggle"?ue(ge):ue(me,!1)},!0)}S(oe,te)};de(B,oe=>{s(v).type==="rgb"?oe(q):oe(ie,!1)},!0)}S(E,k)};de(M,E=>{s(v).type==="xypad"?E(L):E(F,!1)})}S(y,D)}),S(r,h),wt()}Pt(["input","change"]);var Tv=O("<button><!></button>");function ze(r,e){let t=pe(e,"variant",3,"primary"),n=pe(e,"disabled",3,!1),i=pe(e,"onclick",3,null),a=pe(e,"type",3,"button"),o=pe(e,"form",3,null),c=pe(e,"pulsating",3,!1);var l=Tv();l.__click=function(...f){var d;(d=i())==null||d.apply(this,f)};var u=g(l);Wi(u,()=>e.children),Z(()=>{St(l,1,`button ${t()??""} ${c()?"pulsating":""}`,"svelte-18f749u"),l.disabled=n(),Ft(l,"type",a()),Ft(l,"form",o()||void 0)}),S(r,l)}Pt(["click"]);var Rv=O("<button><!></button>");function Ls(r,e){let t=pe(e,"onclick",3,null),n=pe(e,"disabled",3,!1),i=pe(e,"size",3,"medium");var a=Rv();a.__click=function(...c){var l;(l=t())==null||l.apply(this,c)};var o=g(a);Tt(o,{get data(){return e.icon}}),Z(()=>{St(a,1,`icon-button ${i()??""}`,"svelte-cwtv5f"),a.disabled=n(),Ft(a,"aria-label",e.label),Ft(a,"title",e.label)}),S(r,a)}Pt(["click"]);const $a=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 30 30">
    <path d="M 22.828125 3 C 22.316375 3 21.804562 3.1954375 21.414062 3.5859375 L 19 6 L 24 11 L 26.414062 8.5859375 C 27.195062 7.8049375 27.195062 6.5388125 26.414062 5.7578125 L 24.242188 3.5859375 C 23.851688 3.1954375 23.339875 3 22.828125 3 z M 17 8 L 5.2597656 19.740234 C 5.2597656 19.740234 6.1775313 19.658 6.5195312 20 C 6.8615312 20.342 6.58 22.58 7 23 C 7.42 23.42 9.6438906 23.124359 9.9628906 23.443359 C 10.281891 23.762359 10.259766 24.740234 10.259766 24.740234 L 22 13 L 17 8 z M 4 23 L 3.0566406 25.671875 A 1 1 0 0 0 3 26 A 1 1 0 0 0 4 27 A 1 1 0 0 0 4.328125 26.943359 A 1 1 0 0 0 4.3378906 26.939453 L 4.3632812 26.931641 A 1 1 0 0 0 4.3691406 26.927734 L 7 26 L 5.5 24.5 L 4 23 z"></path>
</svg>`,Ov=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#1976D2" d="M38 14h-3c-5.514 0-10 4.486-10 10s4.486 10 10 10h3c5.514 0 10-4.486 10-10S43.514 14 38 14M38 30h-3c-3.309 0-6-2.691-6-6s2.691-6 6-6h3c3.309 0 6 2.691 6 6S41.309 30 38 30M13 14h-3C4.486 14 0 18.486 0 24s4.486 10 10 10h3c5.514 0 10-4.486 10-10S18.514 14 13 14M13 30h-3c-3.309 0-6-2.691-6-6s2.691-6 6-6h3c3.309 0 6 2.691 6 6S16.309 30 13 30"></path><path fill="#42A5F5" d="M33,22H15c-1.104,0-2,0.896-2,2s0.896,2,2,2h18c1.104,0,2-0.896,2-2S34.104,22,33,22"></path>
</svg>`,Li=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#b39ddb" d="M30.6,44H17.4c-2,0-3.7-1.4-4-3.4L9,11h30l-4.5,29.6C34.2,42.6,32.5,44,30.6,44z"></path><path fill="#9575cd" d="M28 6L20 6 14 12 34 12z"></path><path fill="#7e57c2" d="M10,8h28c1.1,0,2,0.9,2,2v2H8v-2C8,8.9,8.9,8,10,8z"></path>
</svg>`;var Fv=O("<option> </option>"),Vv=O('<div class="empty-state svelte-25wvt7"><p>No devices added yet. Add a device to get started!</p></div>'),Bv=O('<div class="device-card svelte-25wvt7"><div class="device-header svelte-25wvt7"><div class="color-preview svelte-25wvt7"></div> <h3 class="svelte-25wvt7"> </h3> <!> <!></div> <!></div>'),jv=O("<!> Delete",1),$v=O("<!> <!>",1),Gv=O("<option> </option>"),Kv=O(`<select id="link-select" class="svelte-25wvt7"><option>None</option><!></select> <small class="link-help svelte-25wvt7">Link this device to follow another device's values</small>`,1),Uv=O('<p class="no-devices svelte-25wvt7">No compatible devices available to link</p>'),Hv=O('<label class="sync-control-item svelte-25wvt7"><input type="checkbox" class="svelte-25wvt7"/> <span class="svelte-25wvt7"> </span></label>'),zv=O('<div class="dialog-input-group svelte-25wvt7"><label class="checkbox-label svelte-25wvt7"><input type="checkbox" class="svelte-25wvt7"/> <span class="svelte-25wvt7">Mirror pan (invert pan values)</span></label> <small class="link-help svelte-25wvt7">Useful for moving heads facing each other</small></div>'),qv=O('<div class="dialog-input-group svelte-25wvt7"><label>Sync controls:</label> <div class="sync-controls-list svelte-25wvt7"></div> <small class="link-help svelte-25wvt7">Select which controls to sync from the linked device</small></div> <!>',1),Wv=O('<form id="device-settings-form" method="dialog"><div class="dialog-input-group svelte-25wvt7"><label for="name-input">Name:</label> <input id="name-input" type="text" placeholder="Device name" class="svelte-25wvt7"/> <small class="css-id-preview svelte-25wvt7"> </small></div> <div class="dialog-input-group svelte-25wvt7"><label for="channel-input">Starting channel (1-512):</label> <input id="channel-input" type="number" min="1" max="512"/> <small class="channel-range svelte-25wvt7"> </small></div> <div class="dialog-input-group svelte-25wvt7"><label for="link-select">Link to device:</label> <!></div> <!></form>'),Yv=O('<div class="devices-container svelte-25wvt7"><div class="add-device-section svelte-25wvt7"><select class="svelte-25wvt7"></select> <!></div> <div class="devices-list svelte-25wvt7"><!> <!></div> <!></div>');function Xv(r,e){yt(e,!0);let t=pe(e,"devices",31,()=>Ae([])),n=z("RGB"),i=null,a=z(null),o=z(""),c=z(1),l=z(null),u=z(null),f=z(!1);function d(I){C(a,I,!0),C(o,I.name,!0),C(c,I.startChannel+1),C(l,I.linkedTo||null,!0),C(u,I.syncedControls||null,!0),C(f,I.mirrorPan||!1,!0),requestAnimationFrame(()=>{i==null||i.showModal()})}function _(){i==null||i.close(),C(a,null),C(o,""),C(l,null),C(u,null),C(f,!1)}function m(){s(a)&&confirm(`Are you sure you want to remove "${s(a).name}"?`)&&(q(s(a).id),_())}function h(){var R;return(s(o).trim()||((R=s(a))==null?void 0:R.name)||"").toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}function y(){if(!s(a)||!v(s(a),s(c)-1))return;const I=Math.max(0,Math.min(511,s(c)-1)),R=s(o).trim()||s(a).name,re=R===s(a).name?s(a).cssId:null,H=new Qn(s(a).id,s(a).type,I,R,s(l),re,s(l)!==null?s(u):null,s(l)!==null?s(f):!1);if(H.defaultValues=[...s(a).defaultValues],s(l)!==null){const ee=t().find(se=>se.id===s(l));if(ee){const se=ho(ee.type,H.type,ee.defaultValues,H.defaultValues,s(u),s(f));H.defaultValues=se}}e.dmxController&&H.defaultValues.forEach((ee,se)=>{const we=H.startChannel+se;e.dmxController.setChannel(we,ee)}),t(t().map(ee=>ee.id===s(a).id?H:ee)),_()}function v(I,R){const re=Me[I.type].channels,H=R+re;if(H>512||R<0)return!1;for(let ee of t()){if(ee.id===I.id)continue;const se=Me[ee.type].channels,we=ee.startChannel,Ee=we+se;if(R<Ee&&H>we)return!1}return!0}function D(){try{const I=localStorage.getItem("dmx-devices");if(I){const R=JSON.parse(I);return{devices:R.devices.map(H=>{const ee=new Qn(H.id,H.type,H.startChannel,H.name,H.linkedTo,H.cssId,H.syncedControls||null,H.mirrorPan||!1);return ee.defaultValues=H.defaultValues||new Array(Me[H.type].channels).fill(0),ee}),nextId:R.nextId||1}}}catch(I){console.error("Failed to load from localStorage:",I)}return{devices:[],nextId:1}}const M=t().length===0?D():{devices:t(),nextId:null};t().length===0&&t(M.devices);const L=t().length>0?Math.max(...t().map(I=>I.id)):0;let F=z(Ae(Math.max(L+1,M.nextId||1)));xr(()=>{try{const I={devices:t().map(R=>({id:R.id,name:R.name,type:R.type,startChannel:R.startChannel,defaultValues:R.defaultValues,linkedTo:R.linkedTo,cssId:R.cssId,syncedControls:R.syncedControls,mirrorPan:R.mirrorPan})),nextId:s(F)};localStorage.setItem("dmx-devices",JSON.stringify(I))}catch(I){console.error("Failed to save to localStorage:",I)}});function E(){if(t().length===0)return 0;let I=0;return t().forEach(R=>{const re=R.startChannel+Me[R.type].channels;re>I&&(I=re)}),I>=512?0:I}function k(I=s(n)){const R=E(),re=new Qn(Zi(F),I,R);t([...t(),re])}function B(){t(t().map(I=>(I.defaultValues=I.defaultValues.map(()=>0),I)))}function q(I){t(t().map(R=>(R.linkedTo===I&&(R.linkedTo=null),R)).filter(R=>R.id!==I))}function ie(I,R,re){const H=new Qn(I.id,I.type,I.startChannel,I.name,I.linkedTo,I.cssId,I.syncedControls,I.mirrorPan);H.defaultValues=[...I.defaultValues],H.defaultValues[R]=re,t(t().map(ee=>ee.id===I.id?H:ee)),oe(H),te(H)}function oe(I){e.dmxController&&I.defaultValues.forEach((R,re)=>{const H=I.startChannel+re;e.dmxController.setChannel(H,R)})}function te(I){t(t().map(R=>{if(R.linkedTo===I.id){const re=new Qn(R.id,R.type,R.startChannel,R.name,R.linkedTo,R.cssId,R.syncedControls,R.mirrorPan),H=ho(I.type,R.type,I.defaultValues,R.defaultValues,R.syncedControls,R.mirrorPan);return re.defaultValues=H,oe(re),re}return R}))}function ae(I){return t().filter(R=>R.id!==I.id&&!R.isLinked()&&Sv(I.type,R.type)&&R.linkedTo!==I.id)}function ge(I){if(!I.linkedTo)return[];const R=t().find(re=>re.id===I.linkedTo);return R?Cv(R.type,I.type,I.syncedControls):[]}function me(){if(!s(l)||!s(a))return[];const I=t().find(R=>R.id===s(l));return I?Dv(I.type,s(a).type):[]}function ue(I){if(s(u)===null){const R=me();C(u,R.map(re=>re.controlName).filter(re=>re!==I),!0)}else s(u).includes(I)?C(u,s(u).filter(R=>R!==I),!0):C(u,[...s(u),I],!0)}function xe(I){return s(u)===null?!0:s(u).includes(I)}function Q(){return me().some(R=>R.controlName==="Pan/Tilt")}xr(()=>{e.dmxController&&t().forEach(I=>{oe(I)})});var V={addDevice:k,clearAllDeviceValues:B},$=Yv(),b=g($),x=g(b);Pe(x,21,()=>Object.entries(Me),qe,(I,R)=>{var re=ye(()=>fc(s(R),2));let H=()=>s(re)[0],ee=()=>s(re)[1];var se=Fv(),we=g(se),Ee={};Z(()=>{ne(we,ee().name),Ee!==(Ee=H())&&(se.value=(se.__value=H())??"")}),S(I,se)});var A=w(x,2);ze(A,{onclick:()=>k(s(n)),variant:"secondary",children:(I,R)=>{var re=rt("Add Device");S(I,re)},$$slots:{default:!0}});var N=w(b,2),T=g(N);{var P=I=>{var R=Vv();S(I,R)};de(T,I=>{t().length===0&&I(P)})}var G=w(T,2);Pe(G,17,t,I=>I.id,(I,R)=>{var re=Bv(),H=g(re),ee=g(H),se=w(ee,2),we=g(se),Ee=w(se,2);{var je=Ye=>{Tt(Ye,{get data(){return Ov}})};de(Ee,Ye=>{s(R).isLinked()&&Ye(je)})}var Ve=w(Ee,2);Ls(Ve,{get icon(){return $a},onclick:()=>d(s(R)),title:"Device settings",size:"small"});var Ie=w(H,2);{let Ye=ye(()=>ge(s(R)));aa(Ie,{get controls(){return Me[s(R).type].controls},get components(){return Me[s(R).type].components},get values(){return s(R).defaultValues},onChange:(Dt,Vt)=>ie(s(R),Dt,Vt),get disabledChannels(){return s(Ye)}})}Z(Ye=>{Rt(ee,`background-color: ${Ye??""}`),ne(we,s(R).name)},[()=>ln(s(R).type,s(R).defaultValues)]),S(I,re)});var K=w(N,2);{var X=I=>{Cr(I,{title:"Device",onclose:_,get dialogRef(){return i},set dialogRef(H){i=H},tools:H=>{ze(H,{onclick:m,variant:"secondary",children:(ee,se)=>{var we=jv(),Ee=he(we);dn(Ee,()=>Li),S(ee,we)},$$slots:{default:!0}})},buttons:H=>{var ee=$v(),se=he(ee);ze(se,{onclick:_,variant:"secondary",children:(Ee,je)=>{var Ve=rt("Cancel");S(Ee,Ve)},$$slots:{default:!0}});var we=w(se,2);{let Ee=ye(()=>!v(s(a),s(c)-1));ze(we,{type:"submit",form:"device-settings-form",variant:"primary",get disabled(){return s(Ee)},children:(je,Ve)=>{var Ie=rt("Save");S(je,Ie)},$$slots:{default:!0}})}S(H,ee)},children:(H,ee)=>{var se=Wv(),we=g(se),Ee=w(g(we),2),je=w(Ee,2),Ve=g(je),Ie=w(we,2),Ye=w(g(Ie),2);let Dt;var Vt=w(Ye,2),kr=g(Vt),Pr=w(Ie,2),Wn=w(g(Pr),2);{var j=ce=>{var J=Kv(),Ne=he(J),Te=g(Ne);Te.value=(Te.__value=null)??"";var Be=w(Te);Pe(Be,17,()=>ae(s(a)),qe,($e,Oe)=>{var Ue=Gv(),Qe=g(Ue),et={};Z(()=>{ne(Qe,`${s(Oe).name??""} (${Me[s(Oe).type].name??""})`),et!==(et=s(Oe).id)&&(Ue.value=(Ue.__value=s(Oe).id)??"")}),S($e,Ue)}),tt(Ne,()=>s(l),$e=>C(l,$e)),S(ce,J)},W=ce=>{var J=Uv();S(ce,J)};de(Wn,ce=>{ae(s(a)).length>0||s(a).isLinked()?ce(j):ce(W,!1)})}var ve=w(Pr,2);{var le=ce=>{var J=qv(),Ne=he(J),Te=w(g(Ne),2);Pe(Te,21,me,qe,(Oe,Ue)=>{var Qe=Hv(),et=g(Qe);et.__change=()=>ue(s(Ue).controlName);var vt=w(et,2),Bt=g(vt);Z(jt=>{Au(et,jt),ne(Bt,s(Ue).controlName)},[()=>xe(s(Ue).controlName)]),S(Oe,Qe)});var Be=w(Ne,2);{var $e=Oe=>{var Ue=zv(),Qe=g(Ue),et=g(Qe);ni(et,()=>s(f),vt=>C(f,vt)),S(Oe,Ue)};de(Be,Oe=>{Q()&&Oe($e)})}S(ce,J)};de(ve,ce=>{s(l)!==null&&ce(le)})}Z((ce,J)=>{ne(Ve,`#${ce??""}`),Dt=St(Ye,1,"svelte-25wvt7",null,Dt,J),ne(kr,`Device uses ${Me[s(a).type].channels??""} channels:
                ${s(c)??""}-${s(c)+Me[s(a).type].channels-1}`)},[h,()=>({valid:v(s(a),s(c)-1),invalid:!v(s(a),s(c)-1)})]),on("submit",se,ce=>{ce.preventDefault(),y()}),br(Ee,()=>s(o),ce=>C(o,ce)),br(Ye,()=>s(c),ce=>C(c,ce)),S(H,se)},$$slots:{tools:!0,buttons:!0,default:!0}})};de(K,I=>{s(a)&&I(X)})}return tt(x,()=>s(n),I=>C(n,I)),S(r,$),wt(V)}Pt(["change"]);var Jv=O('<div class="gradient-segment svelte-ctef3a"></div>'),Zv=O('<div><div class="keyframe-time svelte-ctef3a"> </div></div>'),Qv=O("<!> Delete",1),eh=O('<div class="timeline-container svelte-ctef3a"><div class="timeline svelte-ctef3a"><!> <!></div></div> <!>',1);function th(r,e){yt(e,!0);let t=pe(e,"animation",7),n=pe(e,"animationVersion",3,0),i=pe(e,"onUpdate",3,null),a=z(Ae([0,0,0])),o=z(null),c=z(null),l=z(null),u=z(null),f=z(800),d=z(null),_=z(0),m=z(0),h=z(!1),y=ye(()=>(n(),t()?t().keyframes:[])),v=ye(()=>{if(n(),!t()||t().keyframes.length<2)return[];const V=[],$=t().keyframes,b=$[0];if(b.time>0){const A=t().getKeyframeColor(b);V.push({left:0,width:b.time*s(f),gradient:A})}for(let A=0;A<$.length-1;A++){const N=$[A],T=$[A+1],P=t().getKeyframeColor(N),G=t().getKeyframeColor(T),K=N.time*s(f),X=(T.time-N.time)*s(f);V.push({left:K,width:X,gradient:`linear-gradient(to right, ${P}, ${G})`})}const x=$[$.length-1];if(x.time<1){const A=t().getKeyframeColor(x),N=x.time*s(f),T=(1-x.time)*s(f);V.push({left:N,width:T,gradient:A})}return V});function D(V){return n(),V.time*s(f)}function M(V,$=null){if(!t())return;C(o,V,!0);const b=t().keyframes[V];C(a,[...b.values],!0),C(l,$,!0),requestAnimationFrame(()=>{var x;(x=s(c))==null||x.showModal()})}function L(){var V;(V=s(c))==null||V.close(),C(o,null),C(l,null)}function F(){if(!t()||s(o)===null)return;const V=t().keyframes[s(o)];V.values=[...s(a)],e.animationLibrary.save(),i()&&i()()}function E(){if(!(!t()||s(o)===null)){if(t().keyframes.length<=2){alert("Animation must have at least 2 keyframes");return}confirm(`Delete keyframe at ${(t().keyframes[s(o)].time*100).toFixed(0)}%?`)&&(k(s(o)),L())}}function k(V){if(!t()||t().keyframes.length<=2){alert("Animation must have at least 2 keyframes");return}t().keyframes=t().keyframes.filter(($,b)=>b!==V),e.animationLibrary.save(),i()&&i()(),C(o,null)}function B(V){if(!t()||V.target.classList.contains("timeline-keyframe-marker")||V.target.classList.contains("keyframe-time")||V.target.closest(".timeline-keyframe-marker"))return;const b=V.currentTarget.getBoundingClientRect(),x=V.clientX-b.left,A=Math.max(0,Math.min(1,x/s(f))),N=Math.round(A*20)/20;if(t().keyframes.some(K=>Math.abs(K.time-N)<.001))return;const P=t().getValuesAtTime(N);t().addKeyframe(N,P),e.animationLibrary.save(),i()&&i()();const G=t().keyframes.findIndex(K=>Math.abs(K.time-N)<.001);G!==-1&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{const K=document.getElementById(`keyframe-${t().name}-${G}`);K&&M(G,K)})})}function q(V,$,b){V.preventDefault(),V.stopPropagation(),C(d,{keyframe:$,index:b},!0),C(_,V.clientX,!0),C(m,$.time,!0),C(h,!1),document.addEventListener("mousemove",ie),document.addEventListener("mouseup",oe)}function ie(V){if(!s(d)||!t())return;const $=V.clientX-s(_),b=$/s(f);let x=s(m)+b;x=Math.max(0,Math.min(1,x)),x=Math.round(x*100)/100;const A=t().keyframes[0],N=t().keyframes[t().keyframes.length-1];s(d).index!==0&&x===0&&A.time===0||s(d).index!==t().keyframes.length-1&&x===1&&N.time===1||(s(d).keyframe.time=x,t().keyframes.sort((T,P)=>T.time-P.time),s(d).index=t().keyframes.indexOf(s(d).keyframe),Math.abs($)>3&&C(h,!0),i()&&i()())}function oe(){s(d)&&t()&&e.animationLibrary.save(),C(d,null),document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",oe),setTimeout(()=>{C(h,!1)},10)}var te=eh(),ae=he(te),ge=g(ae);ge.__click=B;var me=g(ge);Pe(me,17,()=>s(v),qe,(V,$)=>{var b=Jv();Z(()=>Rt(b,`left: ${s($).left??""}px; width: ${s($).width??""}px; background: ${s($).gradient??""}`)),S(V,b)});var ue=w(me,2);Pe(ue,19,()=>s(y),(V,$)=>V.time+"-"+$+"-"+n(),(V,$,b)=>{var x=Zv();let A;x.__mousedown=P=>q(P,s($),s(b)),x.__click=P=>{P.stopPropagation(),s(h)||M(s(b),P.currentTarget)};var N=g(x),T=g(N);Z((P,G,K,X)=>{var I;Ft(x,"id",`keyframe-${t().name??""}-${s(b)??""}`),A=St(x,1,"timeline-keyframe-marker svelte-ctef3a",null,A,{dragging:((I=s(d))==null?void 0:I.keyframe)===s($)}),Rt(x,`left: ${P??""}px; --keyframe-color: ${G??""}; anchor-name: --keyframe-${t().name??""}-${s(b)??""}`),Ft(x,"title",`${K??""}%`),ne(T,`${X??""}%`)},[()=>D(s($)),()=>t().getKeyframeColor(s($)),()=>(s($).time*100).toFixed(0),()=>(s($).time*100).toFixed(0)]),S(V,x)}),fn(ge,V=>C(u,V),()=>s(u));var xe=w(ae,2);{var Q=V=>{{const $=A=>{{let N=ye(()=>t().keyframes.length<=2);ze(A,{onclick:E,variant:"secondary",get disabled(){return s(N)},children:(T,P)=>{var G=Qv(),K=he(G);dn(K,()=>Li),S(T,G)},$$slots:{default:!0}})}};let b=ye(()=>`keyframe-${t().name}-${s(o)}`),x=ye(()=>(t().keyframes[s(o)].time*100).toFixed(0));Cr(V,{anchored:!0,get anchorId(){return s(b)},showArrow:!0,lightDismiss:!0,onclose:L,get title(){return`Keyframe at ${s(x)??""}%`},get dialogRef(){return s(c)},set dialogRef(A){C(c,A,!0)},tools:$,children:(A,N)=>{{let T=ye(()=>t().getControlsForRendering());aa(A,Ku(()=>s(T),{onChange:F,get values(){return s(a)},set values(P){C(a,P,!0)}}))}},$$slots:{tools:!0,default:!0}})}};de(xe,V=>{s(l)&&t()&&s(o)!==null&&V(Q)})}Vu(ge,"clientWidth",V=>C(f,V)),S(r,te),wt()}Pt(["click","mousedown"]);var rh=O('<div class="empty-state svelte-nhkann"><p class="svelte-nhkann">No animations yet. Create one to get started!</p></div>'),nh=O('<div class="animation-card svelte-nhkann"><div class="animation-header svelte-nhkann"><div class="animation-info svelte-nhkann"><h3 class="svelte-nhkann"> </h3> <div class="badges svelte-nhkann"><div class="target-badge svelte-nhkann"> </div></div></div> <!></div> <!></div>'),ih=O("<!> <!>",1),ah=O("<option disabled>ââââââââââ</option>"),sh=O("<option> </option>"),oh=O('<form id="new-animation-form" method="dialog"><div class="dialog-input-group"><label for="animation-name">Animation Name:</label> <input id="animation-name" type="text" placeholder="e.g., rainbow, pulse, sweep"/> <small class="css-preview"> </small></div> <div class="dialog-input-group"><label for="animation-target">Target:</label> <select id="animation-target" class="animation-target-select"></select> <small class="help-text svelte-nhkann">Select a specific control or entire device type</small></div></form>'),lh=O("<!> Delete",1),ch=O("<!> <!>",1),uh=O('<form id="edit-animation-form" method="dialog"><div class="dialog-input-group"><label for="edit-animation-name">Name:</label> <input id="edit-animation-name" type="text" placeholder="Animation name"/> <small class="css-preview"> </small></div></form>'),dh=O('<div class="animations-view svelte-nhkann"><div class="add-animation-section svelte-nhkann"><!></div> <div class="animations-list svelte-nhkann"><!></div></div> <!> <!>',1);function fh(r,e){yt(e,!0),pe(e,"devices",19,()=>[]);let t=z(Ae([])),n=null,i=z(""),a=z("RGB|all"),o=null,c=z(null),l=z(""),u=z(0);function f(){if(C(t,e.animationLibrary.getAll(),!0),s(c)){const Q=s(t).find(V=>V.name===s(c).name);Q?C(c,Q,!0):C(c,null)}}Hn(()=>{f()});function d(){C(i,""),C(a,"control|Color"),n==null||n.showModal()}function _(){const Q=[],V=new Set;for(const b of Object.values(Me))for(const x of b.controls)V.add(x.name);const $=Array.from(V).sort();for(const b of $)Q.push({type:"control",value:`control|${b}`,label:b});Q.push({type:"separator"});for(const[b,x]of Object.entries(Me))Q.push({type:"device",value:`device|${b}`,label:x.name});return Q}function m(Q){const V=Q.split("|"),$=V[0];if($==="control"){const b=V[1];return{controls:[b],displayName:b}}else if($==="device"){const b=V[1],x=Me[b];return{controls:x.controls.map(N=>N.name),displayName:x.name}}return{controls:["Color"],displayName:"Color"}}function h(){if(!s(i).trim())return;const Q=m(s(a)),{controls:V,displayName:$}=Q,b=new Da(s(i).trim(),null,[],null,V,$),x=b.getNumChannels(),A=new Array(x).fill(0);b.addKeyframe(0,[...A]),b.addKeyframe(1,[...A]),e.animationLibrary.add(b),f(),n==null||n.close()}function y(Q){C(c,Q,!0),C(l,Q.name,!0),requestAnimationFrame(()=>{o==null||o.showModal()})}function v(){o==null||o.close(),C(c,null),C(l,"")}function D(){!s(c)||!s(l).trim()||(s(c).name,s(c).name=s(l).trim(),s(c).updateCSSName(),e.animationLibrary.save(),f(),v())}function M(){return s(i).trim()?s(i).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):""}function L(){return s(l).trim()?s(l).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):""}function F(){s(c)&&confirm(`Are you sure you want to delete "${s(c).name}"?`)&&(e.animationLibrary.remove(s(c).name),f(),v())}function E(){Zi(u)}var k=dh(),B=he(k),q=g(B),ie=g(q);ze(ie,{onclick:d,variant:"secondary",children:(Q,V)=>{var $=rt("Add Animation");S(Q,$)},$$slots:{default:!0}});var oe=w(q,2),te=g(oe);{var ae=Q=>{var V=rh();S(Q,V)},ge=Q=>{var V=it(),$=he(V);Pe($,17,()=>s(t),b=>b.name,(b,x)=>{var A=nh(),N=g(A),T=g(N),P=g(T),G=g(P),K=w(P,2),X=g(K),I=g(X),R=w(T,2);Ls(R,{get icon(){return $a},onclick:()=>y(s(x)),title:"Edit animation",size:"small"});var re=w(N,2);th(re,{get animation(){return s(x)},get animationLibrary(){return e.animationLibrary},get animationVersion(){return s(u)},onUpdate:E}),Z(H=>{ne(G,s(x).name),ne(I,H)},[()=>s(x).getDisplayName()]),S(b,A)}),S(Q,V)};de(te,Q=>{s(t).length===0?Q(ae):Q(ge,!1)})}var me=w(B,2);Cr(me,{title:"Create New Animation",onclose:()=>n==null?void 0:n.close(),get dialogRef(){return n},set dialogRef(V){n=V},buttons:V=>{var $=ih(),b=he($);ze(b,{type:"button",onclick:()=>n==null?void 0:n.close(),variant:"secondary",children:(A,N)=>{var T=rt("Cancel");S(A,T)},$$slots:{default:!0}});var x=w(b,2);ze(x,{type:"submit",form:"new-animation-form",variant:"primary",children:(A,N)=>{var T=rt("Create");S(A,T)},$$slots:{default:!0}}),S(V,$)},children:(V,$)=>{var b=oh(),x=g(b),A=w(g(x),2);Qi(A,!0);var N=w(A,2),T=g(N),P=w(x,2),G=w(g(P),2);Pe(G,21,_,qe,(K,X)=>{var I=it(),R=he(I);{var re=ee=>{var se=ah();S(ee,se)},H=ee=>{var se=sh(),we=g(se),Ee={};Z(()=>{ne(we,s(X).label),Ee!==(Ee=s(X).value)&&(se.value=(se.__value=s(X).value)??"")}),S(ee,se)};de(R,ee=>{s(X).type==="separator"?ee(re):ee(H,!1)})}S(K,I)}),Z(K=>ne(T,`@keyframes ${K??""}`),[M]),on("submit",b,K=>{K.preventDefault(),h()}),br(A,()=>s(i),K=>C(i,K)),tt(G,()=>s(a),K=>C(a,K)),S(V,b)},$$slots:{buttons:!0,default:!0}});var ue=w(me,2);{var xe=Q=>{Cr(Q,{title:"Animation",onclose:v,get dialogRef(){return o},set dialogRef(b){o=b},tools:b=>{ze(b,{onclick:F,variant:"secondary",children:(x,A)=>{var N=lh(),T=he(N);dn(T,()=>Li),S(x,N)},$$slots:{default:!0}})},buttons:b=>{var x=ch(),A=he(x);ze(A,{onclick:v,variant:"secondary",children:(T,P)=>{var G=rt("Cancel");S(T,G)},$$slots:{default:!0}});var N=w(A,2);ze(N,{type:"submit",form:"edit-animation-form",variant:"primary",children:(T,P)=>{var G=rt("Save");S(T,G)},$$slots:{default:!0}}),S(b,x)},children:(b,x)=>{var A=uh(),N=g(A),T=w(g(N),2);Qi(T,!0);var P=w(T,2),G=g(P);Z(K=>ne(G,`@keyframes ${K??""}`),[L]),on("submit",A,K=>{K.preventDefault(),D()}),br(T,()=>s(l),K=>C(l,K)),S(b,A)},$$slots:{tools:!0,buttons:!0,default:!0}})};de(ue,Q=>{s(c)&&Q(xe)})}S(r,k),wt()}var vh=O('<div class="empty-state svelte-an69h5"><p class="svelte-an69h5">No inputs detected yet. Start listening to detect inputs!</p></div>'),hh=O('<div class="input-color-badge svelte-an69h5"></div>'),ph=O('<div class="input-card svelte-an69h5"><!> <div class="input-header svelte-an69h5"><div class="input-name svelte-an69h5"> </div> <div class="input-device-name svelte-an69h5"> </div></div> <div class="input-actions svelte-an69h5"><button class="edit-button svelte-an69h5" title="Rename input"><!></button></div></div>'),mh=O("<!> Delete",1),_h=O("<!> <!>",1),gh=O('<code class="css-id svelte-an69h5"> </code> <code class="css-id svelte-an69h5"> </code>',1),yh=O('<code class="css-id svelte-an69h5"> </code>'),wh=O('<form id="edit-input-form"><div class="dialog-input-group svelte-an69h5"><label for="input-name">Name:</label> <input id="input-name" type="text" placeholder="Input name" class="svelte-an69h5"/> <div class="css-identifiers svelte-an69h5"><!></div></div></form>'),bh=O('<div class="inputs-view svelte-an69h5"><div class="listen-section svelte-an69h5"><!></div> <div class="inputs-grid svelte-an69h5"><!></div></div> <!>',1);function Sh(r,e){yt(e,!0);let t=z(!1),n=z(Ae([])),i=z(null),a=z(""),o=null,c=[];function l(){C(t,!0);const b=e.inputController.getInputDevices();for(const x of b){const A=N=>{u({deviceId:x.id,controlId:N.controlId,type:N.velocity!==void 0?"trigger":"change",device:x})};x.on("trigger",A),x.on("change",A),c.push({device:x,event:"trigger",handler:A}),c.push({device:x,event:"change",handler:A})}e.inputController.on("deviceadded",f)}function u(b){if(!s(t))return;const{deviceId:x,controlId:A,device:N}=b;if(!s(n).find(P=>P.inputDeviceId===x&&P.inputControlId===A)){const P=_((N==null?void 0:N.name)||x,A),G=(N==null?void 0:N.type)==="hid"&&N.id!=="keyboard",K=new Bn({name:P,mode:"input",inputDeviceId:x,inputControlId:A,inputDeviceName:(N==null?void 0:N.name)||x,color:G?void 0:null});if(e.mappingLibrary.add(K),k(),G&&A.startsWith("button-")){const X=parseInt(A.replace("button-",""));if(!isNaN(X)&&X>=0){const I=e.inputController.inputDeviceManager.streamDeckManager,R=x;I.setButtonColor(R,X,K.color).catch(re=>{console.warn(`Could not set button ${X} color:`,re)})}}}}function f(b){if(!s(t))return;const x=A=>{u({deviceId:b.id,controlId:A.controlId,type:A.velocity!==void 0?"trigger":"change",device:b})};b.on("trigger",x),b.on("change",x),c.push({device:b,event:"trigger",handler:x}),c.push({device:b,event:"change",handler:x})}function d(){C(t,!1);for(const{device:b,event:x,handler:A}of c)b.off(x,A);c=[],e.inputController.off("deviceadded",f)}function _(b,x){if(x.startsWith("note-")){const A=x.replace("note-","");return`${b} Note ${A}`}else if(x.startsWith("control-")||x.startsWith("cc-")){const A=x.replace("control-","").replace("cc-","");return`${b} Control ${A}`}else if(x.startsWith("button-")){const A=x.replace("button-","");return`${b} Button ${A}`}else if(x.startsWith("key-")){const A=x.replace("key-","");return`Keyboard ${A.replace("Key","").replace("Digit","")||A}`}else return`${b} ${x}`}function m(b){C(i,b,!0),C(a,b.name,!0),requestAnimationFrame(()=>{o==null||o.showModal()})}function h(){if(!s(i)||!s(a).trim())return;const b=e.mappingLibrary.get(s(i).id);b&&(b.name=s(a).trim(),b.updateCSSIdentifiers(),e.mappingLibrary.update(b),k()),v()}function y(){v()}function v(){o==null||o.close(),C(i,null),C(a,"")}function D(){return s(a).trim()?`--${s(a).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}`:"--"}function M(){return s(a).trim()?`${s(a).toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_down`:""}function L(){return s(a).trim()?`${s(a).toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_up`:""}async function F(){s(i)&&confirm(`Are you sure you want to delete "${s(i).name}"?`)&&(await E(s(i).id),v())}async function E(b){const x=e.mappingLibrary.get(b);if(!x)return;const A=e.inputController.getInputDevice(x.inputDeviceId);if((A==null?void 0:A.type)==="hid"&&A.id!=="keyboard"&&x.inputControlId.startsWith("button-")){const N=parseInt(x.inputControlId.replace("button-",""));if(!isNaN(N)&&N>=0){const T=e.inputController.inputDeviceManager.streamDeckManager,P=x.inputDeviceId;await T.clearButtonColor(P,N)}}e.mappingLibrary.remove(b),k()}function k(){C(n,e.mappingLibrary.getAll().filter(b=>b.mode==="input"),!0)}async function B(){const b=e.inputController.inputDeviceManager.streamDeckManager;if(b.getConnectedDevices().length!==0)for(const A of s(n)){const N=e.inputController.getInputDevice(A.inputDeviceId);if((N==null?void 0:N.type)==="hid"&&N.id!=="keyboard"&&A.inputControlId.startsWith("button-")){const T=parseInt(A.inputControlId.replace("button-",""));if(!isNaN(T)&&T>=0){const P=A.inputDeviceId;await b.setButtonColor(P,T,A.color)}}}}Hn(()=>{k(),e.inputController.on("deviceadded",b=>{b.type==="hid"&&setTimeout(()=>B(),500)}),setTimeout(()=>B(),1e3)}),Ca(()=>{d()});var q=bh(),ie=he(q),oe=g(ie),te=g(oe);{var ae=b=>{ze(b,{onclick:d,variant:"primary",pulsating:!0,children:(x,A)=>{var N=rt("Stop Listening");S(x,N)},$$slots:{default:!0}})},ge=b=>{ze(b,{onclick:l,variant:"secondary",children:(x,A)=>{var N=rt("Start Listening");S(x,N)},$$slots:{default:!0}})};de(te,b=>{s(t)?b(ae):b(ge,!1)})}var me=w(oe,2),ue=g(me);{var xe=b=>{var x=vh();S(b,x)},Q=b=>{var x=it(),A=he(x);Pe(A,17,()=>s(n),N=>N.id,(N,T)=>{var P=ph(),G=g(P);{var K=Ee=>{var je=hh();Z(()=>Rt(je,`background-color: ${s(T).color??""}`)),S(Ee,je)};de(G,Ee=>{s(T).color&&Ee(K)})}var X=w(G,2),I=g(X),R=g(I),re=w(I,2),H=g(re),ee=w(X,2),se=g(ee);se.__click=()=>m(s(T));var we=g(se);dn(we,()=>$a),Z(()=>{ne(R,s(T).name),ne(H,s(T).inputDeviceName||s(T).inputDeviceId)}),S(N,P)}),S(b,x)};de(ue,b=>{s(n).length===0?b(xe):b(Q,!1)})}var V=w(ie,2);{var $=b=>{Cr(b,{title:"Input",onclose:v,get dialogRef(){return o},set dialogRef(N){o=N},tools:N=>{ze(N,{onclick:F,variant:"secondary",children:(T,P)=>{var G=mh(),K=he(G);dn(K,()=>Li),S(T,G)},$$slots:{default:!0}})},buttons:N=>{var T=_h(),P=he(T);ze(P,{onclick:y,variant:"secondary",children:(K,X)=>{var I=rt("Cancel");S(K,I)},$$slots:{default:!0}});var G=w(P,2);ze(G,{type:"submit",form:"edit-input-form",variant:"primary",children:(K,X)=>{var I=rt("Save");S(K,I)},$$slots:{default:!0}}),S(N,T)},children:(N,T)=>{var P=wh(),G=g(P),K=w(g(G),2);K.__keydown=H=>{H.key==="Enter"&&h(),H.key==="Escape"&&y()},Qi(K,!0);var X=w(K,2),I=g(X);{var R=H=>{var ee=gh(),se=he(ee),we=g(se),Ee=w(se,2),je=g(Ee);Z((Ve,Ie)=>{ne(we,`.${Ve??""}`),ne(je,`.${Ie??""}`)},[M,L]),S(H,ee)},re=H=>{var ee=yh(),se=g(ee);Z(we=>ne(se,we),[D]),S(H,ee)};de(I,H=>{s(i).isButtonInput()?H(R):H(re,!1)})}on("submit",P,H=>{H.preventDefault(),h()}),br(K,()=>s(a),H=>C(a,H)),S(N,P)},$$slots:{tools:!0,buttons:!0,default:!0}})};de(V,b=>{s(i)&&b($)})}S(r,q),wt()}Pt(["click","keydown"]);var Ch=O('<p class="svelte-17ww3d9">No inputs available. Go to the Inputs tab to detect and save inputs first.</p>'),Dh=O('<p class="svelte-17ww3d9">No animations available. Go to the Animations tab to create animations first.</p>'),xh=O('<p class="svelte-17ww3d9">No devices available. Go to the Devices tab to add devices first.</p>'),Eh=O('<div class="empty-state svelte-17ww3d9"><!> <!> <!></div>'),Ih=O('<div class="empty-state svelte-17ww3d9"><p class="svelte-17ww3d9">No triggers created yet. Click Add Trigger to create one!</p></div>'),kh=O('<div class="trigger-card svelte-17ww3d9"><div class="trigger-content svelte-17ww3d9"><span class="trigger-text svelte-17ww3d9"> </span> <!></div></div>'),Ph=O("<!> <!>",1),Mh=O("<option> </option>"),Lh=O("<option> </option>"),Ah=O("<option> </option>"),Nh=O("<option> </option>"),Th=O("<option> </option>"),Rh=O("<option> </option>"),Oh=O('<div class="dialog-input-group"><label for="trigger-animation">Animation:</label> <select id="trigger-animation"></select></div> <div class="dialog-input-group"><label for="trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="trigger-easing">Easing:</label> <select id="trigger-easing"></select></div>',1),Fh=O('<div class="dialog-input-group"><label>Set Channel Values:</label> <!></div>'),Vh=O('<form id="manual-trigger-form" method="dialog"><div class="trigger-columns svelte-17ww3d9"><div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="trigger-input">Input:</label> <select id="trigger-input"></select></div> <div class="dialog-input-group"><label for="trigger-type">Type:</label> <select id="trigger-type"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="trigger-action-type">Action:</label> <select id="trigger-action-type"></select></div> <div class="dialog-input-group"><label for="trigger-device">Device:</label> <select id="trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><!></div></div></form>'),Bh=O("<!> <!>",1),jh=O("<option> </option>"),$h=O("<option> </option>"),Gh=O("<option> </option>"),Kh=O('<form id="automatic-trigger-form" method="dialog"><div class="trigger-columns svelte-17ww3d9"><div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="auto-trigger-device">Device:</label> <select id="auto-trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="auto-trigger-animation">Animation:</label> <select id="auto-trigger-animation"></select></div> <div class="dialog-input-group"><label for="auto-trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="auto-trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="auto-trigger-easing">Easing:</label> <select id="auto-trigger-easing"></select></div></div></div></form>'),Uh=O("<!> Delete",1),Hh=O("<!> <!>",1),zh=O("<option> </option>"),qh=O("<option> </option>"),Wh=O("<option> </option>"),Yh=O("<option> </option>"),Xh=O("<option> </option>"),Jh=O('<div class="dialog-input-group"><label for="edit-trigger-animation">Animation:</label> <select id="edit-trigger-animation"></select></div> <div class="dialog-input-group"><label for="edit-trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="edit-trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="edit-trigger-easing">Easing:</label> <select id="edit-trigger-easing"></select></div>',1),Zh=O('<div class="dialog-input-group"><label>Set Channel Values:</label> <!></div>'),Qh=O('<div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-type">Type:</label> <select id="edit-trigger-type"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-action-type">Action:</label> <select id="edit-trigger-action-type"></select></div> <div class="dialog-input-group"><label for="edit-trigger-device">Device:</label> <select id="edit-trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><!></div>',1),ep=O("<option> </option>"),tp=O("<option> </option>"),rp=O("<option> </option>"),np=O('<div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-device">Device:</label> <select id="edit-trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-animation">Animation:</label> <select id="edit-trigger-animation"></select></div> <div class="dialog-input-group"><label for="edit-trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="edit-trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="edit-trigger-easing">Easing:</label> <select id="edit-trigger-easing"></select></div></div>',1),ip=O('<form id="edit-trigger-form" method="dialog"><div class="trigger-columns svelte-17ww3d9"><!></div></form>'),ap=O('<div class="triggers-view svelte-17ww3d9"><div class="add-trigger-section svelte-17ww3d9"><!> <!></div> <div class="triggers-list svelte-17ww3d9"><!></div></div> <!> <!> <!>',1);function sp(r,e){yt(e,!0);let t=pe(e,"devices",19,()=>[]),n=z(Ae([])),i=z(Ae([])),a=z(Ae([])),o=z(null),c=z(null),l=z(null),u=z("pressed"),f=z("animation"),d=z(null),_=z(null),m=z(1e3),h=z(!1),y=z("linear"),v=z(Ae({})),D=z(null),M=z(null),L=z(null),F=z("pressed"),E=z("animation"),k=z(null),B=z(null),q=z(1e3),ie=z(!1),oe=z("linear"),te=z(Ae({}));const ae=[{value:"pressed",label:"Pressed"},{value:"not-pressed",label:"Not Pressed"}],ge=[{value:"animation",label:"Run Animation"},{value:"setValue",label:"Set values"}],me=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier(0.4, 0.0, 0.2, 1)","cubic-bezier(0.68, -0.55, 0.265, 1.55)"];function ue(){C(n,e.mappingLibrary.getAll().filter(j=>j.mode==="input"),!0),C(i,e.animationLibrary.getAll(),!0),C(a,e.mappingLibrary.getAll().filter(j=>j.mode==="trigger"),!0)}function xe(){ue()}function Q(){var j,W,ve,le;C(l,((j=s(n)[0])==null?void 0:j.id)||null,!0),C(u,"pressed"),C(f,"animation"),C(d,((W=t()[0])==null?void 0:W.id)||null,!0),C(_,((ve=s(i)[0])==null?void 0:ve.name)||null,!0),C(m,1e3),C(h,!1),C(y,"linear"),C(v,{},!0),(le=s(o))==null||le.showModal()}function V(){var j,W;C(d,((j=t()[0])==null?void 0:j.id)||null,!0),C(_,((W=s(i)[0])==null?void 0:W.name)||null,!0),C(m,1e3),C(h,!1),C(y,"linear"),requestAnimationFrame(()=>{var ve;(ve=s(c))==null||ve.showModal()})}function $(){var Ne;if(!s(l)||!s(d)||s(f)==="animation"&&!s(_))return;const j=e.mappingLibrary.get(s(l));if(!j)return;const W=j.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),ve=s(u)==="pressed"?"down":"up",le=`${W}-${ve}`,ce=s(f)==="animation"?`${j.name}_${s(u)}_${s(_)}`:`${j.name}_${s(u)}_setValue`,J=new Bn({name:ce,mode:"trigger",triggerType:s(u),actionType:s(f),inputDeviceId:j.inputDeviceId,inputControlId:j.inputControlId,animationName:s(f)==="animation"?s(_):null,targetDeviceIds:s(f)==="animation"?[s(d)]:[],duration:s(m),easing:s(y),iterations:s(h)?"infinite":1,setValueDeviceId:s(f)==="setValue"?s(d):null,channelValues:s(f)==="setValue"?{...s(v)}:{},cssClassName:le});e.mappingLibrary.add(J),ue(),(Ne=s(o))==null||Ne.close()}function b(){var W;if(!s(d)||!s(_))return;const j=new Bn({name:`always_${s(_)}`,mode:"trigger",triggerType:"always",inputDeviceId:null,inputControlId:null,animationName:s(_),targetDeviceIds:[s(d)],duration:s(m),easing:s(y),iterations:s(h)?"infinite":1,cssClassName:"always"});e.mappingLibrary.add(j),ue(),(W=s(c))==null||W.close()}function x(j){C(M,j,!0),C(L,j.inputDeviceId+"_"+j.inputControlId),C(F,j.triggerType,!0),C(E,j.actionType||"animation",!0),j.actionType==="setValue"?(C(k,j.setValueDeviceId,!0),C(te,{...j.channelValues},!0)):(C(k,j.targetDeviceIds[0],!0),C(B,j.animationName,!0)),C(q,j.duration,!0),C(ie,j.iterations==="infinite"),C(oe,j.easing,!0),requestAnimationFrame(()=>{var W;(W=s(D))==null||W.showModal()})}function A(){var j;(j=s(D))==null||j.close(),C(M,null)}function N(){if(s(M)){if(s(M).triggerType==="always")s(M).targetDeviceIds=[s(k)],s(M).animationName=s(B),s(M).duration=s(q),s(M).easing=s(oe),s(M).iterations=s(ie)?"infinite":1,s(M).name=`always_${s(B)}`;else{const j=s(n).find(ce=>ce.inputDeviceId===s(M).inputDeviceId&&ce.inputControlId===s(M).inputControlId);if(!j)return;const W=j.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),ve=s(F)==="pressed"?"down":"up",le=`${W}-${ve}`;s(M).triggerType=s(F),s(M).actionType=s(E),s(E)==="animation"?(s(M).animationName=s(B),s(M).targetDeviceIds=[s(k)],s(M).setValueDeviceId=null,s(M).channelValues={},s(M).name=`${j.name}_${s(F)}_${s(B)}`):(s(M).setValueDeviceId=s(k),s(M).channelValues={...s(te)},s(M).animationName=null,s(M).targetDeviceIds=[],s(M).name=`${j.name}_${s(F)}_setValue`),s(M).duration=s(q),s(M).easing=s(oe),s(M).iterations=s(ie)?"infinite":1,s(M).cssClassName=le}e.mappingLibrary.save(),ue(),A()}}function T(){s(M)&&confirm("Are you sure you want to delete this trigger?")&&(e.mappingLibrary.remove(s(M).id),ue(),A())}function P(j,W){const ve=s(n).find(le=>le.inputDeviceId===j&&le.inputControlId===W);return(ve==null?void 0:ve.name)||`${j}_${W}`}function G(j){const W=t().find(ve=>ve.id===j);return(W==null?void 0:W.name)||j}function K(j){const W=s(i).find(ve=>ve.cssName===j);return(W==null?void 0:W.name)||j}function X(j){const W=j.actionType||"animation";if(j.triggerType==="always"){const ce=G(j.targetDeviceIds[0]);return`Always â ${K(j.animationName)} â ${ce}`}const ve=P(j.inputDeviceId,j.inputControlId),le=j.triggerType==="pressed"?"Pressed":"Not Pressed";if(W==="animation"){const ce=G(j.targetDeviceIds[0]),J=K(j.animationName);return`${ve} â ${le} â ${J} â ${ce}`}else{const ce=G(j.setValueDeviceId),J=Object.keys(j.channelValues||{}).length;return`${ve} â ${le} â Set ${J} channel(s) â ${ce}`}}function I(j,W,ve){const le={...j};return ve===""||ve===null||ve===void 0?delete le[W]:le[W]=Math.max(0,Math.min(255,parseInt(ve)||0)),le}function R(j,W){const ve=t().find(J=>J.id===j);if(!ve)return[];const le=Me[ve.type].channels,ce=new Array(le).fill(0);for(let J=0;J<le;J++)W[J]!==void 0&&(ce[J]=W[J]);return ce}function re(j,W){C(v,I(s(v),j,W),!0)}function H(j,W){C(te,I(s(te),j,W),!0)}Hn(()=>{ue(),e.mappingLibrary.on("changed",xe)}),Ca(()=>{e.mappingLibrary.off("changed",xe)});var ee=ap(),se=he(ee),we=g(se),Ee=g(we);{let j=ye(()=>s(n).length===0||s(i).length===0||t().length===0);ze(Ee,{onclick:Q,variant:"secondary",get disabled(){return s(j)},children:(W,ve)=>{var le=rt("Add Manual Trigger");S(W,le)},$$slots:{default:!0}})}var je=w(Ee,2);{let j=ye(()=>s(i).length===0||t().length===0);ze(je,{onclick:V,variant:"secondary",get disabled(){return s(j)},children:(W,ve)=>{var le=rt("Add Automatic Trigger");S(W,le)},$$slots:{default:!0}})}var Ve=w(we,2),Ie=g(Ve);{var Ye=j=>{var W=Eh(),ve=g(W);{var le=Be=>{var $e=Ch();S(Be,$e)};de(ve,Be=>{s(n).length===0&&Be(le)})}var ce=w(ve,2);{var J=Be=>{var $e=Dh();S(Be,$e)};de(ce,Be=>{s(i).length===0&&Be(J)})}var Ne=w(ce,2);{var Te=Be=>{var $e=xh();S(Be,$e)};de(Ne,Be=>{t().length===0&&Be(Te)})}S(j,W)},Dt=j=>{var W=it(),ve=he(W);{var le=J=>{var Ne=Ih();S(J,Ne)},ce=J=>{var Ne=it(),Te=he(Ne);Pe(Te,17,()=>s(a),Be=>Be.id,(Be,$e)=>{var Oe=kh(),Ue=g(Oe),Qe=g(Ue),et=g(Qe),vt=w(Qe,2);Ls(vt,{get icon(){return $a},onclick:()=>x(s($e)),title:"Edit trigger",size:"small"}),Z(Bt=>ne(et,Bt),[()=>X(s($e))]),S(Be,Oe)}),S(J,Ne)};de(ve,J=>{s(a).length===0?J(le):J(ce,!1)},!0)}S(j,W)};de(Ie,j=>{s(n).length===0||s(i).length===0||t().length===0?j(Ye):j(Dt,!1)})}var Vt=w(se,2);Cr(Vt,{title:"Create Manual Trigger",onclose:()=>{var W;return(W=s(o))==null?void 0:W.close()},get dialogRef(){return s(o)},set dialogRef(W){C(o,W,!0)},buttons:W=>{var ve=Ph(),le=he(ve);ze(le,{type:"button",onclick:()=>{var J;return(J=s(o))==null?void 0:J.close()},variant:"secondary",children:(J,Ne)=>{var Te=rt("Cancel");S(J,Te)},$$slots:{default:!0}});var ce=w(le,2);ze(ce,{type:"submit",form:"manual-trigger-form",variant:"primary",children:(J,Ne)=>{var Te=rt("Create");S(J,Te)},$$slots:{default:!0}}),S(W,ve)},children:(W,ve)=>{var le=Vh(),ce=g(le),J=g(ce),Ne=g(J),Te=w(g(Ne),2);Pe(Te,21,()=>s(n),qe,(fe,be)=>{var _e=Mh(),Xe=g(_e),Le={};Z(()=>{ne(Xe,s(be).name),Le!==(Le=s(be).id)&&(_e.value=(_e.__value=s(be).id)??"")}),S(fe,_e)});var Be=w(Ne,2),$e=w(g(Be),2);Pe($e,21,()=>ae,qe,(fe,be)=>{var _e=Lh(),Xe=g(_e),Le={};Z(()=>{ne(Xe,s(be).label),Le!==(Le=s(be).value)&&(_e.value=(_e.__value=s(be).value)??"")}),S(fe,_e)});var Oe=w(J,2),Ue=g(Oe),Qe=w(g(Ue),2);Pe(Qe,21,()=>ge,qe,(fe,be)=>{var _e=Ah(),Xe=g(_e),Le={};Z(()=>{ne(Xe,s(be).label),Le!==(Le=s(be).value)&&(_e.value=(_e.__value=s(be).value)??"")}),S(fe,_e)});var et=w(Ue,2),vt=w(g(et),2);Pe(vt,21,t,qe,(fe,be)=>{var _e=Nh(),Xe=g(_e),Le={};Z(()=>{ne(Xe,s(be).name),Le!==(Le=s(be).id)&&(_e.value=(_e.__value=s(be).id)??"")}),S(fe,_e)});var Bt=w(Oe,2),jt=g(Bt);{var pr=fe=>{var be=Oh(),_e=he(be),Xe=w(g(_e),2);Pe(Xe,21,()=>s(i),qe,(ot,Yt)=>{var nt=Th(),Mr=g(nt),Xt={};Z(()=>{ne(Mr,s(Yt).name),Xt!==(Xt=s(Yt).cssName)&&(nt.value=(nt.__value=s(Yt).cssName)??"")}),S(ot,nt)});var Le=w(_e,2),Ge=w(g(Le),2),Fe=g(Ge),Se=w(Fe,2),Ke=g(Se),Ce=g(Ke),ht=w(Le,2),Ze=w(g(ht),2);Pe(Ze,21,()=>me,qe,(ot,Yt)=>{var nt=Rh(),Mr=g(nt),Xt={};Z(()=>{ne(Mr,s(Yt)),Xt!==(Xt=s(Yt))&&(nt.value=(nt.__value=s(Yt))??"")}),S(ot,nt)}),Z(()=>{Fe.disabled=!s(_),Ce.disabled=!s(_),Ze.disabled=!s(_)}),tt(Xe,()=>s(_),ot=>C(_,ot)),br(Fe,()=>s(m),ot=>C(m,ot)),ni(Ce,()=>s(h),ot=>C(h,ot)),tt(Ze,()=>s(y),ot=>C(y,ot)),S(fe,be)},tr=fe=>{var be=it(),_e=he(be);{var Xe=Le=>{const Ge=ye(()=>t().find(Ce=>Ce.id===s(d)));var Fe=it(),Se=he(Fe);{var Ke=Ce=>{var ht=Fh(),Ze=w(g(ht),2);{let ot=ye(()=>R(s(d),s(v)));aa(Ze,{get controls(){return Me[s(Ge).type].controls},get components(){return Me[s(Ge).type].components},get values(){return s(ot)},onChange:re})}S(Ce,ht)};de(Se,Ce=>{s(Ge)&&Ce(Ke)})}S(Le,Fe)};de(_e,Le=>{s(f)==="setValue"&&s(d)&&Le(Xe)},!0)}S(fe,be)};de(jt,fe=>{s(f)==="animation"?fe(pr):fe(tr,!1)})}on("submit",le,fe=>{fe.preventDefault(),$()}),tt(Te,()=>s(l),fe=>C(l,fe)),tt($e,()=>s(u),fe=>C(u,fe)),tt(Qe,()=>s(f),fe=>C(f,fe)),tt(vt,()=>s(d),fe=>C(d,fe)),S(W,le)},$$slots:{buttons:!0,default:!0}});var kr=w(Vt,2);Cr(kr,{title:"Create Automatic Trigger",onclose:()=>{var W;return(W=s(c))==null?void 0:W.close()},get dialogRef(){return s(c)},set dialogRef(W){C(c,W,!0)},buttons:W=>{var ve=Bh(),le=he(ve);ze(le,{type:"button",onclick:()=>{var J;return(J=s(c))==null?void 0:J.close()},variant:"secondary",children:(J,Ne)=>{var Te=rt("Cancel");S(J,Te)},$$slots:{default:!0}});var ce=w(le,2);ze(ce,{type:"submit",form:"automatic-trigger-form",variant:"primary",children:(J,Ne)=>{var Te=rt("Create");S(J,Te)},$$slots:{default:!0}}),S(W,ve)},children:(W,ve)=>{var le=Kh(),ce=g(le),J=g(ce),Ne=g(J),Te=w(g(Ne),2);Pe(Te,21,t,qe,(fe,be)=>{var _e=jh(),Xe=g(_e),Le={};Z(()=>{ne(Xe,s(be).name),Le!==(Le=s(be).id)&&(_e.value=(_e.__value=s(be).id)??"")}),S(fe,_e)});var Be=w(J,2),$e=g(Be),Oe=w(g($e),2);Pe(Oe,21,()=>s(i),qe,(fe,be)=>{var _e=$h(),Xe=g(_e),Le={};Z(()=>{ne(Xe,s(be).name),Le!==(Le=s(be).cssName)&&(_e.value=(_e.__value=s(be).cssName)??"")}),S(fe,_e)});var Ue=w($e,2),Qe=w(g(Ue),2),et=g(Qe),vt=w(et,2),Bt=g(vt),jt=g(Bt),pr=w(Ue,2),tr=w(g(pr),2);Pe(tr,21,()=>me,qe,(fe,be)=>{var _e=Gh(),Xe=g(_e),Le={};Z(()=>{ne(Xe,s(be)),Le!==(Le=s(be))&&(_e.value=(_e.__value=s(be))??"")}),S(fe,_e)}),Z(()=>{et.disabled=!s(_),jt.disabled=!s(_),tr.disabled=!s(_)}),on("submit",le,fe=>{fe.preventDefault(),b()}),tt(Te,()=>s(d),fe=>C(d,fe)),tt(Oe,()=>s(_),fe=>C(_,fe)),br(et,()=>s(m),fe=>C(m,fe)),ni(jt,()=>s(h),fe=>C(h,fe)),tt(tr,()=>s(y),fe=>C(y,fe)),S(W,le)},$$slots:{buttons:!0,default:!0}});var Pr=w(kr,2);{var Wn=j=>{Cr(j,{title:"Trigger",onclose:A,get dialogRef(){return s(D)},set dialogRef(le){C(D,le,!0)},tools:le=>{ze(le,{onclick:T,variant:"secondary",children:(ce,J)=>{var Ne=Uh(),Te=he(Ne);dn(Te,()=>Li),S(ce,Ne)},$$slots:{default:!0}})},buttons:le=>{var ce=Hh(),J=he(ce);ze(J,{onclick:A,variant:"secondary",children:(Te,Be)=>{var $e=rt("Cancel");S(Te,$e)},$$slots:{default:!0}});var Ne=w(J,2);ze(Ne,{type:"submit",form:"edit-trigger-form",variant:"primary",children:(Te,Be)=>{var $e=rt("Save");S(Te,$e)},$$slots:{default:!0}}),S(le,ce)},children:(le,ce)=>{var J=ip(),Ne=g(J),Te=g(Ne);{var Be=Oe=>{var Ue=Qh(),Qe=he(Ue),et=g(Qe),vt=w(g(et),2);Pe(vt,21,()=>ae,qe,(Ge,Fe)=>{var Se=zh(),Ke=g(Se),Ce={};Z(()=>{ne(Ke,s(Fe).label),Ce!==(Ce=s(Fe).value)&&(Se.value=(Se.__value=s(Fe).value)??"")}),S(Ge,Se)});var Bt=w(Qe,2),jt=g(Bt),pr=w(g(jt),2);Pe(pr,21,()=>ge,qe,(Ge,Fe)=>{var Se=qh(),Ke=g(Se),Ce={};Z(()=>{ne(Ke,s(Fe).label),Ce!==(Ce=s(Fe).value)&&(Se.value=(Se.__value=s(Fe).value)??"")}),S(Ge,Se)});var tr=w(jt,2),fe=w(g(tr),2);Pe(fe,21,t,qe,(Ge,Fe)=>{var Se=Wh(),Ke=g(Se),Ce={};Z(()=>{ne(Ke,s(Fe).name),Ce!==(Ce=s(Fe).id)&&(Se.value=(Se.__value=s(Fe).id)??"")}),S(Ge,Se)});var be=w(Bt,2),_e=g(be);{var Xe=Ge=>{var Fe=Jh(),Se=he(Fe),Ke=w(g(Se),2);Pe(Ke,21,()=>s(i),qe,(Mt,zr)=>{var mr=Yh(),Ga=g(mr),Yn={};Z(()=>{ne(Ga,s(zr).name),Yn!==(Yn=s(zr).cssName)&&(mr.value=(mr.__value=s(zr).cssName)??"")}),S(Mt,mr)});var Ce=w(Se,2),ht=w(g(Ce),2),Ze=g(ht),ot=w(Ze,2),Yt=g(ot),nt=g(Yt),Mr=w(Ce,2),Xt=w(g(Mr),2);Pe(Xt,21,()=>me,qe,(Mt,zr)=>{var mr=Xh(),Ga=g(mr),Yn={};Z(()=>{ne(Ga,s(zr)),Yn!==(Yn=s(zr))&&(mr.value=(mr.__value=s(zr))??"")}),S(Mt,mr)}),Z(()=>{Ze.disabled=!s(B),nt.disabled=!s(B),Xt.disabled=!s(B)}),tt(Ke,()=>s(B),Mt=>C(B,Mt)),br(Ze,()=>s(q),Mt=>C(q,Mt)),ni(nt,()=>s(ie),Mt=>C(ie,Mt)),tt(Xt,()=>s(oe),Mt=>C(oe,Mt)),S(Ge,Fe)},Le=Ge=>{var Fe=it(),Se=he(Fe);{var Ke=Ce=>{const ht=ye(()=>t().find(nt=>nt.id===s(k)));var Ze=it(),ot=he(Ze);{var Yt=nt=>{var Mr=Zh(),Xt=w(g(Mr),2);{let Mt=ye(()=>R(s(k),s(te)));aa(Xt,{get controls(){return Me[s(ht).type].controls},get components(){return Me[s(ht).type].components},get values(){return s(Mt)},onChange:H})}S(nt,Mr)};de(ot,nt=>{s(ht)&&nt(Yt)})}S(Ce,Ze)};de(Se,Ce=>{s(E)==="setValue"&&s(k)&&Ce(Ke)},!0)}S(Ge,Fe)};de(_e,Ge=>{s(E)==="animation"?Ge(Xe):Ge(Le,!1)})}tt(vt,()=>s(F),Ge=>C(F,Ge)),tt(pr,()=>s(E),Ge=>C(E,Ge)),tt(fe,()=>s(k),Ge=>C(k,Ge)),S(Oe,Ue)},$e=Oe=>{var Ue=np(),Qe=he(Ue),et=g(Qe),vt=w(g(et),2);Pe(vt,21,t,qe,(Se,Ke)=>{var Ce=ep(),ht=g(Ce),Ze={};Z(()=>{ne(ht,s(Ke).name),Ze!==(Ze=s(Ke).id)&&(Ce.value=(Ce.__value=s(Ke).id)??"")}),S(Se,Ce)});var Bt=w(Qe,2),jt=g(Bt),pr=w(g(jt),2);Pe(pr,21,()=>s(i),qe,(Se,Ke)=>{var Ce=tp(),ht=g(Ce),Ze={};Z(()=>{ne(ht,s(Ke).name),Ze!==(Ze=s(Ke).cssName)&&(Ce.value=(Ce.__value=s(Ke).cssName)??"")}),S(Se,Ce)});var tr=w(jt,2),fe=w(g(tr),2),be=g(fe),_e=w(be,2),Xe=g(_e),Le=g(Xe),Ge=w(tr,2),Fe=w(g(Ge),2);Pe(Fe,21,()=>me,qe,(Se,Ke)=>{var Ce=rp(),ht=g(Ce),Ze={};Z(()=>{ne(ht,s(Ke)),Ze!==(Ze=s(Ke))&&(Ce.value=(Ce.__value=s(Ke))??"")}),S(Se,Ce)}),Z(()=>{be.disabled=!s(B),Le.disabled=!s(B),Fe.disabled=!s(B)}),tt(vt,()=>s(k),Se=>C(k,Se)),tt(pr,()=>s(B),Se=>C(B,Se)),br(be,()=>s(q),Se=>C(q,Se)),ni(Le,()=>s(ie),Se=>C(ie,Se)),tt(Fe,()=>s(oe),Se=>C(oe,Se)),S(Oe,Ue)};de(Te,Oe=>{s(M).triggerType!=="always"?Oe(Be):Oe($e,!1)})}on("submit",J,Oe=>{Oe.preventDefault(),N()}),S(le,J)},$$slots:{tools:!0,buttons:!0,default:!0}})};de(Pr,j=>{s(M)&&j(Wn)})}S(r,ee),wt()}var op=O('<div class="pan-tilt-indicator svelte-kr8awf"></div>'),lp=O('<div class="device-preview-item svelte-kr8awf"><div class="device-preview svelte-kr8awf"><!></div> <code class="device-id svelte-kr8awf"> </code></div>'),cp=O('<div class="reference-section svelte-kr8awf"><h4 class="svelte-kr8awf">Devices</h4> <div class="device-previews svelte-kr8awf"></div></div>'),up=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>'),dp=O('<div class="reference-section svelte-kr8awf"><h4 class="svelte-kr8awf">Animations</h4> <div class="reference-list svelte-kr8awf"></div></div>'),fp=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div> <div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>',1),vp=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>'),hp=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>'),pp=O('<div class="reference-section svelte-kr8awf"><h4 class="svelte-kr8awf">Inputs</h4> <div class="reference-list svelte-kr8awf"></div></div>'),mp=O('<div class="css-view svelte-kr8awf"><div class="left-column svelte-kr8awf"><div class="reference-card svelte-kr8awf"><!> <!> <!></div> <div class="animation-targets svelte-kr8awf"></div></div> <div class="right-column svelte-kr8awf"><div class="css-scroll-container svelte-kr8awf"><pre class="css-editor readonly svelte-kr8awf"> </pre> <pre class="css-editor editable svelte-kr8awf" contenteditable="true" spellcheck="false"></pre></div></div></div>');function _p(r,e){yt(e,!0);let t=pe(e,"devices",19,()=>[]),n=pe(e,"isActive",3,!1),i=z(""),a=z("");function o(){return localStorage.getItem("dmx-custom-css")||`/* Add your custom CSS here to override device defaults and apply animations */
`}function c(){C(i,e.cssGenerator.generate(t()),!0)}let l,u=Ae({}),f=Ae({}),d=Ae({}),_=ye(()=>e.animationLibrary?e.animationLibrary.getAll():[]),m=z(Ae([])),h,y,v,D;function M(T,P){switch(T){case"RGB":return[P.Red||0,P.Green||0,P.Blue||0];case"RGBA":return[P.Red||0,P.Green||0,P.Blue||0,P.Amber||0];case"RGBW":return[P.Red||0,P.Green||0,P.Blue||0,P.White||0];case"DIMMER":return[P.Intensity||0];case"SMOKE":return[P.Output||0];case"MOVING_HEAD":return[P.Pan||127,P.Tilt||127,P.Dimmer||0,P.Red||0,P.Green||0,P.Blue||0,P.White||0];case"FLAMETHROWER":return[P.Safety||0,P.Fuel||0];default:return console.warn(`Unknown device type: ${T}`),[]}}function L(){if(!e.cssSampler)return;const T=e.cssSampler.sampleAll(t());t().forEach(P=>{const G=T.get(P.id);if(!G)return;const K=M(P.type,G);if(G.Red!==void 0&&G.Green!==void 0&&G.Blue!==void 0){const X=G.White!==void 0?G.White:255,I=`rgba(${G.Red}, ${G.Green}, ${G.Blue}, ${X/255})`;u[P.id]=I}else if(G.Intensity!==void 0){const X=G.Intensity/255;f[P.id]=X}P.type==="MOVING_HEAD"&&G.Pan!==void 0&&G.Tilt!==void 0&&(d[P.id]={pan:G.Pan,tilt:G.Tilt}),e.dmxController&&n()&&F(P,K)}),l=requestAnimationFrame(L)}function F(T,P){if(e.dmxController)for(let G=0;G<P.length;G++){const K=T.startChannel+G;e.dmxController.setChannel(K,P[G])}}function E(T){const P=T.target.textContent;C(a,P,!0),localStorage.setItem("dmx-custom-css",P),k()}function k(){if(h){const T=s(i)+`

`+s(a);h.textContent=`@scope (.animation-targets) {
${T}
}`}}function B(){C(m,e.mappingLibrary.getAll(),!0),c(),k()}function q(){c(),k()}Hn(()=>{const T=document.createElement("style");T.id="css-property-definitions",T.textContent=`
/* CSS Custom Property Definitions */
@property --safety {
  syntax: "none | probably";
  inherits: false;
  initial-value: none;
}

@property --fuel {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --smoke {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --pan {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --tilt {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --amber {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}
`,document.head.appendChild(T),h=document.createElement("style"),h.id="css-animation-styles",document.head.appendChild(h),y&&(v=document.createElement("div"),v.className="trigger-classes",y.appendChild(v)),e.cssSampler&&v&&(e.cssSampler.initialize(v),e.cssSampler.updateDevices(t())),e.triggerManager&&v&&e.triggerManager.setContainer(v),e.mappingLibrary.on("changed",B),e.animationLibrary.on("changed",q),C(m,e.mappingLibrary.getAll(),!0),C(a,o(),!0),c(),D&&(D.textContent=s(a)),k(),t().forEach(P=>{u[P.id]=ln(P.type,P.defaultValues),f[P.id]=1,P.type==="MOVING_HEAD"&&(d[P.id]={pan:P.defaultValues[0]||127,tilt:P.defaultValues[1]||127})}),l||L()}),xr(()=>{e.cssSampler&&t()&&(e.cssSampler.updateDevices(t()),c(),k())}),Ca(()=>{l&&(cancelAnimationFrame(l),l=null),h&&h.parentNode&&h.parentNode.removeChild(h);const T=document.getElementById("css-property-definitions");T&&T.parentNode&&T.parentNode.removeChild(T),e.mappingLibrary.off("changed",B),e.animationLibrary.off("changed",q)});var ie=mp(),oe=g(ie),te=g(oe),ae=g(te);{var ge=T=>{var P=cp(),G=w(g(P),2);Pe(G,21,t,K=>K.id,(K,X)=>{var I=lp(),R=g(I),re=g(R);{var H=we=>{const Ee=ye(()=>d[s(X).id]),je=ye(()=>s(Ee).pan/255*100),Ve=ye(()=>(1-s(Ee).tilt/255)*100);var Ie=op();Z(()=>Rt(Ie,`left: ${s(je)??""}%; top: ${s(Ve)??""}%`)),S(we,Ie)};de(re,we=>{s(X).type==="MOVING_HEAD"&&d[s(X).id]&&we(H)})}var ee=w(R,2),se=g(ee);Z(we=>{Rt(R,`background-color: ${we??""}; opacity: ${(f[s(X).id]||1)??""}`),Ft(R,"title",s(X).name),ne(se,`#${s(X).cssId??""}`)},[()=>u[s(X).id]||ln(s(X).type,s(X).defaultValues)]),S(K,I)}),S(T,P)};de(ae,T=>{t().length>0&&T(ge)})}var me=w(ae,2);{var ue=T=>{var P=dp(),G=w(g(P),2);Pe(G,21,()=>s(_),K=>K.name,(K,X)=>{var I=up(),R=g(I),re=g(R);Z(()=>ne(re,s(X).cssName)),S(K,I)}),S(T,P)};de(me,T=>{s(_).length>0&&T(ue)})}var xe=w(me,2);{var Q=T=>{var P=pp(),G=w(g(P),2);Pe(G,21,()=>s(m),K=>K.id,(K,X)=>{var I=it(),R=he(I);{var re=ee=>{var se=it(),we=he(se);{var Ee=Ve=>{var Ie=fp(),Ye=he(Ie),Dt=g(Ye),Vt=g(Dt),kr=w(Ye,2),Pr=g(kr),Wn=g(Pr);Z((j,W)=>{ne(Vt,`.${j??""}`),ne(Wn,`.${W??""}`)},[()=>s(X).getButtonDownClass(),()=>s(X).getButtonUpClass()]),S(Ve,Ie)},je=Ve=>{var Ie=vp(),Ye=g(Ie),Dt=g(Ye);Z(Vt=>ne(Dt,Vt),[()=>s(X).getInputPropertyName()]),S(Ve,Ie)};de(we,Ve=>{s(X).isButtonInput()?Ve(Ee):Ve(je,!1)})}S(ee,se)},H=ee=>{var se=it(),we=he(se);{var Ee=je=>{var Ve=hp(),Ie=g(Ve),Ye=g(Ie);Z(Dt=>ne(Ye,Dt),[()=>s(X).getPropertyName()]),S(je,Ve)};de(we,je=>{s(X).mode==="direct"&&je(Ee)},!0)}S(ee,se)};de(R,ee=>{s(X).mode==="input"?ee(re):ee(H,!1)})}S(K,I)}),S(T,P)};de(xe,T=>{s(m).length>0&&T(Q)})}var V=w(te,2);fn(V,T=>y=T,()=>y);var $=w(oe,2),b=g($),x=g(b),A=g(x),N=w(x,2);N.__input=E,fn(N,T=>D=T,()=>D),Z(()=>ne(A,s(i))),S(r,ie),wt()}Pt(["input"]);var gp=O("<!> <main><!> <div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div></main>",1);function yp(r,e){yt(e,!0);let t=z("devices"),n=z(!1),i=Ae(new Xu),a=z(null),o=z(Ae([])),c=Ae(new Qu),l=Ae(new yl),u=Ae(new wl),f=Ae(new bl),d=Ae(new td),_=Ae(new ed(c,l)),m=Ae(new Uf(l,f,u));xr(()=>{m.initialize()}),xr(()=>{u.setSetValueCallback((N,T)=>{const P=s(o).find(G=>G.id===N);if(!(!P||!i)){for(const[G,K]of Object.entries(T)){const X=parseInt(G);X>=0&&X<P.defaultValues.length&&(P.defaultValues[X]=K,i.setChannel(P.startChannel+X,K))}C(o,[...s(o)],!0)}})});async function h(){try{await i.connect(),C(n,!0)}catch(N){alert("Failed to connect: "+N.message)}}function y(){i.disconnect(),C(n,!1)}function v(){var N;i&&i.clearUniverse(),(N=s(a))!=null&&N.clearAllDeviceValues&&s(a).clearAllDeviceValues()}var D=gp(),M=he(D);cv(M,{onconnect:h,ondisconnect:y,get connected(){return s(n)},get inputController(){return m}});var L=w(M,2),F=g(L);gv(F,{onClearUniverse:v,get view(){return s(t)},set view(N){C(t,N,!0)}});var E=w(F,2);let k;var B=g(E);fn(Xv(B,{get dmxController(){return i},get devices(){return s(o)},set devices(N){C(o,N,!0)}}),N=>C(a,N,!0),()=>s(a));var q=w(E,2);let ie;var oe=g(q);bv(oe,{get dmxController(){return i}});var te=w(q,2);let ae;var ge=g(te);fh(ge,{get animationLibrary(){return c},get cssGenerator(){return _},get devices(){return s(o)}});var me=w(te,2);let ue;var xe=g(me);Sh(xe,{get inputController(){return m},get mappingLibrary(){return l}});var Q=w(me,2);let V;var $=g(Q);sp($,{get mappingLibrary(){return l},get animationLibrary(){return c},get devices(){return s(o)}});var b=w(Q,2);let x;var A=g(b);{let N=ye(()=>s(t)==="css");_p(A,{get dmxController(){return i},get devices(){return s(o)},get animationLibrary(){return c},get mappingLibrary(){return l},get cssGenerator(){return _},get cssSampler(){return d},get triggerManager(){return u},get customPropertyManager(){return f},get isActive(){return s(N)}})}Z(()=>{k=St(E,1,"view-container svelte-1n46o8q",null,k,{hidden:s(t)!=="devices"}),ie=St(q,1,"view-container svelte-1n46o8q",null,ie,{hidden:s(t)!=="universe"}),ae=St(te,1,"view-container svelte-1n46o8q",null,ae,{hidden:s(t)!=="animations"}),ue=St(me,1,"view-container svelte-1n46o8q",null,ue,{hidden:s(t)!=="inputs"}),V=St(Q,1,"view-container svelte-1n46o8q",null,V,{hidden:s(t)!=="triggers"}),x=St(b,1,"view-container svelte-1n46o8q",null,x,{hidden:s(t)!=="css"})}),S(r,D),wt()}Su(yp,{target:document.getElementById("app")});
