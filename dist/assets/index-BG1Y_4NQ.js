var nc=Object.defineProperty;var Ls=r=>{throw TypeError(r)};var ic=(r,e,t)=>e in r?nc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ze=(r,e,t)=>ic(r,typeof e!="symbol"?e+"":e,t),Ga=(r,e,t)=>e.has(r)||Ls("Cannot "+t);var h=(r,e,t)=>(Ga(r,e,"read from private field"),t?t.call(r):e.get(r)),W=(r,e,t)=>e.has(r)?Ls("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),K=(r,e,t,n)=>(Ga(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Ue=(r,e,t)=>(Ga(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const po=!1;var hs=Array.isArray,ac=Array.prototype.indexOf,ps=Array.from,sc=Object.defineProperty,wn=Object.getOwnPropertyDescriptor,_o=Object.getOwnPropertyDescriptors,oc=Object.prototype,lc=Array.prototype,_s=Object.getPrototypeOf,As=Object.isExtensible;function cc(r){return r()}function Qa(r){for(var e=0;e<r.length;e++)r[e]()}function mo(){var r,e,t=new Promise((n,i)=>{r=n,e=i});return{promise:t,resolve:r,reject:e}}function uc(r,e){if(Array.isArray(r))return r;if(!(Symbol.iterator in r))return Array.from(r);const t=[];for(const n of r)if(t.push(n),t.length===e)break;return t}const yt=2,fa=4,va=8,Ir=16,xr=32,fn=64,ha=128,ft=1024,Pt=2048,dr=4096,Ft=8192,br=16384,ms=32768,ln=65536,Ts=1<<17,go=1<<18,$n=1<<19,yo=1<<20,qt=256,Wi=512,Yi=32768,es=1<<21,gs=1<<22,Vr=1<<23,Sr=Symbol("$state"),dc=Symbol("legacy props"),fc=Symbol(""),yn=new class extends Error{constructor(){super(...arguments);Ze(this,"name","StaleReactionError");Ze(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function wo(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function vc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function hc(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function pc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _c(r){throw new Error("https://svelte.dev/e/effect_orphan")}function mc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function gc(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function yc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function wc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function bc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Sc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const pa=1,_a=2,bo=4,Cc=8,Dc=16,Ec=1,Ic=2,So=4,xc=8,kc=16,Pc=1,Mc=2,ut=Symbol(),Lc="http://www.w3.org/1999/xhtml",Ac="@attach";function Tc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Nc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Rc=!1;function Co(r){return r===this.v}function Oc(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function Do(r){return!Oc(r,this.v)}let Gn=!1,Fc=!1;function Vc(){Gn=!0}let Xe=null;function Nn(r){Xe=r}function wt(r,e=!1,t){Xe={p:Xe,i:!1,c:null,e:null,s:r,x:null,l:Gn&&!e?{s:null,u:null,$:[]}:null}}function bt(r){var e=Xe,t=e.e;if(t!==null){e.e=null;for(var n of t)Uo(n)}return r!==void 0&&(e.x=r),e.i=!0,Xe=e.p,r??{}}function Si(){return!Gn||Xe!==null&&Xe.l===null}let Wr=[];function Eo(){var r=Wr;Wr=[],Qa(r)}function Dr(r){if(Wr.length===0&&!ni){var e=Wr;queueMicrotask(()=>{e===Wr&&Eo()})}Wr.push(r)}function Bc(){for(;Wr.length>0;)Eo()}function Io(r){var e=Ee;if(e===null)return Ie.f|=Vr,r;if(e.f&ms)Rn(r,e);else{if(!(e.f&ha))throw r;e.b.error(r)}}function Rn(r,e){for(;e!==null;){if(e.f&ha)try{e.b.error(r);return}catch(t){r=t}e=e.parent}throw r}const Li=new Set;let Te=null,ri=null,dt=null,lr=[],ma=null,ts=!1,ni=!1;var Cn,Dn,Yr,Xr,ci,En,In,gt,rs,zr,xo,ko;const aa=class aa{constructor(){W(this,gt);Ze(this,"committed",!1);Ze(this,"current",new Map);Ze(this,"previous",new Map);W(this,Cn,new Set);W(this,Dn,new Set);W(this,Yr,0);W(this,Xr,0);W(this,ci,null);W(this,En,[]);W(this,In,[]);Ze(this,"skipped_effects",new Set);Ze(this,"is_fork",!1)}process(e){var n;lr=[],ri=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of e)Ue(this,gt,rs).call(this,i,t);this.is_fork||Ue(this,gt,xo).call(this),h(this,Xr)>0||this.is_fork?(Ue(this,gt,zr).call(this,t.effects),Ue(this,gt,zr).call(this,t.render_effects),Ue(this,gt,zr).call(this,t.block_effects)):(ri=this,Te=null,Ns(t.render_effects),Ns(t.effects),ri=null,(n=h(this,ci))==null||n.resolve()),dt=null}capture(e,t){this.previous.has(e)||this.previous.set(e,t),e.f&Vr||(this.current.set(e,e.v),dt==null||dt.set(e,e.v))}activate(){Te=this,this.apply()}deactivate(){Te=null,dt=null}flush(){if(this.activate(),lr.length>0){if(Po(),Te!==null&&Te!==this)return}else h(this,Yr)===0&&this.process([]);this.deactivate()}discard(){for(const e of h(this,Dn))e(this);h(this,Dn).clear()}increment(e){K(this,Yr,h(this,Yr)+1),e&&K(this,Xr,h(this,Xr)+1)}decrement(e){K(this,Yr,h(this,Yr)-1),e&&K(this,Xr,h(this,Xr)-1),this.revive()}revive(){for(const e of h(this,En))vt(e,Pt),cn(e);for(const e of h(this,In))vt(e,dr),cn(e);K(this,En,[]),K(this,In,[]),this.flush()}oncommit(e){h(this,Cn).add(e)}ondiscard(e){h(this,Dn).add(e)}settled(){return(h(this,ci)??K(this,ci,mo())).promise}static ensure(){if(Te===null){const e=Te=new aa;Li.add(Te),ni||aa.enqueue(()=>{Te===e&&e.flush()})}return Te}static enqueue(e){Dr(e)}apply(){}};Cn=new WeakMap,Dn=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,ci=new WeakMap,En=new WeakMap,In=new WeakMap,gt=new WeakSet,rs=function(e,t){var f;e.f^=ft;for(var n=e.first;n!==null;){var i=n.f,a=(i&(xr|fn))!==0,o=a&&(i&ft)!==0,l=o||(i&Ft)!==0||this.skipped_effects.has(n);if(n.f&ha&&((f=n.b)!=null&&f.is_pending())&&(t={parent:t,effect:n,effects:[],render_effects:[],block_effects:[]}),!l&&n.fn!==null){a?n.f^=ft:i&fa?t.effects.push(n):Un(n)&&(n.f&Ir&&t.block_effects.push(n),Fn(n));var c=n.first;if(c!==null){n=c;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)u===t.effect&&(Ue(this,gt,zr).call(this,t.effects),Ue(this,gt,zr).call(this,t.render_effects),Ue(this,gt,zr).call(this,t.block_effects),t=t.parent),n=u.next,u=u.parent}},zr=function(e){for(const t of e)(t.f&Pt?h(this,En):h(this,In)).push(t),vt(t,ft)},xo=function(){if(h(this,Xr)===0){for(const e of h(this,Cn))e();h(this,Cn).clear()}h(this,Yr)===0&&Ue(this,gt,ko).call(this)},ko=function(){var i;if(Li.size>1){this.previous.clear();var e=dt,t=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of Li){if(a===this){t=!1;continue}const o=[];for(const[c,u]of this.current){if(a.current.has(c))if(t&&u!==a.current.get(c))a.current.set(c,u);else continue;o.push(c)}if(o.length===0)continue;const l=[...a.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){const c=new Set,u=new Map;for(const f of o)Mo(f,l,c,u);if(lr.length>0){Te=a,a.apply();for(const f of lr)Ue(i=a,gt,rs).call(i,f,n);lr=[],a.deactivate()}}}Te=null,dt=e}this.committed=!0,Li.delete(this)};let yr=aa;function jc(r){var e=ni;ni=!0;try{for(var t;;){if(Bc(),lr.length===0&&(Te==null||Te.flush(),lr.length===0))return ma=null,t;Po()}}finally{ni=e}}function Po(){var r=Sn;ts=!0;try{var e=0;for(Vs(!0);lr.length>0;){var t=yr.ensure();if(e++>1e3){var n,i;$c()}t.process(lr),Br.clear()}}finally{ts=!1,Vs(r),ma=null}}function $c(){try{mc()}catch(r){Rn(r,ma)}}let Jt=null;function Ns(r){var e=r.length;if(e!==0){for(var t=0;t<e;){var n=r[t++];if(!(n.f&(br|Ft))&&Un(n)&&(Jt=new Set,Fn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Wo(n):n.fn=null),(Jt==null?void 0:Jt.size)>0)){Br.clear();for(const i of Jt){if(i.f&(br|Ft))continue;const a=[i];let o=i.parent;for(;o!==null;)Jt.has(o)&&(Jt.delete(o),a.push(o)),o=o.parent;for(let l=a.length-1;l>=0;l--){const c=a[l];c.f&(br|Ft)||Fn(c)}}Jt.clear()}}Jt=null}}function Mo(r,e,t,n){if(!t.has(r)&&(t.add(r),r.reactions!==null))for(const i of r.reactions){const a=i.f;a&yt?Mo(i,e,t,n):a&(gs|Ir)&&!(a&Pt)&&Lo(i,e,n)&&(vt(i,Pt),cn(i))}}function Lo(r,e,t){const n=t.get(r);if(n!==void 0)return n;if(r.deps!==null)for(const i of r.deps){if(e.includes(i))return!0;if(i.f&yt&&Lo(i,e,t))return t.set(i,!0),!0}return t.set(r,!1),!1}function cn(r){for(var e=ma=r;e.parent!==null;){e=e.parent;var t=e.f;if(ts&&e===Ee&&t&Ir&&!(t&go))return;if(t&(fn|xr)){if(!(t&ft))return;e.f^=ft}}lr.push(e)}function Gc(r){let e=0,t=jr(0),n;return()=>{ru()&&(s(t),vn(()=>(e===0&&(n=vr(()=>r(()=>ii(t)))),e+=1,()=>{Dr(()=>{e-=1,e===0&&(n==null||n(),n=void 0,ii(t))})})))}}var Kc=ln|$n|ha;function Uc(r,e,t){new Hc(r,e,t)}var Kt,Ut,vs,nr,Jr,ir,Ht,It,ar,_r,Ar,Zr,Tr,Qr,Nr,sa,ot,qc,zc,ns,Hi,qi,is;class Hc{constructor(e,t,n){W(this,ot);Ze(this,"parent");W(this,Kt,!1);W(this,Ut);W(this,vs,null);W(this,nr);W(this,Jr);W(this,ir);W(this,Ht,null);W(this,It,null);W(this,ar,null);W(this,_r,null);W(this,Ar,null);W(this,Zr,0);W(this,Tr,0);W(this,Qr,!1);W(this,Nr,null);W(this,sa,Gc(()=>(K(this,Nr,jr(h(this,Zr))),()=>{K(this,Nr,null)})));K(this,Ut,e),K(this,nr,t),K(this,Jr,n),this.parent=Ee.b,K(this,Kt,!!h(this,nr).pending),K(this,ir,Kn(()=>{Ee.b=this;{var i=Ue(this,ot,ns).call(this);try{K(this,Ht,Nt(()=>n(i)))}catch(a){this.error(a)}h(this,Tr)>0?Ue(this,ot,qi).call(this):K(this,Kt,!1)}return()=>{var a;(a=h(this,Ar))==null||a.remove()}},Kc))}is_pending(){return h(this,Kt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!h(this,nr).pending}update_pending_count(e){Ue(this,ot,is).call(this,e),K(this,Zr,h(this,Zr)+e),h(this,Nr)&&On(h(this,Nr),h(this,Zr))}get_effect_pending(){return h(this,sa).call(this),s(h(this,Nr))}error(e){var t=h(this,nr).onerror;let n=h(this,nr).failed;if(h(this,Qr)||!t&&!n)throw e;h(this,Ht)&&(st(h(this,Ht)),K(this,Ht,null)),h(this,It)&&(st(h(this,It)),K(this,It,null)),h(this,ar)&&(st(h(this,ar)),K(this,ar,null));var i=!1,a=!1;const o=()=>{if(i){Nc();return}i=!0,a&&Sc(),yr.ensure(),K(this,Zr,0),h(this,ar)!==null&&bn(h(this,ar),()=>{K(this,ar,null)}),K(this,Kt,this.has_pending_snippet()),K(this,Ht,Ue(this,ot,Hi).call(this,()=>(K(this,Qr,!1),Nt(()=>h(this,Jr).call(this,h(this,Ut)))))),h(this,Tr)>0?Ue(this,ot,qi).call(this):K(this,Kt,!1)};var l=Ie;try{xt(null),a=!0,t==null||t(e,o),a=!1}catch(c){Rn(c,h(this,ir)&&h(this,ir).parent)}finally{xt(l)}n&&Dr(()=>{K(this,ar,Ue(this,ot,Hi).call(this,()=>{yr.ensure(),K(this,Qr,!0);try{return Nt(()=>{n(h(this,Ut),()=>e,()=>o)})}catch(c){return Rn(c,h(this,ir).parent),null}finally{K(this,Qr,!1)}}))})}}Kt=new WeakMap,Ut=new WeakMap,vs=new WeakMap,nr=new WeakMap,Jr=new WeakMap,ir=new WeakMap,Ht=new WeakMap,It=new WeakMap,ar=new WeakMap,_r=new WeakMap,Ar=new WeakMap,Zr=new WeakMap,Tr=new WeakMap,Qr=new WeakMap,Nr=new WeakMap,sa=new WeakMap,ot=new WeakSet,qc=function(){try{K(this,Ht,Nt(()=>h(this,Jr).call(this,h(this,Ut))))}catch(e){this.error(e)}K(this,Kt,!1)},zc=function(){const e=h(this,nr).pending;e&&(K(this,It,Nt(()=>e(h(this,Ut)))),yr.enqueue(()=>{var t=Ue(this,ot,ns).call(this);K(this,Ht,Ue(this,ot,Hi).call(this,()=>(yr.ensure(),Nt(()=>h(this,Jr).call(this,t))))),h(this,Tr)>0?Ue(this,ot,qi).call(this):(bn(h(this,It),()=>{K(this,It,null)}),K(this,Kt,!1))}))},ns=function(){var e=h(this,Ut);return h(this,Kt)&&(K(this,Ar,$r()),h(this,Ut).before(h(this,Ar)),e=h(this,Ar)),e},Hi=function(e){var t=Ee,n=Ie,i=Xe;zt(h(this,ir)),xt(h(this,ir)),Nn(h(this,ir).ctx);try{return e()}catch(a){return Io(a),null}finally{zt(t),xt(n),Nn(i)}},qi=function(){const e=h(this,nr).pending;h(this,Ht)!==null&&(K(this,_r,document.createDocumentFragment()),h(this,_r).append(h(this,Ar)),Jo(h(this,Ht),h(this,_r))),h(this,It)===null&&K(this,It,Nt(()=>e(h(this,Ut))))},is=function(e){var t;if(!this.has_pending_snippet()){this.parent&&Ue(t=this.parent,ot,is).call(t,e);return}K(this,Tr,h(this,Tr)+e),h(this,Tr)===0&&(K(this,Kt,!1),h(this,It)&&bn(h(this,It),()=>{K(this,It,null)}),h(this,_r)&&(h(this,Ut).before(h(this,_r)),K(this,_r,null)))};function Ao(r,e,t,n){const i=Si()?Ci:ys;if(t.length===0&&r.length===0){n(e.map(i));return}var a=Te,o=Ee,l=Wc();function c(){Promise.all(t.map(u=>Yc(u))).then(u=>{l();try{n([...e.map(i),...u])}catch(f){o.f&br||Rn(f,o)}a==null||a.deactivate(),Xi()}).catch(u=>{Rn(u,o)})}r.length>0?Promise.all(r).then(()=>{l();try{return c()}finally{a==null||a.deactivate(),Xi()}}):c()}function Wc(){var r=Ee,e=Ie,t=Xe,n=Te;return function(a=!0){zt(r),xt(e),Nn(t),a&&(n==null||n.activate())}}function Xi(){zt(null),xt(null),Nn(null)}function Ci(r){var e=yt|Pt,t=Ie!==null&&Ie.f&yt?Ie:null;return Ee===null||t!==null&&t.f&qt?e|=qt:Ee.f|=$n,{ctx:Xe,deps:null,effects:null,equals:Co,f:e,fn:r,reactions:null,rv:0,v:ut,wv:0,parent:t??Ee,ac:null}}function Yc(r,e){let t=Ee;t===null&&vc();var n=t.b,i=void 0,a=jr(ut),o=!Ie,l=new Map;return ou(()=>{var _;var c=mo();i=c.promise;try{Promise.resolve(r()).then(c.resolve,c.reject).then(()=>{u===Te&&u.committed&&u.deactivate(),Xi()})}catch(p){c.reject(p),Xi()}var u=Te;if(o){var f=!n.is_pending();n.update_pending_count(1),u.increment(f),(_=l.get(u))==null||_.reject(yn),l.delete(u),l.set(u,c)}const d=(p,v=void 0)=>{if(u.activate(),v)v!==yn&&(a.f|=Vr,On(a,v));else{a.f&Vr&&(a.f^=Vr),On(a,p);for(const[y,g]of l){if(l.delete(y),y===u)break;g.reject(yn)}}o&&(n.update_pending_count(-1),u.decrement(f))};c.promise.then(d,p=>d(null,p||"unknown"))}),wa(()=>{for(const c of l.values())c.reject(yn)}),new Promise(c=>{function u(f){function d(){f===i?c(a):u(i)}f.then(d,d)}u(i)})}function ye(r){const e=Ci(r);return Zo(e),e}function ys(r){const e=Ci(r);return e.equals=Do,e}function To(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)st(e[t])}}function Xc(r){for(var e=r.parent;e!==null;){if(!(e.f&yt))return e;e=e.parent}return null}function ws(r){var e,t=Ee;zt(Xc(r));try{r.f&=~Yi,To(r),e=rl(r)}finally{zt(t)}return e}function No(r){var e=ws(r);if(r.equals(e)||(r.v=e,r.wv=el()),!hn)if(dt!==null)dt.set(r,r.v);else{var t=(Fr||r.f&qt)&&r.deps!==null?dr:ft;vt(r,t)}}let as=new Set;const Br=new Map;let Ro=!1;function jr(r,e){var t={f:0,v:r,reactions:null,equals:Co,rv:0,wv:0};return t}function U(r,e){const t=jr(r);return Zo(t),t}function Oo(r,e=!1,t=!0){var i;const n=jr(r);return e||(n.equals=Do),Gn&&t&&Xe!==null&&Xe.l!==null&&((i=Xe.l).s??(i.s=[])).push(n),n}function D(r,e,t=!1){Ie!==null&&(!er||Ie.f&Ts)&&Si()&&Ie.f&(yt|Ir|gs|Ts)&&!(Et!=null&&Et.includes(r))&&bc();let n=t?Me(e):e;return On(r,n)}function On(r,e){if(!r.equals(e)){var t=r.v;hn?Br.set(r,e):Br.set(r,t),r.v=e;var n=yr.ensure();n.capture(r,t),r.f&yt&&(r.f&Pt&&ws(r),vt(r,r.f&qt?dr:ft)),r.wv=el(),Fo(r,Pt),Si()&&Ee!==null&&Ee.f&ft&&!(Ee.f&(xr|fn))&&(Gt===null?cu([r]):Gt.push(r)),!n.is_fork&&as.size>0&&!Ro&&Jc()}return e}function Jc(){Ro=!1;const r=Array.from(as);for(const e of r)e.f&ft&&vt(e,dr),Un(e)&&Fn(e);as.clear()}function Ji(r,e=1){var t=s(r),n=e===1?t++:t--;return D(r,t),n}function ii(r){D(r,r.v+1)}function Fo(r,e){var t=r.reactions;if(t!==null)for(var n=Si(),i=t.length,a=0;a<i;a++){var o=t[a],l=o.f;if(!(!n&&o===Ee)){var c=(l&Pt)===0;c&&vt(o,e),l&yt?l&Yi||(o.f|=Yi,Fo(o,dr)):c&&(l&Ir&&Jt!==null&&Jt.add(o),cn(o))}}}function Me(r){if(typeof r!="object"||r===null||Sr in r)return r;const e=_s(r);if(e!==oc&&e!==lc)return r;var t=new Map,n=hs(r),i=U(0),a=sn,o=l=>{if(sn===a)return l();var c=Ie,u=sn;xt(null),js(a);var f=l();return xt(c),js(u),f};return n&&t.set("length",U(r.length)),new Proxy(r,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&yc();var f=t.get(c);return f===void 0?f=o(()=>{var d=U(u.value);return t.set(c,d),d}):D(f,u.value,!0),!0},deleteProperty(l,c){var u=t.get(c);if(u===void 0){if(c in l){const f=o(()=>U(ut));t.set(c,f),ii(i)}}else D(u,ut),ii(i);return!0},get(l,c,u){var p;if(c===Sr)return r;var f=t.get(c),d=c in l;if(f===void 0&&(!d||(p=wn(l,c))!=null&&p.writable)&&(f=o(()=>{var v=Me(d?l[c]:ut),y=U(v);return y}),t.set(c,f)),f!==void 0){var _=s(f);return _===ut?void 0:_}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=t.get(c);f&&(u.value=s(f))}else if(u===void 0){var d=t.get(c),_=d==null?void 0:d.v;if(d!==void 0&&_!==ut)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(l,c){var _;if(c===Sr)return!0;var u=t.get(c),f=u!==void 0&&u.v!==ut||Reflect.has(l,c);if(u!==void 0||Ee!==null&&(!f||(_=wn(l,c))!=null&&_.writable)){u===void 0&&(u=o(()=>{var p=f?Me(l[c]):ut,v=U(p);return v}),t.set(c,u));var d=s(u);if(d===ut)return!1}return f},set(l,c,u,f){var P;var d=t.get(c),_=c in l;if(n&&c==="length")for(var p=u;p<d.v;p+=1){var v=t.get(p+"");v!==void 0?D(v,ut):p in l&&(v=o(()=>U(ut)),t.set(p+"",v))}if(d===void 0)(!_||(P=wn(l,c))!=null&&P.writable)&&(d=o(()=>U(void 0)),D(d,Me(u)),t.set(c,d));else{_=d.v!==ut;var y=o(()=>Me(u));D(d,y)}var g=Reflect.getOwnPropertyDescriptor(l,c);if(g!=null&&g.set&&g.set.call(f,u),!_){if(n&&typeof c=="string"){var S=t.get("length"),w=Number(c);Number.isInteger(w)&&w>=S.v&&D(S,w+1)}ii(i)}return!0},ownKeys(l){s(i);var c=Reflect.ownKeys(l).filter(d=>{var _=t.get(d);return _===void 0||_.v!==ut});for(var[u,f]of t)f.v!==ut&&!(u in l)&&c.push(u);return c},setPrototypeOf(){wc()}})}function Rs(r){try{if(r!==null&&typeof r=="object"&&Sr in r)return r[Sr]}catch{}return r}function Vo(r,e){return Object.is(Rs(r),Rs(e))}var Os,Bo,jo,$o;function Zc(){if(Os===void 0){Os=window,Bo=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;jo=wn(e,"firstChild").get,$o=wn(e,"nextSibling").get,As(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),As(t)&&(t.__t=void 0)}}function $r(r=""){return document.createTextNode(r)}function cr(r){return jo.call(r)}function Di(r){return $o.call(r)}function m(r,e){return cr(r)}function _e(r,e=!1){{var t=cr(r);return t instanceof Comment&&t.data===""?Di(t):t}}function b(r,e=1,t=!1){let n=r;for(;e--;)n=Di(n);return n}function Qc(r){r.textContent=""}function Go(){return!1}function Zi(r,e){if(e){const t=document.body;r.autofocus=!0,Dr(()=>{document.activeElement===t&&r.focus()})}}let Fs=!1;function eu(){Fs||(Fs=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function ga(r){var e=Ie,t=Ee;xt(null),zt(null);try{return r()}finally{xt(e),zt(t)}}function ya(r,e,t,n=t){r.addEventListener(e,()=>ga(t));const i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),eu()}function Ko(r){Ee===null&&Ie===null&&_c(),Ie!==null&&Ie.f&qt&&Ee===null&&pc(),hn&&hc()}function tu(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function fr(r,e,t,n=!0){var i=Ee;i!==null&&i.f&Ft&&(r|=Ft);var a={ctx:Xe,deps:null,nodes_start:null,nodes_end:null,f:r|Pt,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Fn(a),a.f|=ms}catch(c){throw st(a),c}else e!==null&&cn(a);if(n){var o=a;if(t&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&!(o.f&$n)&&(o=o.first,r&Ir&&r&ln&&o!==null&&(o.f|=ln)),o!==null&&(o.parent=i,i!==null&&tu(o,i),Ie!==null&&Ie.f&yt&&!(r&fn))){var l=Ie;(l.effects??(l.effects=[])).push(o)}}return a}function ru(){return Ie!==null&&!er}function wa(r){const e=fr(va,null,!1);return vt(e,ft),e.teardown=r,e}function Er(r){Ko();var e=Ee.f,t=!Ie&&(e&xr)!==0&&(e&ms)===0;if(t){var n=Xe;(n.e??(n.e=[])).push(r)}else return Uo(r)}function Uo(r){return fr(fa|yo,r,!1)}function nu(r){return Ko(),fr(va|yo,r,!0)}function iu(r){yr.ensure();const e=fr(fn|$n,r,!0);return(t={})=>new Promise(n=>{t.outro?bn(e,()=>{st(e),n(void 0)}):(st(e),n(void 0))})}function Ei(r){return fr(fa,r,!1)}function au(r,e){var t=Xe,n={effect:null,ran:!1,deps:r};t.l.$.push(n),n.effect=vn(()=>{r(),!n.ran&&(n.ran=!0,vr(e))})}function su(){var r=Xe;vn(()=>{for(var e of r.l.$){e.deps();var t=e.effect;t.f&ft&&vt(t,dr),Un(t)&&Fn(t),e.ran=!1}})}function ou(r){return fr(gs|$n,r,!0)}function vn(r,e=0){return fr(va|e,r,!0)}function ee(r,e=[],t=[],n=[],i=!1){Ao(n,e,t,a=>{fr(i?fa:va,()=>r(...a.map(s)),!0)})}function Kn(r,e=0){var t=fr(Ir|e,r,!0);return t}function Nt(r,e=!0){return fr(xr|$n,r,!0,e)}function Ho(r){var e=r.teardown;if(e!==null){const t=hn,n=Ie;Bs(!0),xt(null);try{e.call(null)}finally{Bs(t),xt(n)}}}function qo(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){const i=t.ac;i!==null&&ga(()=>{i.abort(yn)});var n=t.next;t.f&fn?t.parent=null:st(t,e),t=n}}function lu(r){for(var e=r.first;e!==null;){var t=e.next;e.f&xr||st(e),e=t}}function st(r,e=!0){var t=!1;(e||r.f&go)&&r.nodes_start!==null&&r.nodes_end!==null&&(zo(r.nodes_start,r.nodes_end),t=!0),qo(r,e&&!t),Qi(r,0),vt(r,br);var n=r.transitions;if(n!==null)for(const a of n)a.stop();Ho(r);var i=r.parent;i!==null&&i.first!==null&&Wo(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function zo(r,e){for(;r!==null;){var t=r===e?null:Di(r);r.remove(),r=t}}function Wo(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function bn(r,e,t=!0){var n=[];bs(r,n,!0),Yo(n,()=>{t&&st(r),e&&e()})}function Yo(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function bs(r,e,t){if(!(r.f&Ft)){if(r.f^=Ft,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var n=r.first;n!==null;){var i=n.next,a=(n.f&ln)!==0||(n.f&xr)!==0&&(r.f&Ir)!==0;bs(n,e,a?t:!1),n=i}}}function Ss(r){Xo(r,!0)}function Xo(r,e){if(r.f&Ft){r.f^=Ft,r.f&ft||(vt(r,Pt),cn(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&ln)!==0||(t.f&xr)!==0;Xo(t,i?e:!1),t=n}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}function Jo(r,e){for(var t=r.nodes_start,n=r.nodes_end;t!==null;){var i=t===n?null:Di(t);e.append(t),t=i}}let Sn=!1;function Vs(r){Sn=r}let hn=!1;function Bs(r){hn=r}let Ie=null,er=!1;function xt(r){Ie=r}let Ee=null;function zt(r){Ee=r}let Et=null;function Zo(r){Ie!==null&&(Et===null?Et=[r]:Et.push(r))}let Ct=null,At=0,Gt=null;function cu(r){Gt=r}let Qo=1,si=0,sn=si;function js(r){sn=r}let Fr=!1;function el(){return++Qo}function Un(r){var d;var e=r.f;if(e&Pt)return!0;if(e&dr){var t=r.deps,n=(e&qt)!==0;if(e&yt&&(r.f&=~Yi),t!==null){var i,a,o=(e&Wi)!==0,l=n&&Ee!==null&&!Fr,c=t.length;if((o||l)&&(Ee===null||!(Ee.f&br))){var u=r,f=u.parent;for(i=0;i<c;i++)a=t[i],(o||!((d=a==null?void 0:a.reactions)!=null&&d.includes(u)))&&(a.reactions??(a.reactions=[])).push(u);o&&(u.f^=Wi),l&&f!==null&&!(f.f&qt)&&(u.f^=qt)}for(i=0;i<c;i++)if(a=t[i],Un(a)&&No(a),a.wv>r.wv)return!0}(!n||Ee!==null&&!Fr)&&vt(r,ft)}return!1}function tl(r,e,t=!0){var n=r.reactions;if(n!==null&&!(Et!=null&&Et.includes(r)))for(var i=0;i<n.length;i++){var a=n[i];a.f&yt?tl(a,e,!1):e===a&&(t?vt(a,Pt):a.f&ft&&vt(a,dr),cn(a))}}function rl(r){var y;var e=Ct,t=At,n=Gt,i=Ie,a=Fr,o=Et,l=Xe,c=er,u=sn,f=r.f;Ct=null,At=0,Gt=null,Fr=(f&qt)!==0&&(er||!Sn||Ie===null),Ie=f&(xr|fn)?null:r,Et=null,Nn(r.ctx),er=!1,sn=++si,r.ac!==null&&(ga(()=>{r.ac.abort(yn)}),r.ac=null);try{r.f|=es;var d=r.fn,_=d(),p=r.deps;if(Ct!==null){var v;if(Qi(r,At),p!==null&&At>0)for(p.length=At+Ct.length,v=0;v<Ct.length;v++)p[At+v]=Ct[v];else r.deps=p=Ct;if(!Fr||f&yt&&r.reactions!==null)for(v=At;v<p.length;v++)((y=p[v]).reactions??(y.reactions=[])).push(r)}else p!==null&&At<p.length&&(Qi(r,At),p.length=At);if(Si()&&Gt!==null&&!er&&p!==null&&!(r.f&(yt|dr|Pt)))for(v=0;v<Gt.length;v++)tl(Gt[v],r);return i!==null&&i!==r&&(si++,Gt!==null&&(n===null?n=Gt:n.push(...Gt))),r.f&Vr&&(r.f^=Vr),_}catch(g){return Io(g)}finally{r.f^=es,Ct=e,At=t,Gt=n,Ie=i,Fr=a,Et=o,Nn(l),er=c,sn=u}}function uu(r,e){let t=e.reactions;if(t!==null){var n=ac.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&e.f&yt&&(Ct===null||!Ct.includes(e))&&(vt(e,dr),e.f&(qt|Wi)||(e.f^=Wi),To(e),Qi(e,0))}function Qi(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)uu(r,t[n])}function Fn(r){var e=r.f;if(!(e&br)){vt(r,ft);var t=Ee,n=Sn;Ee=r,Sn=!0;try{e&Ir?lu(r):qo(r),Ho(r);var i=rl(r);r.teardown=typeof i=="function"?i:null,r.wv=Qo;var a;po&&Fc&&r.f&Pt&&r.deps}finally{Sn=n,Ee=t}}}async function du(){await Promise.resolve(),jc()}function s(r){var e=r.f,t=(e&yt)!==0;if(Ie!==null&&!er){var n=Ee!==null&&(Ee.f&br)!==0;if(!n&&!(Et!=null&&Et.includes(r))){var i=Ie.deps;if(Ie.f&es)r.rv<si&&(r.rv=si,Ct===null&&i!==null&&i[At]===r?At++:Ct===null?Ct=[r]:(!Fr||!Ct.includes(r))&&Ct.push(r));else{(Ie.deps??(Ie.deps=[])).push(r);var a=r.reactions;a===null?r.reactions=[Ie]:a.includes(Ie)||a.push(Ie)}}}else if(t&&r.deps===null&&r.effects===null){var o=r,l=o.parent;l!==null&&!(l.f&qt)&&(o.f^=qt)}if(hn){if(Br.has(r))return Br.get(r);if(t){o=r;var c=o.v;return(!(o.f&ft)&&o.reactions!==null||nl(o))&&(c=ws(o)),Br.set(o,c),c}}else if(t){if(o=r,dt!=null&&dt.has(o))return dt.get(o);Un(o)&&No(o)}if(dt!=null&&dt.has(r))return dt.get(r);if(r.f&Vr)throw r.v;return r.v}function nl(r){if(r.v===ut)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(Br.has(e)||e.f&yt&&nl(e))return!0;return!1}function vr(r){var e=er;try{return er=!0,r()}finally{er=e}}const fu=-7169;function vt(r,e){r.f=r.f&fu|e}function il(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(Sr in r)ss(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&Sr in t&&ss(t)}}}function ss(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{ss(r[n],e)}catch{}const t=_s(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=_o(t);for(let i in n){const a=n[i].get;if(a)try{a.call(r)}catch{}}}}}function vu(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const hu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function pu(r){return hu.includes(r)}const _u={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function mu(r){return r=r.toLowerCase(),_u[r]??r}const gu=["touchstart","touchmove"];function yu(r){return gu.includes(r)}const al=new Set,os=new Set;function sl(r,e,t,n={}){function i(a){if(n.capture||ei.call(e,a),!a.cancelBubble)return ga(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Dr(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function on(r,e,t,n,i){var a={capture:n,passive:i},o=sl(r,e,t,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&wa(()=>{e.removeEventListener(r,o,a)})}function Mt(r){for(var e=0;e<r.length;e++)al.add(r[e]);for(var t of os)t(r)}let $s=null;function ei(r){var g;var e=this,t=e.ownerDocument,n=r.type,i=((g=r.composedPath)==null?void 0:g.call(r))||[],a=i[0]||r.target;$s=r;var o=0,l=$s===r&&r.__root;if(l){var c=i.indexOf(l);if(c!==-1&&(e===document||e===window)){r.__root=e;return}var u=i.indexOf(e);if(u===-1)return;c<=u&&(o=c)}if(a=i[o]||r.target,a!==e){sc(r,"currentTarget",{configurable:!0,get(){return a||t}});var f=Ie,d=Ee;xt(null),zt(null);try{for(var _,p=[];a!==null;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+n];y!=null&&(!a.disabled||r.target===a)&&y.call(a,r)}catch(S){_?p.push(S):_=S}if(r.cancelBubble||v===e||v===null)break;a=v}if(_){for(let S of p)queueMicrotask(()=>{throw S});throw _}}finally{r.__root=e,delete r.currentTarget,xt(f),zt(d)}}}function Cs(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","<!---->"),e.content}function Vn(r,e){var t=Ee;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function O(r,e){var t=(e&Pc)!==0,n=(e&Mc)!==0,i,a=!r.startsWith("<!>");return()=>{i===void 0&&(i=Cs(a?r:"<!>"+r),t||(i=cr(i)));var o=n||Bo?document.importNode(i,!0):i.cloneNode(!0);if(t){var l=cr(o),c=o.lastChild;Vn(l,c)}else Vn(o,o);return o}}function wu(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,a;return()=>{if(!a){var o=Cs(i),l=cr(o);a=cr(l)}var c=a.cloneNode(!0);return Vn(c,c),c}}function ol(r,e){return wu(r,e,"svg")}function nt(r=""){{var e=$r(r+"");return Vn(e,e),e}}function at(){var r=document.createDocumentFragment(),e=document.createComment(""),t=$r();return r.append(e,t),Vn(e,t),r}function C(r,e){r!==null&&r.before(e)}function ie(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function bu(r,e){return Su(r,e)}const mn=new Map;function Su(r,{target:e,anchor:t,props:n={},events:i,context:a,intro:o=!0}){Zc();var l=new Set,c=d=>{for(var _=0;_<d.length;_++){var p=d[_];if(!l.has(p)){l.add(p);var v=yu(p);e.addEventListener(p,ei,{passive:v});var y=mn.get(p);y===void 0?(document.addEventListener(p,ei,{passive:v}),mn.set(p,1)):mn.set(p,y+1)}}};c(ps(al)),os.add(c);var u=void 0,f=iu(()=>{var d=t??e.appendChild($r());return Uc(d,{pending:()=>{}},_=>{if(a){wt({});var p=Xe;p.c=a}i&&(n.$$events=i),u=r(_,n)||{},a&&bt()}),()=>{var v;for(var _ of l){e.removeEventListener(_,ei);var p=mn.get(_);--p===0?(document.removeEventListener(_,ei),mn.delete(_)):mn.set(_,p)}os.delete(c),d!==t&&((v=d.parentNode)==null||v.removeChild(d))}});return Cu.set(u,f),u}let Cu=new WeakMap;var Zt,sr,Tt,ui,di,oa;class ll{constructor(e,t=!0){Ze(this,"anchor");W(this,Zt,new Map);W(this,sr,new Map);W(this,Tt,new Map);W(this,ui,!0);W(this,di,()=>{var e=Te;if(h(this,Zt).has(e)){var t=h(this,Zt).get(e),n=h(this,sr).get(t);if(n)Ss(n);else{var i=h(this,Tt).get(t);i&&(h(this,sr).set(t,i.effect),h(this,Tt).delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[a,o]of h(this,Zt)){if(h(this,Zt).delete(a),a===e)break;const l=h(this,Tt).get(o);l&&(st(l.effect),h(this,Tt).delete(o))}for(const[a,o]of h(this,sr)){if(a===t)continue;const l=()=>{if(Array.from(h(this,Zt).values()).includes(a)){var u=document.createDocumentFragment();Jo(o,u),u.append($r()),h(this,Tt).set(a,{effect:o,fragment:u})}else st(o);h(this,sr).delete(a)};h(this,ui)||!n?bn(o,l,!1):l()}}});W(this,oa,e=>{h(this,Zt).delete(e);const t=Array.from(h(this,Zt).values());for(const[n,i]of h(this,Tt))t.includes(n)||(st(i.effect),h(this,Tt).delete(n))});this.anchor=e,K(this,ui,t)}ensure(e,t){var n=Te,i=Go();if(t&&!h(this,sr).has(e)&&!h(this,Tt).has(e))if(i){var a=document.createDocumentFragment(),o=$r();a.append(o),h(this,Tt).set(e,{effect:Nt(()=>t(o)),fragment:a})}else h(this,sr).set(e,Nt(()=>t(this.anchor)));if(h(this,Zt).set(n,e),i){for(const[l,c]of h(this,sr))l===e?n.skipped_effects.delete(c):n.skipped_effects.add(c);for(const[l,c]of h(this,Tt))l===e?n.skipped_effects.delete(c.effect):n.skipped_effects.add(c.effect);n.oncommit(h(this,di)),n.ondiscard(h(this,oa))}else h(this,di).call(this)}}Zt=new WeakMap,sr=new WeakMap,Tt=new WeakMap,ui=new WeakMap,di=new WeakMap,oa=new WeakMap;function le(r,e,t=!1){var n=new ll(r),i=t?ln:0;function a(o,l){n.ensure(o,l)}Kn(()=>{var o=!1;e((l,c=!0)=>{o=!0,a(c,l)}),o||a(!1,null)},i)}function Ye(r,e){return e}function Du(r,e,t){for(var n=r.items,i=[],a=e.length,o=0;o<a;o++)bs(e[o].e,i,!0);var l=a>0&&i.length===0&&t!==null;if(l){var c=t.parentNode;Qc(c),c.append(t),n.clear(),rr(r,e[0].prev,e[a-1].next)}Yo(i,()=>{for(var u=0;u<a;u++){var f=e[u];l||(n.delete(f.k),rr(r,f.prev,f.next)),st(f.e,!l)}})}function ke(r,e,t,n,i,a=null){var o=r,l={flags:e,items:new Map,first:null},c=(e&bo)!==0;if(c){var u=r;o=u.appendChild($r())}var f=null,d=!1,_=new Map,p=ys(()=>{var S=t();return hs(S)?S:S==null?[]:ps(S)}),v,y;function g(){Eu(y,v,l,_,o,i,e,n,t),a!==null&&(v.length===0?f?Ss(f):f=Nt(()=>a(o)):f!==null&&bn(f,()=>{f=null}))}Kn(()=>{y??(y=Ee),v=s(p);var S=v.length;if(!(d&&S===0)){d=S===0;var w,P,R,k;if(Go()){var T=new Set,j=Te;for(P=0;P<S;P+=1){R=v[P],k=n(R,P);var H=l.items.get(k)??_.get(k);H?e&(pa|_a)&&cl(H,R,P,e):(w=ul(null,l,null,null,R,k,P,i,e,t,!0),_.set(k,w)),T.add(k)}for(const[ne,ue]of l.items)T.has(ne)||j.skipped_effects.add(ue.e);j.oncommit(g)}else g();s(p)}})}function Eu(r,e,t,n,i,a,o,l,c){var V,E,x,N;var u=(o&Cc)!==0,f=(o&(pa|_a))!==0,d=e.length,_=t.items,p=t.first,v=p,y,g=null,S,w=[],P=[],R,k,T,j;if(u)for(j=0;j<d;j+=1)R=e[j],k=l(R,j),T=_.get(k),T!==void 0&&((V=T.a)==null||V.measure(),(S??(S=new Set)).add(T));for(j=0;j<d;j+=1){if(R=e[j],k=l(R,j),T=_.get(k),T===void 0){var H=n.get(k);if(H!==void 0){n.delete(k),_.set(k,H);var ne=g?g.next:v;rr(t,g,H),rr(t,H,ne),Ka(H,ne,i),g=H}else{var ue=v?v.e.nodes_start:i;g=ul(ue,t,g,g===null?t.first:g.next,R,k,j,a,o,c)}_.set(k,g),w=[],P=[],v=g.next;continue}if(f&&cl(T,R,j,o),T.e.f&Ft&&(Ss(T.e),u&&((E=T.a)==null||E.unfix(),(S??(S=new Set)).delete(T))),T!==v){if(y!==void 0&&y.has(T)){if(w.length<P.length){var ce=P[0],oe;g=ce.prev;var we=w[0],me=w[w.length-1];for(oe=0;oe<w.length;oe+=1)Ka(w[oe],ce,i);for(oe=0;oe<P.length;oe+=1)y.delete(P[oe]);rr(t,we.prev,me.next),rr(t,g,we),rr(t,me,ce),v=ce,g=me,j-=1,w=[],P=[]}else y.delete(T),Ka(T,v,i),rr(t,T.prev,T.next),rr(t,T,g===null?t.first:g.next),rr(t,g,T),g=T;continue}for(w=[],P=[];v!==null&&v.k!==k;)v.e.f&Ft||(y??(y=new Set)).add(v),P.push(v),v=v.next;if(v===null)continue;T=v}w.push(T),g=T,v=T.next}if(v!==null||y!==void 0){for(var he=y===void 0?[]:ps(y);v!==null;)v.e.f&Ft||he.push(v),v=v.next;var J=he.length;if(J>0){var te=o&bo&&d===0?i:null;if(u){for(j=0;j<J;j+=1)(x=he[j].a)==null||x.measure();for(j=0;j<J;j+=1)(N=he[j].a)==null||N.fix()}Du(t,he,te)}}u&&Dr(()=>{var L;if(S!==void 0)for(T of S)(L=T.a)==null||L.apply()}),r.first=t.first&&t.first.e,r.last=g&&g.e;for(var $ of n.values())st($.e);n.clear()}function cl(r,e,t,n){n&pa&&On(r.v,e),n&_a?On(r.i,t):r.i=t}function ul(r,e,t,n,i,a,o,l,c,u,f){var d=(c&pa)!==0,_=(c&Dc)===0,p=d?_?Oo(i,!1,!1):jr(i):i,v=c&_a?jr(o):o,y={i:v,v:p,k:a,a:null,e:null,prev:t,next:n};try{if(r===null){var g=document.createDocumentFragment();g.append(r=$r())}return y.e=Nt(()=>l(r,p,v,u),Rc),y.e.prev=t&&t.e,y.e.next=n&&n.e,t===null?f||(e.first=y):(t.next=y,t.e.next=y.e),n!==null&&(n.prev=y,n.e.prev=y.e),y}finally{}}function Ka(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==null&&a!==n;){var o=Di(a);i.before(a),a=o}}function rr(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function un(r,e,t=!1,n=!1,i=!1){var a=r,o="";ee(()=>{var l=Ee;if(o!==(o=e()??"")&&(l.nodes_start!==null&&(zo(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!=="")){var c=o+"";t?c=`<svg>${c}</svg>`:n&&(c=`<math>${c}</math>`);var u=Cs(c);if((t||n)&&(u=cr(u)),Vn(cr(u),u.lastChild),t||n)for(;cr(u);)a.before(cr(u));else a.before(u)}})}function zi(r,e,...t){var n=new ll(r);Kn(()=>{const i=e()??null;n.ensure(i,i&&(a=>i(a,...t)))},ln)}function Iu(r,e){var t=void 0,n;Kn(()=>{t!==(t=e())&&(n&&(st(n),n=null),t&&(n=Nt(()=>{Ei(()=>t(r))})))})}function dl(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=dl(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function xu(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=dl(r))&&(n&&(n+=" "),n+=e);return n}function ku(r){return typeof r=="object"?xu(r):r??""}const Gs=[...` 	
\r\fÂ \v\uFEFF`];function Pu(r,e,t){var n=r==null?"":""+r;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,o=0;(o=n.indexOf(i,o))>=0;){var l=o+a;(o===0||Gs.includes(n[o-1]))&&(l===n.length||Gs.includes(n[l]))?n=(o===0?"":n.substring(0,o))+n.substring(l+1):o=l}}return n===""?null:n}function Ks(r,e=!1){var t=e?" !important;":";",n="";for(var i in r){var a=r[i];a!=null&&a!==""&&(n+=" "+i+": "+a+t)}return n}function Ua(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function Mu(r,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,o=0,l=!1,c=[];n&&c.push(...Object.keys(n).map(Ua)),i&&c.push(...Object.keys(i).map(Ua));var u=0,f=-1;const y=r.length;for(var d=0;d<y;d++){var _=r[d];if(l?_==="/"&&r[d-1]==="*"&&(l=!1):a?a===_&&(a=!1):_==="/"&&r[d+1]==="*"?l=!0:_==='"'||_==="'"?a=_:_==="("?o++:_===")"&&o--,!l&&a===!1&&o===0){if(_===":"&&f===-1)f=d;else if(_===";"||d===y-1){if(f!==-1){var p=Ua(r.substring(u,f).trim());if(!c.includes(p)){_!==";"&&d++;var v=r.substring(u,d).trim();t+=" "+v+";"}}u=d+1,f=-1}}}}return n&&(t+=Ks(n)),i&&(t+=Ks(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function Dt(r,e,t,n,i,a){var o=r.__className;if(o!==t||o===void 0){var l=Pu(t,n,a);l==null?r.removeAttribute("class"):e?r.className=l:r.setAttribute("class",l),r.__className=t}else if(a&&i!==a)for(var c in a){var u=!!a[c];(i==null||u!==!!i[c])&&r.classList.toggle(c,u)}return a}function Ha(r,e={},t,n){for(var i in t){var a=t[i];e[i]!==a&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,a,n))}}function Ot(r,e,t,n){var i=r.__style;if(i!==e){var a=Mu(e,n);a==null?r.removeAttribute("style"):r.style.cssText=a,r.__style=e}else n&&(Array.isArray(n)?(Ha(r,t==null?void 0:t[0],n[0]),Ha(r,t==null?void 0:t[1],n[1],"important")):Ha(r,t,n));return n}function ea(r,e,t=!1){if(r.multiple){if(e==null)return;if(!hs(e))return Tc();for(var n of r.options)n.selected=e.includes(ai(n));return}for(n of r.options){var i=ai(n);if(Vo(i,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function fl(r){var e=new MutationObserver(()=>{ea(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),wa(()=>{e.disconnect()})}function rt(r,e,t=e){var n=new WeakSet,i=!0;ya(r,"change",a=>{var o=a?"[selected]":":checked",l;if(r.multiple)l=[].map.call(r.querySelectorAll(o),ai);else{var c=r.querySelector(o)??r.querySelector("option:not([disabled])");l=c&&ai(c)}t(l),Te!==null&&n.add(Te)}),Ei(()=>{var a=e();if(r===document.activeElement){var o=ri??Te;if(n.has(o))return}if(ea(r,a,i),i&&a===void 0){var l=r.querySelector(":checked");l!==null&&(a=ai(l),t(a))}r.__value=a,i=!1}),fl(r)}function ai(r){return"__value"in r?r.__value:r.value}const Yn=Symbol("class"),Xn=Symbol("style"),vl=Symbol("is custom element"),hl=Symbol("is html");function $t(r,e){var t=ba(r);t.value===(t.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function Lu(r,e){var t=ba(r);t.checked!==(t.checked=e??void 0)&&(r.checked=e)}function Au(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Vt(r,e,t,n){var i=ba(r);i[e]!==(i[e]=t)&&(e==="loading"&&(r[fc]=t),t==null?r.removeAttribute(e):typeof t!="string"&&pl(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Tu(r,e,t,n,i=!1,a=!1){var o=ba(r),l=o[vl],c=!o[hl],u=e||{},f=r.tagName==="OPTION";for(var d in e)d in t||(t[d]=null);t.class?t.class=ku(t.class):t[Yn]&&(t.class=null),t[Xn]&&(t.style??(t.style=null));var _=pl(r);for(const R in t){let k=t[R];if(f&&R==="value"&&k==null){r.value=r.__value="",u[R]=k;continue}if(R==="class"){var p=r.namespaceURI==="http://www.w3.org/1999/xhtml";Dt(r,p,k,n,e==null?void 0:e[Yn],t[Yn]),u[R]=k,u[Yn]=t[Yn];continue}if(R==="style"){Ot(r,k,e==null?void 0:e[Xn],t[Xn]),u[R]=k,u[Xn]=t[Xn];continue}var v=u[R];if(!(k===v&&!(k===void 0&&r.hasAttribute(R)))){u[R]=k;var y=R[0]+R[1];if(y!=="$$")if(y==="on"){const T={},j="$$"+R;let H=R.slice(2);var g=pu(H);if(vu(H)&&(H=H.slice(0,-7),T.capture=!0),!g&&v){if(k!=null)continue;r.removeEventListener(H,u[j],T),u[j]=null}if(k!=null)if(g)r[`__${H}`]=k,Mt([H]);else{let ne=function(ue){u[R].call(this,ue)};var P=ne;u[j]=sl(H,r,ne,T)}else g&&(r[`__${H}`]=void 0)}else if(R==="style")Vt(r,R,k);else if(R==="autofocus")Zi(r,!!k);else if(!l&&(R==="__value"||R==="value"&&k!=null))r.value=r.__value=k;else if(R==="selected"&&f)Au(r,k);else{var S=R;c||(S=mu(S));var w=S==="defaultValue"||S==="defaultChecked";if(k==null&&!l&&!w)if(o[R]=null,S==="value"||S==="checked"){let T=r;const j=e===void 0;if(S==="value"){let H=T.defaultValue;T.removeAttribute(S),T.defaultValue=H,T.value=T.__value=j?H:null}else{let H=T.defaultChecked;T.removeAttribute(S),T.defaultChecked=H,T.checked=j?H:!1}}else r.removeAttribute(R);else w||_.includes(S)&&(l||typeof k!="string")?(r[S]=k,S in o&&(o[S]=ut)):typeof k!="function"&&Vt(r,S,k)}}}return u}function Nu(r,e,t=[],n=[],i=[],a,o=!1,l=!1){Ao(i,t,n,c=>{var u=void 0,f={},d=r.nodeName==="SELECT",_=!1;if(Kn(()=>{var v=e(...c.map(s)),y=Tu(r,u,v,a,o,l);_&&d&&"value"in v&&ea(r,v.value);for(let S of Object.getOwnPropertySymbols(f))v[S]||st(f[S]);for(let S of Object.getOwnPropertySymbols(v)){var g=v[S];S.description===Ac&&(!u||g!==u[S])&&(f[S]&&st(f[S]),f[S]=Nt(()=>Iu(r,()=>g))),y[S]=g}u=y}),d){var p=r;Ei(()=>{ea(p,u.value,!0),fl(p)})}_=!0})}function ba(r){return r.__attributes??(r.__attributes={[vl]:r.nodeName.includes("-"),[hl]:r.namespaceURI===Lc})}var Us=new Map;function pl(r){var e=r.getAttribute("is")||r.nodeName,t=Us.get(e);if(t)return t;Us.set(e,t=[]);for(var n,i=r,a=Element.prototype;a!==i;){n=_o(i);for(var o in n)n[o].set&&t.push(o);i=_s(i)}return t}function wr(r,e,t=e){var n=new WeakSet;ya(r,"input",async i=>{var a=i?r.defaultValue:r.value;if(a=za(r)?Wa(a):a,t(a),Te!==null&&n.add(Te),await du(),a!==(a=e())){var o=r.selectionStart,l=r.selectionEnd,c=r.value.length;if(r.value=a??"",l!==null){var u=r.value.length;o===l&&l===c&&u>c?(r.selectionStart=u,r.selectionEnd=u):(r.selectionStart=o,r.selectionEnd=Math.min(l,u))}}}),vr(e)==null&&r.value&&(t(za(r)?Wa(r.value):r.value),Te!==null&&n.add(Te)),vn(()=>{var i=e();if(r===document.activeElement){var a=ri??Te;if(n.has(a))return}za(r)&&i===Wa(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}const qa=new Set;function gn(r,e,t,n,i=n){var a=t.getAttribute("type")==="checkbox",o=r;if(e!==null)for(var l of e)o=o[l]??(o[l]=[]);o.push(t),ya(t,"change",()=>{var c=t.__value;a&&(c=Ru(o,c,t.checked)),i(c)},()=>i(a?[]:null)),vn(()=>{var c=n();a?(c=c||[],t.checked=c.includes(t.__value)):t.checked=Vo(t.__value,c)}),wa(()=>{var c=o.indexOf(t);c!==-1&&o.splice(c,1)}),qa.has(o)||(qa.add(o),Dr(()=>{o.sort((c,u)=>c.compareDocumentPosition(u)===4?-1:1),qa.delete(o)})),Dr(()=>{})}function ti(r,e,t=e){ya(r,"change",n=>{var i=n?r.defaultChecked:r.checked;t(i)}),vr(e)==null&&t(r.checked),vn(()=>{var n=e();r.checked=!!n})}function Ru(r,e,t){for(var n=new Set,i=0;i<r.length;i+=1)r[i].checked&&n.add(r[i].__value);return t||n.delete(e),Array.from(n)}function za(r){var e=r.type;return e==="number"||e==="range"}function Wa(r){return r===""?null:+r}var Rr,xn,fi,la,_l;const ca=class ca{constructor(e){W(this,la);W(this,Rr,new WeakMap);W(this,xn);W(this,fi);K(this,fi,e)}observe(e,t){var n=h(this,Rr).get(e)||new Set;return n.add(t),h(this,Rr).set(e,n),Ue(this,la,_l).call(this).observe(e,h(this,fi)),()=>{var i=h(this,Rr).get(e);i.delete(t),i.size===0&&(h(this,Rr).delete(e),h(this,xn).unobserve(e))}}};Rr=new WeakMap,xn=new WeakMap,fi=new WeakMap,la=new WeakSet,_l=function(){return h(this,xn)??K(this,xn,new ResizeObserver(e=>{for(var t of e){ca.entries.set(t.target,t);for(var n of h(this,Rr).get(t.target)||[])n(t)}}))},Ze(ca,"entries",new WeakMap);let ls=ca;var Ou=new ls({box:"border-box"});function Fu(r,e,t){var n=Ou.observe(r,()=>t(r[e]));Ei(()=>(vr(()=>t(r[e])),n))}function Hs(r,e){return r===e||(r==null?void 0:r[Sr])===e}function dn(r={},e,t,n){return Ei(()=>{var i,a;return vn(()=>{i=a,a=[],vr(()=>{r!==t(...a)&&(e(r,...a),i&&Hs(t(...i),r)&&e(null,...i))})}),()=>{Dr(()=>{a&&Hs(t(...a),r)&&e(null,...a)})}}),r}function Vu(r=!1){const e=Xe,t=e.l.u;if(!t)return;let n=()=>il(e.s);if(r){let i=0,a={};const o=Ci(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==a[u]&&(a[u]=c[u],l=!0);return l&&i++,i});n=()=>s(o)}t.b.length&&nu(()=>{qs(e,n),Qa(t.b)}),Er(()=>{const i=vr(()=>t.m.map(cc));return()=>{for(const a of i)typeof a=="function"&&a()}}),t.a.length&&Er(()=>{qs(e,n),Qa(t.a)})}function qs(r,e){if(r.l.s)for(const t of r.l.s)s(t);e()}let Ai=!1;function Bu(r){var e=Ai;try{return Ai=!1,[r(),Ai]}finally{Ai=e}}const ju={get(r,e){if(!r.exclude.includes(e))return s(r.version),e in r.special?r.special[e]():r.props[e]},set(r,e,t){if(!(e in r.special)){var n=Ee;try{zt(r.parent_effect),r.special[e]=ve({get[e](){return r.props[e]}},e,So)}finally{zt(n)}}return r.special[e](t),Ji(r.version),!0},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},deleteProperty(r,e){return r.exclude.includes(e)||(r.exclude.push(e),Ji(r.version)),!0},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function zs(r,e){return new Proxy({props:r,exclude:e,special:{},version:jr(0),parent_effect:Ee},ju)}function ve(r,e,t,n){var P;var i=!Gn||(t&Ic)!==0,a=(t&xc)!==0,o=(t&kc)!==0,l=n,c=!0,u=()=>(c&&(c=!1,l=o?vr(n):n),l),f;if(a){var d=Sr in r||dc in r;f=((P=wn(r,e))==null?void 0:P.set)??(d&&e in r?R=>r[e]=R:void 0)}var _,p=!1;a?[_,p]=Bu(()=>r[e]):_=r[e],_===void 0&&n!==void 0&&(_=u(),f&&(i&&gc(),f(_)));var v;if(i?v=()=>{var R=r[e];return R===void 0?u():(c=!0,R)}:v=()=>{var R=r[e];return R!==void 0&&(l=void 0),R===void 0?l:R},i&&!(t&So))return v;if(f){var y=r.$$legacy;return function(R,k){return arguments.length>0?((!i||!k||y||p)&&f(k?v():R),R):v()}}var g=!1,S=(t&Ec?Ci:ys)(()=>(g=!1,v()));a&&s(S);var w=Ee;return function(R,k){if(arguments.length>0){const T=k?s(S):i&&a?Me(R):R;return D(S,T),g=!0,l!==void 0&&(l=T),R}return hn&&g||w.f&br?S.v:s(S)}}function Hn(r){Xe===null&&wo(),Gn&&Xe.l!==null?$u(Xe).m.push(r):Er(()=>{const e=vr(r);if(typeof e=="function")return e})}function Sa(r){Xe===null&&wo(),Hn(()=>()=>vr(r))}function $u(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Gu="5";var ho;typeof window<"u"&&((ho=window.__svelte??(window.__svelte={})).v??(ho.v=new Set)).add(Gu);const Ku=0,Uu=126,Hu=231,qu=6;class zu{constructor(){this.universe=new Uint8Array(512).fill(0),this.device=null,this.interval=null,this.updateRate=1e3/60,this.connected=!1}async connect(){if(!("usb"in navigator))throw new Error("WebUSB is not supported in this browser");try{return this.device=await navigator.usb.requestDevice({filters:[{vendorId:1027}]}),await this.device.open(),await this.device.claimInterface(0),await this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:0}),this.connected=!0,this.interval=setInterval(()=>{this.sendUniverse()},this.updateRate),!0}catch(e){throw console.error("Failed to connect:",e),e}}disconnect(){this.interval&&(clearInterval(this.interval),this.interval=null),this.device&&(this.device.close(),this.device=null),this.connected=!1}setChannel(e,t){e>=0&&e<512&&(this.universe[e]=Math.max(0,Math.min(255,t)))}getChannel(e){return this.universe[e]||0}setChannels(e,t){t.forEach((n,i)=>{this.setChannel(e+i,n)})}getUniverse(){return this.universe}clearUniverse(){this.universe.fill(0)}sendUniverse(){if(!this.device||!this.connected)return;const e=Uint8Array.from([Ku,...this.universe]),t=Uint8Array.from([Uu,qu,e.length&255,e.length>>8&255,...e,Hu]);this.device.transferOut(2,t).catch(n=>{console.error("Failed to send DMX data:",n)})}}const Oe={RGB:{name:"RGB Light",channels:3,components:[{name:"Red",channel:0},{name:"Green",channel:1},{name:"Blue",channel:2}],controls:[{name:"Color",type:"rgb",components:{r:0,g:1,b:2}}]},RGBA:{name:"RGBA Light",channels:4,components:[{name:"Red",channel:0},{name:"Green",channel:1},{name:"Blue",channel:2},{name:"Amber",channel:3}],controls:[{name:"Color",type:"rgb",components:{r:0,g:1,b:2}},{name:"Amber",type:"slider",color:"#ffbf00",components:{value:3}}]},RGBW:{name:"RGBW Light",channels:4,components:[{name:"Red",channel:0},{name:"Green",channel:1},{name:"Blue",channel:2},{name:"White",channel:3}],controls:[{name:"Color",type:"rgb",components:{r:0,g:1,b:2}},{name:"White",type:"slider",color:"#808080",components:{value:3}}]},DIMMER:{name:"Dimmer",channels:1,components:[{name:"Intensity",channel:0}],controls:[{name:"Intensity",type:"slider",color:"#888888",components:{value:0}}]},SMOKE:{name:"Smoke Machine",channels:1,components:[{name:"Output",channel:0}],controls:[{name:"Output",type:"slider",color:"#666666",components:{value:0}}]},MOVING_HEAD:{name:"Moving Head (Basic)",channels:7,components:[{name:"Pan",channel:0},{name:"Tilt",channel:1},{name:"Dimmer",channel:2},{name:"Red",channel:3},{name:"Green",channel:4},{name:"Blue",channel:5},{name:"White",channel:6}],controls:[{name:"Pan/Tilt",type:"xypad",components:{x:0,y:1}},{name:"Dimmer",type:"slider",color:"#888888",components:{value:2}},{name:"Color",type:"rgb",components:{r:3,g:4,b:5}},{name:"White",type:"slider",color:"#808080",components:{value:6}}]},FLAMETHROWER:{name:"Flamethrower",channels:2,components:[{name:"Safety",channel:0},{name:"Fuel",channel:1}],controls:[{name:"Safety",type:"toggle",offValue:0,onValue:125,components:{value:0}},{name:"Fuel",type:"slider",color:"#ff5722",components:{value:1}}]}};class Jn{constructor(e,t,n,i="",a=null,o=null,l=null,c=!1){this.id=e,this.type=t,this.startChannel=n,this.name=i||`${Oe[t].name} ${e}`,this.defaultValues=new Array(Oe[t].channels).fill(0),this.linkedTo=a,this.syncedControls=l,this.mirrorPan=c,this.cssId=o||this.generateCssId(this.name)}generateCssId(e){return e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}updateCssId(){this.cssId=this.generateCssId(this.name)}setValue(e,t){this.defaultValues[e]=Math.max(0,Math.min(255,t))}getValue(e){return this.defaultValues[e]}getChannelValues(){return this.defaultValues}isLinked(){return this.linkedTo!==null}}function oi(r,e){if(!e||e.length===0)return"#000000";switch(r){case"RGB":{const[t,n,i]=e;return`rgb(${t}, ${n}, ${i})`}case"RGBA":{const[t,n,i,a]=e,o=255,l=191,c=0,u=Math.min(255,t+o*a/255),f=Math.min(255,n+l*a/255),d=Math.min(255,i+c*a/255);return`rgb(${Math.round(u)}, ${Math.round(f)}, ${Math.round(d)})`}case"RGBW":{const[t,n,i,a]=e,o=Math.min(255,t+a),l=Math.min(255,n+a),c=Math.min(255,i+a);return`rgb(${Math.round(o)}, ${Math.round(l)}, ${Math.round(c)})`}case"MOVING_HEAD":{const t=e[2]||0,n=e[3]||0,i=e[4]||0,a=e[5]||0,o=e[6]||0;let l=Math.min(255,n+o),c=Math.min(255,i+o),u=Math.min(255,a+o);return l=Math.round(l*t/255),c=Math.round(c*t/255),u=Math.round(u*t/255),`rgb(${l}, ${c}, ${u})`}case"DIMMER":{const t=e[0]||0;return`rgb(${t}, ${t}, ${t})`}case"SMOKE":{const t=e[0]||0,n=Math.round(t*.7);return`rgb(${Math.round(t*.5)}, ${Math.round(t*.5)}, ${n})`}default:return"#000000"}}class Wu{constructor(e=0,t="RGB",n=[0,0,0]){this.time=e,this.deviceType=t,this.values=[...n]}getProperties(){const e=oi(this.deviceType,this.values);if(this.deviceType==="MOVING_HEAD"){const t=this.values[0]||0,n=this.values[1]||0,i=t/255*100-50,a=n/255*100-50;return{color:e,transform:`translate(${i}%, ${a}%)`}}return{color:e}}toCSS(){const e=this.getProperties(),t=Object.entries(e).map(([i,a])=>`${i}: ${a}`).join("; ");return`${Math.round(this.time*100)}% { ${t}; }`}}class Ca{constructor(e="animation",t="RGB",n=[],i=null,a=null,o=null){this.name=e,this.controls=a||[],this.displayName=o,this.keyframes=n,this.cssName=i||this._generateCSSName()}getDeviceTypeForEditing(){if(!this.controls||this.controls.length===0)return"RGB";for(const[e,t]of Object.entries(Oe))if(this.controls.every(i=>t.controls.some(a=>a.name===i)))return e;return"RGB"}_generateCSSName(){return this.name?this.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):"animation"}updateCSSName(){this.cssName=this._generateCSSName()}addKeyframe(e,t){const n=this.getDeviceTypeForEditing(),i=new Wu(e,n,t);return this.keyframes=[...this.keyframes,i].sort((a,o)=>a.time-o.time),i}removeKeyframe(e){const t=this.keyframes.indexOf(e);t!==-1&&this.keyframes.splice(t,1)}toCSS(){if(this.keyframes.length===0)return"";const e=this.keyframes.map(t=>t.toCSS()).join(`
  `);return`@keyframes ${this.cssName} {
  ${e}
}`}getKeyframeColor(e){return oi(e.deviceType,e.values)}getValuesAtTime(e){if(this.keyframes.length===0){const n=this.getDeviceTypeForEditing(),i=Oe[n],a=(i==null?void 0:i.channels)||3;return new Array(a).fill(0)}const t=[...this.keyframes].sort((n,i)=>n.time-i.time);if(e<=t[0].time)return[...t[0].values];if(e>=t[t.length-1].time)return[...t[t.length-1].values];for(let n=0;n<t.length-1;n++){const i=t[n],a=t[n+1];if(e>=i.time&&e<=a.time){const o=(e-i.time)/(a.time-i.time),l=[];for(let c=0;c<i.values.length;c++){const u=i.values[c],f=a.values[c];l.push(Math.round(u+(f-u)*o))}return l}}return[...t[0].values]}getGradientSegments(e=1e3){if(this.keyframes.length===0)return[{left:0,width:e,gradient:"#000000"}];const t=[],n=[...this.keyframes].sort((a,o)=>a.time-o.time);if(n[0].time>0){const a=this.getKeyframeColor(n[0]);t.push({left:0,width:n[0].time*e,gradient:`linear-gradient(to right, #000000, ${a})`})}for(let a=0;a<n.length-1;a++){const o=n[a],l=n[a+1],c=this.getKeyframeColor(o),u=this.getKeyframeColor(l);t.push({left:o.time*e,width:(l.time-o.time)*e,gradient:`linear-gradient(to right, ${c}, ${u})`})}const i=n[n.length-1];if(i.time<1){const a=this.getKeyframeColor(i);t.push({left:i.time*e,width:(1-i.time)*e,gradient:`linear-gradient(to right, ${a}, #000000)`})}return t}getAffectedChannels(e=null){const t=e||this.getDeviceTypeForEditing(),n=Oe[t];if(!n)return[];if(!this.controls||this.controls.length===0){const a=n.channels||3;return Array.from({length:a},(o,l)=>l)}const i=new Set;for(const a of this.controls){const o=n.controls.find(l=>l.name===a);if(o)for(const l of Object.values(o.components)){const c=n.components[l].channel;i.add(c)}}return Array.from(i).sort((a,o)=>a-o)}getNumChannels(e=null){return this.getAffectedChannels(e).length}getDisplayName(){return this.displayName?this.displayName:this.controls&&this.controls.length>0?this.controls.join(", "):"Animation"}getControlNames(){return this.controls||[]}toJSON(){return{name:this.name,controls:this.controls,displayName:this.displayName,keyframes:this.keyframes.map(e=>({time:e.time,deviceType:e.deviceType,values:e.values}))}}static fromJSON(e){let t=e.controls||null;if(!t&&e.controlName&&(t=[e.controlName]),!t&&e.deviceType){const a=Oe[e.deviceType];a&&(t=a.controls.map(o=>o.name))}(!t||t.length===0)&&(t=["Color"]);const n=e.displayName||null,i=new Ca(e.name,"RGB",[],null,t,n);for(const a of e.keyframes)if(a.values)i.addKeyframe(a.time,a.values);else if(a.properties){const o=new Array(i.deviceType==="RGB"?3:4).fill(0);i.addKeyframe(a.time,o)}return i}}class Yu{constructor(){this.animations=new Map,this.listeners=new Map,this.load()}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}add(e){this.animations.set(e.name,e),this.save(),this._emit("changed",{type:"add",animation:e})}remove(e){const t=this.animations.get(e);this.animations.delete(e),this.save(),this._emit("changed",{type:"remove",animation:t,name:e})}get(e){return this.animations.get(e)}getAll(){return Array.from(this.animations.values())}has(e){return this.animations.has(e)}rename(e,t){const n=this.animations.get(e);return n?(n.name=t,this.animations.delete(e),this.animations.set(t,n),this.save(),!0):!1}toCSS(){return this.getAll().map(e=>e.toCSS()).filter(e=>e).join(`

`)}save(){const e=this.getAll().map(t=>t.toJSON());localStorage.setItem("dmx-animations",JSON.stringify(e))}load(){const e=localStorage.getItem("dmx-animations");if(e)try{const t=JSON.parse(e);for(const n of t){const i=Ca.fromJSON(n);this.animations.set(i.name,i)}}catch(t){console.error("Failed to load animations:",t)}}clear(){this.animations.clear(),this.save()}}class Bn{constructor(e={}){this.id=e.id||`mapping-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,this.name=e.name||"Untitled Mapping",this.mode=e.mode||"trigger",this.inputDeviceId=e.inputDeviceId||null,this.inputControlId=e.inputControlId||null,this.inputDeviceName=e.inputDeviceName||null,this.color="color"in e?e.color:this._generateRandomColor(),this.triggerType=e.triggerType||"pressed",this.actionType=e.actionType||"animation",this.animationName=e.animationName||null,this.duration=e.duration||1e3,this.easing=e.easing||"linear",this.iterations=e.iterations||1,this.targetDeviceIds=e.targetDeviceIds||[],this.setValueDeviceId=e.setValueDeviceId||null,this.channelValues=e.channelValues||{},this.propertyName=e.propertyName||"--value",this.propertyType=e.propertyType||"percentage",this.range=e.range||[0,100],this.cssClassName=e.cssClassName||this._generateClassName(),this.cssClassDown=e.cssClassDown||(this.isButtonInput()?this._generateButtonDownClass():null),this.cssClassUp=e.cssClassUp||(this.isButtonInput()?this._generateButtonUpClass():null),this.cssProperty=e.cssProperty||(this.isButtonInput()?null:this._generatePropertyName())}_generateRandomColor(){const e=Math.floor(Math.random()*360),t=70+Math.floor(Math.random()*30),n=50+Math.floor(Math.random()*20);return`hsl(${e}, ${t}%, ${n}%)`}_generateClassName(){if(!this.inputDeviceId||!this.inputControlId)return`mapping-${this.id}`;const e=this.inputControlId.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase();if(this.mode==="input")return e;const t=this.triggerType==="pressed"?"down":this.triggerType==="not-pressed"?"up":"always";return`${e}_${t}`}updateClassName(){this.cssClassName=this._generateClassName()}_generatePropertyName(){return this.name?`--${this.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}`:"--value"}_generateButtonDownClass(){return this.name?`${this.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_down`:""}_generateButtonUpClass(){return this.name?`${this.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_up`:""}updateCSSIdentifiers(){this.isButtonInput()?(this.cssClassDown=this._generateButtonDownClass(),this.cssClassUp=this._generateButtonUpClass(),this.cssProperty=null):(this.cssProperty=this._generatePropertyName(),this.cssClassDown=null,this.cssClassUp=null)}toCSS(e=[]){return this.mode==="trigger"?this._generateTriggerCSS(e):""}_generateTriggerCSS(e=[]){if(!this.animationName)return"";const t=this.targetDeviceIds.map(a=>{const o=e.find(l=>l.id===a);return o?`#${o.cssId}`:null}).filter(a=>a!==null).join(", ");if(!t)return"";const n=this.iterations==="infinite"?"infinite":this.iterations,i=(this.duration/1e3).toFixed(3);return`.${this.cssClassName} ${t} {
  animation: ${this.animationName} ${i}s ${this.easing} ${n};
}`}getPropertyName(){return this.propertyName.startsWith("--")?this.propertyName:`--${this.propertyName}`}getInputPropertyName(){return this.cssProperty}isButtonInput(){return this.inputControlId?this.inputControlId.startsWith("button-")||this.inputControlId.startsWith("note-")||this.inputControlId.startsWith("key-"):!1}getButtonDownClass(){return this.cssClassDown}getButtonUpClass(){return this.cssClassUp}mapValue(e){const[t,n]=this.range,i=t+(n-t)*e;switch(this.propertyType){case"percentage":return`${i.toFixed(1)}%`;case"degrees":return`${i.toFixed(1)}deg`;case"number":return i.toFixed(2);default:return i.toString()}}toJSON(){return{id:this.id,name:this.name,mode:this.mode,inputDeviceId:this.inputDeviceId,inputControlId:this.inputControlId,inputDeviceName:this.inputDeviceName,color:this.color,triggerType:this.triggerType,actionType:this.actionType,animationName:this.animationName,duration:this.duration,easing:this.easing,iterations:this.iterations,targetDeviceIds:this.targetDeviceIds,setValueDeviceId:this.setValueDeviceId,channelValues:this.channelValues,propertyName:this.propertyName,propertyType:this.propertyType,range:this.range,cssClassName:this.cssClassName}}static fromJSON(e){const t=new Bn(e);return t.mode==="input"&&t.cssClassName.match(/_(down|up|always)$/)&&(t.cssClassName=t._generateClassName()),t}}class ml{constructor(){this.mappings=new Map,this.listeners=new Map,this.load()}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}add(e){return this.mappings.set(e.id,e),this.save(),this._emit("changed",{type:"add",mapping:e}),e}update(e){this.mappings.has(e.id)&&(this.mappings.set(e.id,e),this.save(),this._emit("changed",{type:"update",mapping:e}))}remove(e){const t=this.mappings.get(e);this.mappings.delete(e),this.save(),this._emit("changed",{type:"remove",mapping:t,id:e})}get(e){return this.mappings.get(e)}getAll(){return Array.from(this.mappings.values())}getByInput(e,t){return this.getAll().filter(n=>n.inputDeviceId===e&&n.inputControlId===t)}getTriggerMappings(){return this.getAll().filter(e=>e.mode==="trigger")}getDirectMappings(){return this.getAll().filter(e=>e.mode==="direct")}toCSS(e=[]){return this.getTriggerMappings().map(t=>t.toCSS(e)).filter(t=>t).join(`

`)}save(){const e=this.getAll().map(t=>t.toJSON());localStorage.setItem("dmx-mappings",JSON.stringify(e))}load(){const e=localStorage.getItem("dmx-mappings");if(e)try{const t=JSON.parse(e);for(const n of t){const i=Bn.fromJSON(n);this.mappings.set(i.id,i)}}catch(t){console.error("Failed to load mappings:",t)}}clear(){this.mappings.clear(),this.save()}}class gl{constructor(){this.activeClasses=new Set,this.notPressedClasses=new Set,this.alwaysClasses=new Set,this.container=null,this.setValueCallback=null,this.activeSetValueMappings=new Map}setContainer(e){this.container=e;for(const t of this.notPressedClasses)e.classList.add(t);for(const t of this.alwaysClasses)e.classList.add(t)}setSetValueCallback(e){this.setValueCallback=e}register(e){e.mode==="trigger"&&(e.actionType==="animation"?e.triggerType==="not-pressed"?(this.notPressedClasses.add(e.cssClassName),this.container&&this.container.classList.add(e.cssClassName)):e.triggerType==="always"&&(this.alwaysClasses.add(e.cssClassName),this.container&&this.container.classList.add(e.cssClassName)):e.actionType==="setValue"&&e.triggerType==="always"&&this.setValueCallback&&(this.setValueCallback(e.setValueDeviceId,e.channelValues),this.activeSetValueMappings.set(e.id,e)))}unregister(e){e.mode==="trigger"&&(e.actionType==="animation"?(this.notPressedClasses.delete(e.cssClassName),this.alwaysClasses.delete(e.cssClassName),this.container&&this.container.classList.remove(e.cssClassName)):e.actionType==="setValue"&&this.activeSetValueMappings.delete(e.id))}trigger(e){if(e.mode==="trigger"){if(e.actionType==="animation"){if(!this.container)return;const t=e.cssClassName;e.triggerType==="pressed"?(this.container.classList.add(t),this.activeClasses.add(t)):e.triggerType==="not-pressed"&&this.container.classList.remove(t)}else if(e.actionType==="setValue"){if(!this.setValueCallback)return;e.triggerType==="pressed"?(this.setValueCallback(e.setValueDeviceId,e.channelValues),this.activeSetValueMappings.set(e.id,e)):e.triggerType==="not-pressed"&&this.activeSetValueMappings.delete(e.id)}}}release(e){if(e.mode==="trigger"){if(e.actionType==="animation"){if(!this.container)return;const t=e.cssClassName;e.triggerType==="pressed"?(this.container.classList.remove(t),this.activeClasses.delete(t)):e.triggerType==="not-pressed"&&this.container.classList.add(t)}else if(e.actionType==="setValue"){if(!this.setValueCallback)return;e.triggerType==="pressed"?this.activeSetValueMappings.delete(e.id):e.triggerType==="not-pressed"&&(this.setValueCallback(e.setValueDeviceId,e.channelValues),this.activeSetValueMappings.set(e.id,e))}}}addRawClass(e){this.container&&this.container.classList.add(e)}removeRawClass(e){this.container&&this.container.classList.remove(e)}clearAll(){if(this.container){for(const e of this.activeClasses)this.container.classList.remove(e);this.activeClasses.clear()}}}class Xu{constructor(e,t){this.animationLibrary=e,this.mappingLibrary=t}generate(e=[]){const t=[];if(t.push("/* DMX Controller - Generated CSS */"),t.push("/* This stylesheet is auto-generated from your animations and input mappings */"),t.push("/* You can edit this CSS and the changes will be reflected in the interface */"),t.push(`/* Note: @property definitions are in a separate, non-editable include */
`),e.length>0){t.push("/* === Default Device Values === */"),t.push("/* These selectors set the default state for each device */");for(const o of e){const l=this._generateDeviceDefaults(o);l&&t.push(l)}t.push("")}const n=this.animationLibrary.toCSS();n&&(t.push("/* === Animations === */"),t.push(n),t.push(""));const i=this.mappingLibrary.toCSS(e);i&&(t.push("/* === Triggers === */"),t.push(i),t.push(""));const a=this.mappingLibrary.getDirectMappings();if(a.length>0){t.push("/* === Custom Properties (Direct Control) === */"),t.push("/* These properties are updated live via JavaScript */"),t.push(":root {");for(const o of a){const l=o.getPropertyName(),c=o.mapValue(0);t.push(`  ${l}: ${c}; /* ${o.name} */`)}t.push(`}
`)}return t.push("/* === Custom Styles === */"),t.push("/* Add your custom CSS below to override device defaults and apply animations */"),t.push(""),t.join(`
`)}_generateDeviceDefaults(e){if(!Oe[e.type]||e.isLinked&&e.isLinked())return null;const n=[],i=e.defaultValues||[];switch(e.type){case"RGB":const[a,o,l]=i;n.push(`  color: rgb(${a||0}, ${o||0}, ${l||0});`);break;case"RGBA":const[c,u,f,d]=i;n.push(`  color: rgb(${c||0}, ${u||0}, ${f||0});`);const _=Math.round((d||0)/255*100);n.push(`  --amber: ${_}%;`);break;case"RGBW":const[p,v,y,g]=i;n.push(`  color: rgb(${p||0}, ${v||0}, ${y||0});`),n.push(`  /* White channel: ${g||0} */`);break;case"DIMMER":const S=i[0]||0;n.push(`  opacity: ${(S/255).toFixed(2)};`);break;case"SMOKE":const w=i[0]||0,P=Math.round(w/255*100);n.push(`  --smoke: ${P}%;`);break;case"MOVING_HEAD":const[R,k,T,j,H,ne,ue]=i,ce=R!==void 0?Math.round(R/255*100-50):0,oe=k!==void 0?Math.round(k/255*100):0;n.push(`  --pan: ${ce}%;`),n.push(`  --tilt: ${oe}%;`),n.push(`  opacity: ${T!==void 0?(T/255).toFixed(2):"1"};`),n.push(`  color: rgb(${j||0}, ${H||0}, ${ne||0});`),ue!==void 0&&n.push(`  /* White channel: ${ue} */`);break;case"FLAMETHROWER":const[we,me]=i,he=we>=125?"probably":"none",J=Math.round(me/255*100);n.push(`  --safety: ${he};`),n.push(`  --fuel: ${J}%;`);break;default:return null}return n.length===0?null:`#${e.cssId} {
${n.join(`
`)}
}`}}class Ju{constructor(){this.deviceElements=new Map,this.container=null,this.previousValues=new Map}initialize(e){this.container=e}updateDevices(e){if(this.container){for(const[t,n]of this.deviceElements)e.find(i=>i.id===t)||(n.remove(),this.deviceElements.delete(t));for(const t of e){let n=this.deviceElements.get(t.id);const i=t.cssId;n?n.id!==i&&(n.id=i):(n=document.createElement("div"),n.id=i,n.className="dmx-device",n.dataset.deviceType=t.type,this.container.appendChild(n),this.deviceElements.set(t.id,n)),n.dataset.deviceName=t.name,n.dataset.deviceType=t.type}}}sampleDevice(e){const t=this.deviceElements.get(e.id);if(!t)return console.warn(`[CSSSampler] No element found for device ${e.id}`),null;t.offsetHeight;const n=window.getComputedStyle(t),i={};switch(e.type){case"RGB":Object.assign(i,this._sampleRGB(n));break;case"RGBA":Object.assign(i,this._sampleRGBA(n));break;case"RGBW":Object.assign(i,this._sampleRGBW(n));break;case"DIMMER":Object.assign(i,this._sampleDimmer(n));break;case"SMOKE":Object.assign(i,this._sampleSmoke(n));break;case"MOVING_HEAD":Object.assign(i,this._sampleMovingHead(n));break;case"FLAMETHROWER":Object.assign(i,this._sampleFlamethrower(n));break}return this.previousValues.set(e.id,{...i}),i}sampleAll(e){const t=new Map;for(const n of e){const i=this.sampleDevice(n);i&&t.set(n.id,i)}return t}_sampleRGB(e){const t=this._parseComputedColor(e.color);return{Red:t.r,Green:t.g,Blue:t.b}}_sampleRGBA(e){const t=this._parseComputedColor(e.color),i=(e.getPropertyValue("--amber")||"0%").match(/(\d+(?:\.\d+)?)/),a=i?parseFloat(i[1]):0,o=Math.round(Math.max(0,Math.min(100,a))*255/100);return{Red:t.r,Green:t.g,Blue:t.b,Amber:o}}_sampleRGBW(e){const t=this._parseComputedColor(e.color),n=Math.min(t.r,t.g,t.b);return{Red:t.r,Green:t.g,Blue:t.b,White:n}}_sampleDimmer(e){const t=parseFloat(e.opacity)||1;return{Intensity:Math.round(t*255)}}_sampleSmoke(e){const n=(e.getPropertyValue("--smoke")||"0%").match(/(\d+(?:\.\d+)?)/),i=n?parseFloat(n[1]):0;return{Output:Math.round(Math.max(0,Math.min(100,i))*255/100)}}_sampleMovingHead(e){const t=this._parseComputedColor(e.color),n=parseFloat(e.opacity)||1,i=e.getPropertyValue("--pan")||"0%",a=e.getPropertyValue("--tilt")||"0%",o=i.match(/(-?\d+(?:\.\d+)?)/),l=o?parseFloat(o[1]):0,c=Math.round((Math.max(-50,Math.min(50,l))+50)/100*255),u=a.match(/(\d+(?:\.\d+)?)/),f=u?parseFloat(u[1]):0,d=Math.round(Math.max(0,Math.min(100,f))*255/100);return{Pan:c,Tilt:d,Dimmer:Math.round(n*255),Red:t.r,Green:t.g,Blue:t.b,White:Math.min(t.r,t.g,t.b)}}_sampleFlamethrower(e){const t=e.getPropertyValue("--safety")||"none",n=e.getPropertyValue("--fuel")||"0%",i=t.trim()==="probably"?125:0,a=n.match(/(\d+(?:\.\d+)?)/),o=a?parseFloat(a[1]):0,l=Math.round(Math.max(0,Math.min(100,o))*255/100);return{Safety:i,Fuel:l}}_parseComputedColor(e){const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return t?{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3]),a:t[4]?parseFloat(t[4]):1}:{r:0,g:0,b:0,a:1}}_parseTranslate(e){if(!e||e==="none")return{x:127,y:127};const t=e.match(/translate\(([^,)]+)(?:,?\s+([^)]+))?\)/);if(t){const n=this._parsePercentage(t[1]),i=t[2]?this._parsePercentage(t[2]):n;return{x:Math.round(n*255/100),y:Math.round(i*255/100)}}return{x:127,y:127}}_parsePercentage(e){const t=parseFloat(e);return e.includes("%")?Math.max(0,Math.min(100,t)):Math.max(0,Math.min(100,t/255*100))}getElement(e){return this.deviceElements.get(e)}clear(){for(const e of this.deviceElements.values())e.remove();this.deviceElements.clear()}}class yl{constructor(){this.properties=new Map,this.styleElement=null}initialize(){this.styleElement=document.createElement("style"),this.styleElement.id="dmx-custom-properties",document.head.appendChild(this.styleElement),this._updateStyle()}setProperty(e,t){e.startsWith("--")||(e=`--${e}`),this.properties.set(e,t),this._updateStyle()}getProperty(e){return e.startsWith("--")||(e=`--${e}`),this.properties.get(e)}_updateStyle(){if(!this.styleElement)return;const e=Array.from(this.properties.entries()).map(([t,n])=>`  ${t}: ${n};`).join(`
`);this.styleElement.textContent=`:root {
${e}
}`}getAll(){return Array.from(this.properties.entries()).map(([e,t])=>({name:e,value:t}))}clear(){this.properties.clear(),this._updateStyle()}destroy(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.properties.clear()}}function Zu(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var cs={},Ya={},us=function(r,e){return us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},us(r,e)};function wl(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");us(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ta=function(){return ta=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ta.apply(this,arguments)};function bl(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Sl(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var l=r.length-1;l>=0;l--)(o=r[l])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function Cl(r,e){return function(t,n){e(t,n,r)}}function Dl(r,e,t,n,i,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,_=!1,p=t.length-1;p>=0;p--){var v={};for(var y in n)v[y]=y==="access"?{}:n[y];for(var y in n.access)v.access[y]=n.access[y];v.addInitializer=function(S){if(_)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,t[p])(l==="accessor"?{get:f.get,set:f.set}:f[c],v);if(l==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(d=o(g.get))&&(f.get=d),(d=o(g.set))&&(f.set=d),(d=o(g.init))&&i.unshift(d)}else(d=o(g))&&(l==="field"?i.unshift(d):f[c]=d)}u&&Object.defineProperty(u,n.name,f),_=!0}function El(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function Il(r){return typeof r=="symbol"?r:"".concat(r)}function xl(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function kl(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Pl(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(f){try{u(n.next(f))}catch(d){o(d)}}function c(f){try{u(n.throw(f))}catch(d){o(d)}}function u(f){f.done?a(f.value):i(f.value).then(l,c)}u((n=n.apply(r,e||[])).next())})}function Ml(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Da=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function Ll(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Da(e,r,t)}function ra(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ds(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function Al(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Ds(arguments[e]));return r}function Tl(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,l=a.length;o<l;o++,i++)n[i]=a[o];return n}function Nl(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function jn(r){return this instanceof jn?(this.v=r,this):new jn(r)}function Rl(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(v){return Promise.resolve(v).then(p,d)}}function l(p,v){n[p]&&(i[p]=function(y){return new Promise(function(g,S){a.push([p,y,g,S])>1||c(p,y)})},v&&(i[p]=v(i[p])))}function c(p,v){try{u(n[p](v))}catch(y){_(a[0][3],y)}}function u(p){p.value instanceof jn?Promise.resolve(p.value.v).then(f,d):_(a[0][2],p)}function f(p){c("next",p)}function d(p){c("throw",p)}function _(p,v){p(v),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Ol(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=r[i]?function(o){return(t=!t)?{value:jn(r[i](o)),done:!1}:a?a(o):o}:a}}function Fl(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ra=="function"?ra(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=r[a]&&function(o){return new Promise(function(l,c){o=r[a](o),i(l,c,o.done,o.value)})}}function i(a,o,l,c){Promise.resolve(c).then(function(u){a({value:u,done:l})},o)}}function Vl(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var Qu=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e},ds=function(r){return ds=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},ds(r)};function Bl(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=ds(r),n=0;n<t.length;n++)t[n]!=="default"&&Da(e,r,t[n]);return Qu(e,r),e}function jl(r){return r&&r.__esModule?r:{default:r}}function $l(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Gl(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function Kl(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function Ul(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var ed=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function Hl(r){function e(a){r.error=r.hasError?new ed(a,r.error,"An error was suppressed during disposal."):a,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function ql(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,a,o){return n?e?".jsx":".js":i&&(!a||!o)?t:i+a+"."+o.toLowerCase()+"js"}):r}const td={__extends:wl,__assign:ta,__rest:bl,__decorate:Sl,__param:Cl,__esDecorate:Dl,__runInitializers:El,__propKey:Il,__setFunctionName:xl,__metadata:kl,__awaiter:Pl,__generator:Ml,__createBinding:Da,__exportStar:Ll,__values:ra,__read:Ds,__spread:Al,__spreadArrays:Tl,__spreadArray:Nl,__await:jn,__asyncGenerator:Rl,__asyncDelegator:Ol,__asyncValues:Fl,__makeTemplateObject:Vl,__importStar:Bl,__importDefault:jl,__classPrivateFieldGet:$l,__classPrivateFieldSet:Gl,__classPrivateFieldIn:Kl,__addDisposableResource:Ul,__disposeResources:Hl,__rewriteRelativeImportExtension:ql},rd=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ul,get __assign(){return ta},__asyncDelegator:Ol,__asyncGenerator:Rl,__asyncValues:Fl,__await:jn,__awaiter:Pl,__classPrivateFieldGet:$l,__classPrivateFieldIn:Kl,__classPrivateFieldSet:Gl,__createBinding:Da,__decorate:Sl,__disposeResources:Hl,__esDecorate:Dl,__exportStar:Ll,__extends:wl,__generator:Ml,__importDefault:jl,__importStar:Bl,__makeTemplateObject:Vl,__metadata:kl,__param:Cl,__propKey:Il,__read:Ds,__rest:bl,__rewriteRelativeImportExtension:ql,__runInitializers:El,__setFunctionName:xl,__spread:Al,__spreadArray:Nl,__spreadArrays:Tl,__values:ra,default:td},Symbol.toStringTag,{value:"Module"})),nd=Zu(rd);var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.MODEL_NAMES=ht.DeviceModelId=void 0;var _t;(function(r){r.ORIGINAL="original",r.ORIGINALV2="originalv2",r.ORIGINALMK2="original-mk2",r.ORIGINALMK2SCISSOR="original-mk2-scissor",r.MINI="mini",r.XL="xl",r.PEDAL="pedal",r.PLUS="plus",r.NEO="neo",r.STUDIO="studio",r.MODULE6="6-module",r.MODULE15="15-module",r.MODULE32="32-module",r.NETWORK_DOCK="network-dock"})(_t||(ht.DeviceModelId=_t={}));ht.MODEL_NAMES={[_t.ORIGINAL]:"Stream Deck",[_t.MINI]:"Stream Deck Mini",[_t.XL]:"Stream Deck XL",[_t.ORIGINALV2]:"Stream Deck",[_t.ORIGINALMK2]:"Stream Deck MK.2",[_t.ORIGINALMK2SCISSOR]:"Stream Deck MK.2 (Scissor)",[_t.PLUS]:"Stream Deck +",[_t.PEDAL]:"Stream Deck Pedal",[_t.NEO]:"Stream Deck Neo",[_t.STUDIO]:"Stream Deck Studio",[_t.MODULE6]:"Stream Deck 6 Module",[_t.MODULE15]:"Stream Deck 15 Module",[_t.MODULE32]:"Stream Deck 32 Module",[_t.NETWORK_DOCK]:"Stream Deck Network Dock"};var Ti={},Ni={},Zn={},zl={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,d,_){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,d||c,_),v=t?t+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=t?t+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var _=0,p=d.length,v=new Array(p);_<p;_++)v[_]=d[_].fn;return v},l.prototype.listenerCount=function(u){var f=t?t+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,_,p,v){var y=t?t+u:u;if(!this._events[y])return!1;var g=this._events[y],S=arguments.length,w,P;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),S){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,f),!0;case 3:return g.fn.call(g.context,f,d),!0;case 4:return g.fn.call(g.context,f,d,_),!0;case 5:return g.fn.call(g.context,f,d,_,p),!0;case 6:return g.fn.call(g.context,f,d,_,p,v),!0}for(P=1,w=new Array(S-1);P<S;P++)w[P-1]=arguments[P];g.fn.apply(g.context,w)}else{var R=g.length,k;for(P=0;P<R;P++)switch(g[P].once&&this.removeListener(u,g[P].fn,void 0,!0),S){case 1:g[P].fn.call(g[P].context);break;case 2:g[P].fn.call(g[P].context,f);break;case 3:g[P].fn.call(g[P].context,f,d);break;case 4:g[P].fn.call(g[P].context,f,d,_);break;default:if(!w)for(k=1,w=new Array(S-1);k<S;k++)w[k-1]=arguments[k];g[P].fn.apply(g[P].context,w)}}return!0},l.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,_){var p=t?t+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!_||v.once)&&(!d||v.context===d)&&o(this,p);else{for(var y=0,g=[],S=v.length;y<S;y++)(v[y].fn!==f||_&&!v[y].once||d&&v[y].context!==d)&&g.push(v[y]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=t?t+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l})(zl);var Wl=zl.exports,qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.wrapBufferToPreparedBuffer=id;qn.unwrapPreparedBufferToBuffer=ad;function id(r,e,t,n){let i=t;return n&&(typeof Buffer<"u"?i=t.map(a=>Buffer.from(a).toString("base64")):i=t.map(a=>btoa(String.fromCharCode(...a)))),{if_you_change_this_you_will_break_everything:"This is a encoded form of the buffer, exactly as the Stream Deck expects it. Do not touch this object, or you can crash your stream deck",modelId:r,type:e,do_not_touch:i}}function ad(r,e){const t=e;if(t.modelId!==r)throw new Error("Prepared buffer is for a different model!");return t.do_not_touch.map(n=>{if(typeof n=="string")return typeof Buffer<"u"?Buffer.from(n,"base64"):new Uint8Array(atob(n).split("").map(i=>i.charCodeAt(0)));if(n instanceof Uint8Array)return n;throw new Error("Prepared buffer is not a string or Uint8Array!")})}var Ws;function Kr(){var i,a,o,l,c;if(Ws)return Zn;Ws=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.StreamDeckBase=void 0;const r=Wl,e=na(),t=qn;class n extends r.EventEmitter{constructor(d,_,p){var v;super();Ze(this,"device");Ze(this,"deviceProperties");W(this,i);W(this,a);W(this,o);W(this,l);W(this,c);this.device=d,this.deviceProperties=p.deviceProperties,K(this,i,p.properties),K(this,a,p.buttonsLcd),K(this,o,p.lcdSegmentDisplay),K(this,l,p.inputService),K(this,c,p.encoderLed),(v=p.events)==null||v.listen((y,...g)=>this.emit(y,...g)),this.device.on("input",y=>h(this,l).handleInput(y)),this.device.on("error",y=>{this.emit("error",y)})}get CONTROLS(){return this.deviceProperties.CONTROLS}get MODEL(){return this.deviceProperties.MODEL}get PRODUCT_NAME(){return this.deviceProperties.PRODUCT_NAME}get HAS_NFC_READER(){return this.deviceProperties.HAS_NFC_READER}checkValidKeyIndex(d,_){const p=this.deviceProperties.CONTROLS.find(v=>v.type==="button"&&v.index===d);if(!p)throw new TypeError("Expected a valid keyIndex");if(_&&p.feedbackType!==_)throw new TypeError("Expected a keyIndex with expected feedbackType")}calculateFillPanelDimensions(d){return h(this,a).calculateFillPanelDimensions(d)}async close(){return this.device.close()}async getHidDeviceInfo(){return this.device.getDeviceInfo()}async setBrightness(d){return h(this,i).setBrightness(d)}async resetToLogo(){return h(this,i).resetToLogo()}async getFirmwareVersion(){return h(this,i).getFirmwareVersion()}async getAllFirmwareVersions(){return h(this,i).getAllFirmwareVersions()}async getSerialNumber(){return h(this,i).getSerialNumber()}async sendPreparedBuffer(d){const _=(0,t.unwrapPreparedBufferToBuffer)(this.deviceProperties.MODEL,d);await this.device.sendReports(_)}async fillKeyColor(d,_,p,v){this.checkValidKeyIndex(d,null),await h(this,a).fillKeyColor(d,_,p,v)}async fillKeyBuffer(d,_,p){this.checkValidKeyIndex(d,"lcd"),await h(this,a).fillKeyBuffer(d,_,p)}async prepareFillKeyBuffer(d,_,p,v){return h(this,a).prepareFillKeyBuffer(d,_,p,v)}async fillPanelBuffer(d,_){await h(this,a).fillPanelBuffer(d,_)}async prepareFillPanelBuffer(d,_,p){return h(this,a).prepareFillPanelBuffer(d,_,p)}async clearKey(d){this.checkValidKeyIndex(d,null),await h(this,a).clearKey(d)}async clearPanel(){const d=[];d.push(h(this,a).clearPanel()),h(this,o)&&d.push(h(this,o).clearAllLcdSegments()),await Promise.all(d)}async fillLcd(...d){if(!h(this,o))throw new Error("Not supported for this model");return h(this,o).fillLcd(...d)}async fillLcdRegion(...d){if(!h(this,o))throw new Error("Not supported for this model");return h(this,o).fillLcdRegion(...d)}async prepareFillLcdRegion(...d){if(!h(this,o))throw new Error("Not supported for this model");return h(this,o).prepareFillLcdRegion(...d)}async clearLcdSegment(...d){if(!h(this,o))throw new Error("Not supported for this model");return h(this,o).clearLcdSegment(...d)}async setEncoderColor(...d){if(!h(this,c))throw new Error("Not supported for this model");return h(this,c).setEncoderColor(...d)}async setEncoderRingSingleColor(...d){if(!h(this,c))throw new Error("Not supported for this model");return h(this,c).setEncoderRingSingleColor(...d)}async setEncoderRingColors(...d){if(!h(this,c))throw new Error("Not supported for this model");return h(this,c).setEncoderRingColors(...d)}async getChildDeviceInfo(){const d=await this.device.getChildDeviceInfo();if(!d||d.vendorId!==e.VENDOR_ID)return null;const _=e.DEVICE_MODELS.find(p=>p.productIds.includes(d.productId));return _?{...d,model:_.id}:null}}return i=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,Zn.StreamDeckBase=n,Zn}var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.Gen1PropertiesService=void 0;var or;class sd{constructor(e){W(this,or);K(this,or,e)}async setBrightness(e){if(e<0||e>100)throw new RangeError("Expected brightness percentage to be between 0 and 100");const t=new Uint8Array([5,85,170,209,1,e,0,0,0,0,0,0,0,0,0,0,0]);await h(this,or).sendFeatureReport(t)}async resetToLogo(){const e=new Uint8Array([11,99,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);await h(this,or).sendFeatureReport(e)}async getFirmwareVersion(){let e;try{e=await h(this,or).getFeatureReport(4,32)}catch{e=await h(this,or).getFeatureReport(4,17)}const t=e.indexOf(0,5);return new TextDecoder("ascii").decode(e.subarray(5,t===-1?void 0:t))}async getAllFirmwareVersions(){return{}}async getSerialNumber(){let e;try{e=await h(this,or).getFeatureReport(3,32)}catch{e=await h(this,or).getFeatureReport(3,17)}return new TextDecoder("ascii").decode(e.subarray(5,17))}}or=new WeakMap;Ea.Gen1PropertiesService=sd;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.DefaultButtonsLcdService=void 0;const Ys=qn;var vi,hi,mr,mt;class od{constructor(e,t,n,i){W(this,vi);W(this,hi);W(this,mr);W(this,mt);K(this,vi,e),K(this,hi,t),K(this,mr,n),K(this,mt,i)}getLcdButtonControls(){return h(this,mt).CONTROLS.filter(e=>e.type==="button"&&e.feedbackType==="lcd")}calculateLcdGridSpan(e){if(e.length===0)return null;const t=e.map(i=>i.row),n=e.map(i=>i.column);return{minRow:Math.min(...t),maxRow:Math.max(...t),minCol:Math.min(...n),maxCol:Math.max(...n)}}calculateDimensionsFromGridSpan(e,t,n){if(n)throw new Error("Not implemented");{const i=e.maxRow-e.minRow+1;return{width:(e.maxCol-e.minCol+1)*t.width,height:i*t.height}}}calculateFillPanelDimensions(e){const t=this.getLcdButtonControls(),n=this.calculateLcdGridSpan(t);return!n||t.length===0?null:this.calculateDimensionsFromGridSpan(n,t[0].pixelSize,e==null?void 0:e.withPadding)}async clearPanel(){const e=[];if(h(this,mt).FULLSCREEN_PANELS>0)for(let t=0;t<h(this,mt).FULLSCREEN_PANELS;t++)e.push(h(this,mr).sendFeatureReport(new Uint8Array([3,5,t,0,0,0])));else for(const t of h(this,mt).CONTROLS)if(t.type==="button")switch(t.feedbackType){case"rgb":e.push(this.sendKeyRgb(t.hidIndex,0,0,0));break;case"lcd":if(h(this,mt).SUPPORTS_RGB_KEY_FILL)e.push(this.sendKeyRgb(t.hidIndex,0,0,0));else{const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*3);e.push(this.fillImageRangeControl(t,n,{format:"rgb",offset:0,stride:t.pixelSize.width*3}))}break}await Promise.all(e)}async clearKey(e){const t=h(this,mt).CONTROLS.find(n=>n.type==="button"&&n.index===e);if(!t||t.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(h(this,mt).SUPPORTS_RGB_KEY_FILL||t.feedbackType==="rgb")await this.sendKeyRgb(e,0,0,0);else{const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*3);await this.fillImageRangeControl(t,n,{format:"rgb",offset:0,stride:t.pixelSize.width*3})}}async fillKeyColor(e,t,n,i){this.checkRGBValue(t),this.checkRGBValue(n),this.checkRGBValue(i);const a=h(this,mt).CONTROLS.find(o=>o.type==="button"&&o.index===e);if(!a||a.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(h(this,mt).SUPPORTS_RGB_KEY_FILL||a.feedbackType==="rgb")await this.sendKeyRgb(e,t,n,i);else{const o=a.pixelSize.width*a.pixelSize.height,l=new Uint8Array(o*4),c=new DataView(l.buffer,l.byteOffset,l.byteLength);c.setUint8(0,t),c.setUint8(1,n),c.setUint8(2,i),c.setUint8(3,255);const u=c.getUint32(0);for(let f=1;f<o;f++)c.setUint32(f*4,u);await this.fillImageRangeControl(a,l,{format:"rgba",offset:0,stride:a.pixelSize.width*4})}}async fillKeyBuffer(e,t,n){const i=await this.prepareFillKeyBufferInner(e,t,n);await h(this,mr).sendReports(i)}async prepareFillKeyBufferInner(e,t,n){const i=(n==null?void 0:n.format)??"rgb";this.checkSourceFormat(i);const a=h(this,mt).CONTROLS.find(l=>l.type==="button"&&l.index===e);if(!a||a.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(a.feedbackType!=="lcd")throw new TypeError(`keyIndex ${a.index} does not support lcd feedback`);const o=a.pixelSize.width*a.pixelSize.height*i.length;if(t.length!==o)throw new RangeError(`Expected image buffer of length ${o}, got length ${t.length}`);return this.prepareFillImageRangeControl(a,t,{format:i,offset:0,stride:a.pixelSize.width*i.length})}async prepareFillKeyBuffer(e,t,n,i){const a=await this.prepareFillKeyBufferInner(e,t,n);return(0,Ys.wrapBufferToPreparedBuffer)(h(this,mt).MODEL,"fill-key",a,i??!1)}async fillPanelBuffer(e,t){const n=await this.prepareFillPanelBufferInner(e,t);await h(this,mr).sendReports(n)}async prepareFillPanelBufferInner(e,t){const n=(t==null?void 0:t.format)??"rgb";this.checkSourceFormat(n);const i=this.getLcdButtonControls(),a=this.calculateLcdGridSpan(i);if(!a||i.length===0)throw new Error("Panel does not support being filled");const o=this.calculateDimensionsFromGridSpan(a,i[0].pixelSize,t==null?void 0:t.withPadding),l=n.length*o.width*o.height;if(e.length!==l)throw new RangeError(`Expected image buffer of length ${l}, got length ${e.length}`);const c=o.width*n.length,u=[];for(const d of i){const _=d.row-a.minRow,p=d.column-a.minCol,v=d.pixelSize.width*n.length,y=c*_*d.pixelSize.height,g=p*v;u.push(this.prepareFillImageRangeControl(d,e,{format:n,offset:y+g,stride:c}))}return(await Promise.all(u)).flat()}async prepareFillPanelBuffer(e,t,n){const i=await this.prepareFillPanelBufferInner(e,t);return(0,Ys.wrapBufferToPreparedBuffer)(h(this,mt).MODEL,"fill-panel",i,n??!1)}async sendKeyRgb(e,t,n,i){await h(this,mr).sendFeatureReport(new Uint8Array([3,6,e,t,n,i]))}async fillImageRangeControl(e,t,n){const i=await this.prepareFillImageRangeControl(e,t,n);await h(this,mr).sendReports(i)}async prepareFillImageRangeControl(e,t,n){if(e.feedbackType!=="lcd")throw new TypeError(`keyIndex ${e.index} does not support lcd feedback`);const i=await h(this,hi).convertPixelBuffer(t,n,e.pixelSize);return h(this,vi).generateFillImageWrites({keyIndex:e.hidIndex},i)}checkRGBValue(e){if(e<0||e>255)throw new TypeError("Expected a valid color RGB value 0 - 255")}checkSourceFormat(e){switch(e){case"rgb":case"rgba":case"bgr":case"bgra":break;default:{const t=e;throw new TypeError(`Expected a known color format not "${t}"`)}}}}vi=new WeakMap,hi=new WeakMap,mr=new WeakMap,mt=new WeakMap;Ii.DefaultButtonsLcdService=od;var Ia={},Lr={},Xs;function Ur(){if(Xs)return Lr;Xs=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.BMP_HEADER_LENGTH=void 0,Lr.transformImageBuffer=r,Lr.writeBMPHeader=e,Lr.uint8ArrayToDataView=t;function r(n,i,a,o,l,c){const u=t(n),f=new Uint8Array(o+l*c*a.colorMode.length),d=t(f),_=i.format.substring(0,3)!==a.colorMode.substring(0,3);for(let p=0;p<c;p++){const v=o+l*a.colorMode.length*p;for(let y=0;y<l;y++){let g=a.xFlip?l-y-1:y,S=a.yFlip?c-p-1:p;if(a.rotate){const j=g;g=S,S=j}const w=S*i.stride+i.offset+g*i.format.length,P=u.getUint8(w),R=u.getUint8(w+1),k=u.getUint8(w+2),T=v+y*a.colorMode.length;_?(d.setUint8(T,k),d.setUint8(T+1,R),d.setUint8(T+2,P)):(d.setUint8(T,P),d.setUint8(T+1,R),d.setUint8(T+2,k)),a.colorMode.length===4&&d.setUint8(T+3,255)}}return f}Lr.BMP_HEADER_LENGTH=54;function e(n,i,a,o,l){const c=t(n);c.setUint8(0,66),c.setUint8(1,77),c.setUint32(2,o+54,!0),c.setInt16(6,0,!0),c.setInt16(8,0,!0),c.setUint32(10,54,!0),c.setUint32(14,40,!0),c.setInt32(18,i,!0),c.setInt32(22,a,!0),c.setInt16(26,1,!0),c.setInt16(28,24,!0),c.setInt32(30,0,!0),c.setInt32(34,o,!0),c.setInt32(38,l,!0),c.setInt32(42,l,!0),c.setInt32(46,0,!0),c.setInt32(50,0,!0)}function t(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}return Lr}Object.defineProperty(Ia,"__esModule",{value:!0});Ia.BitmapButtonLcdImagePacker=void 0;const Ri=Ur();var pi,_i;class ld{constructor(e,t){W(this,pi);W(this,_i);K(this,pi,e),K(this,_i,t)}async convertPixelBuffer(e,t,n){const i=(0,Ri.transformImageBuffer)(e,t,h(this,pi),Ri.BMP_HEADER_LENGTH,n.width,n.height);return(0,Ri.writeBMPHeader)(i,n.width,n.height,i.length-Ri.BMP_HEADER_LENGTH,h(this,_i)),i}}pi=new WeakMap,_i=new WeakMap;Ia.BitmapButtonLcdImagePacker=ld;var pn={};Object.defineProperty(pn,"__esModule",{value:!0});pn.CallbackHook=void 0;var kn;class cd{constructor(){W(this,kn,null)}emit(e,...t){if(!h(this,kn))throw new Error("No listener setup");h(this,kn).call(this,e,...t)}listen(e){K(this,kn,e)}}kn=new WeakMap;pn.CallbackHook=cd;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.ButtonOnlyInputService=void 0;var Pn,Mn;class ud{constructor(e,t){Ze(this,"deviceProperties");W(this,Pn);W(this,Mn);this.deviceProperties=e,K(this,Mn,t);const n=this.deviceProperties.CONTROLS.filter(i=>i.type==="button").map(i=>i.index);K(this,Pn,new Array(Math.max(-1,...n)+1).fill(!1))}handleInput(e){const t=this.deviceProperties.KEY_DATA_OFFSET||0;for(const n of this.deviceProperties.CONTROLS){if(n.type!=="button")continue;const i=!!e[t+n.hidIndex];i!==h(this,Pn)[n.index]&&(h(this,Pn)[n.index]=i,i?h(this,Mn).emit("down",n):h(this,Mn).emit("up",n))}}}Pn=new WeakMap,Mn=new WeakMap;zn.ButtonOnlyInputService=ud;var Js;function Yl(){if(Js)return Ni;Js=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.StreamDeckGen1Factory=l;const r=Kr(),e=Ea,t=Ii,n=Ia,i=pn,a=zn;function o(c){return{...c,KEY_DATA_OFFSET:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1}}function l(c,u,f,d,_,p){const v=o(f),y=new i.CallbackHook;return new r.StreamDeckBase(c,u,{deviceProperties:v,events:y,properties:new e.Gen1PropertiesService(c),buttonsLcd:new t.DefaultButtonsLcdService(d,new n.BitmapButtonLcdImagePacker(_,p),c,v),lcdSegmentDisplay:null,inputService:new a.ButtonOnlyInputService(v,y),encoderLed:null})}return Ni}var ur={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.StreamdeckNeoLcdImageHeaderGenerator=kt.StreamdeckPlusLcdImageHeaderGenerator=kt.StreamdeckGen2ImageHeaderGenerator=kt.StreamdeckGen1ImageHeaderGenerator=void 0;const xa=Ur();class dd{getFillImageCommandHeaderLength(){return 16}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,xa.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,1),o.setUint16(2,n,!0),o.setUint8(4,i?1:0),o.setUint8(5,t.keyIndex+1)}}kt.StreamdeckGen1ImageHeaderGenerator=dd;class fd{getFillImageCommandHeaderLength(){return 8}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,xa.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,7),o.setUint8(2,t.keyIndex),o.setUint8(3,i?1:0),o.setUint16(4,a,!0),o.setUint16(6,n++,!0)}}kt.StreamdeckGen2ImageHeaderGenerator=fd;class vd{getFillImageCommandHeaderLength(){return 16}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,xa.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,12),o.setUint16(2,t.x,!0),o.setUint16(4,t.y,!0),o.setUint16(6,t.width,!0),o.setUint16(8,t.height,!0),o.setUint8(10,i?1:0),o.setUint16(11,n,!0),o.setUint16(13,a,!0)}}kt.StreamdeckPlusLcdImageHeaderGenerator=vd;class hd{getFillImageCommandHeaderLength(){return 8}writeFillImageCommandHeader(e,t,n,i,a){const o=(0,xa.uint8ArrayToDataView)(e);o.setUint8(0,2),o.setUint8(1,11),o.setUint8(2,0),o.setUint8(3,i?1:0),o.setUint16(4,a,!0),o.setUint16(6,n,!0)}}kt.StreamdeckNeoLcdImageHeaderGenerator=hd;Object.defineProperty(ur,"__esModule",{value:!0});ur.StreamdeckDefaultImageWriter=ur.StreamdeckOriginalImageWriter=void 0;const pd=kt;class _d{constructor(){Ze(this,"headerGenerator",new pd.StreamdeckGen1ImageHeaderGenerator)}generateFillImageWrites(e,t){const i=this.headerGenerator.getFillImageCommandHeaderLength(),a=t.length/2,o=new Uint8Array(8191);this.headerGenerator.writeFillImageCommandHeader(o,e,1,!1,a),o.set(t.subarray(0,a),i);const l=new Uint8Array(8191);return this.headerGenerator.writeFillImageCommandHeader(l,e,2,!0,a),l.set(t.subarray(a),i),[o,l]}}ur.StreamdeckOriginalImageWriter=_d;class md{constructor(e){Ze(this,"headerGenerator");this.headerGenerator=e}generateFillImageWrites(e,t){const i=this.headerGenerator.getFillImageCommandHeaderLength(),a=1024-i,o=[];let l=t.length;for(let c=0;l>0;c++){const u=new Uint8Array(1024),f=Math.min(l,a);this.headerGenerator.writeFillImageCommandHeader(u,e,c,l<=a,f);const d=t.length-l;l-=f,u.set(t.subarray(d,d+f),i),o.push(u)}return o}}ur.StreamdeckDefaultImageWriter=md;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.generateButtonsGrid=gd;Wt.freezeDefinitions=wd;function gd(r,e,t,n=!1,i=0){const a=[];for(let o=0;o<e;o++)for(let l=0;l<r;l++){const c=o*r+l,u=n?yd(r,c):c;a.push({type:"button",row:o,column:l+i,index:c,hidIndex:u,feedbackType:"lcd",pixelSize:t})}return a}function yd(r,e){const t=(r-1)/2,n=(e%r-t)*-t;return e+n}function wd(r){return Object.freeze(r.map(e=>Object.freeze(e)))}var Zs;function bd(){if(Zs)return Ti;Zs=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.StreamDeckOriginalFactory=a;const r=Yl(),e=ht,t=ur,n=Wt,i={MODEL:e.DeviceModelId.ORIGINAL,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.ORIGINAL],SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,n.freezeDefinitions)((0,n.generateButtonsGrid)(5,3,{width:72,height:72},!0)),KEY_SPACING_HORIZONTAL:25,KEY_SPACING_VERTICAL:25,FULLSCREEN_PANELS:0};function a(o,l){return(0,r.StreamDeckGen1Factory)(o,l,i,new t.StreamdeckOriginalImageWriter,{colorMode:"bgr",xFlip:!0},3780)}return Ti}var Oi={},Qs;function Sd(){if(Qs)return Oi;Qs=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.StreamDeck6KeyFactory=o;const r=Yl(),e=ht,t=Wt,n=ur,i=kt,a={SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,t.freezeDefinitions)((0,t.generateButtonsGrid)(3,2,{width:80,height:80})),KEY_SPACING_HORIZONTAL:28,KEY_SPACING_VERTICAL:28,FULLSCREEN_PANELS:0};function o(l,c,u,f){const d={...a,MODEL:l,PRODUCT_NAME:e.MODEL_NAMES[l]};return(0,r.StreamDeckGen1Factory)(c,u,d,new n.StreamdeckDefaultImageWriter(new i.StreamdeckGen1ImageHeaderGenerator),{colorMode:"bgr",rotate:!0,yFlip:!0},2835)}return Oi}var Fi={},_n={},xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.Gen2PropertiesService=void 0;class Cd{constructor(e){Ze(this,"device");this.device=e}async setBrightness(e){if(e<0||e>100)throw new RangeError("Expected brightness percentage to be between 0 and 100");const t=new Uint8Array([3,8,e,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);await this.device.sendFeatureReport(t)}async resetToLogo(){const e=new Uint8Array([3,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);await this.device.sendFeatureReport(e)}async getFirmwareVersion(){const e=await this.device.getFeatureReport(5,32),t=e[1]+2;return new TextDecoder("ascii").decode(e.subarray(6,t))}async getAllFirmwareVersions(){return{AP2:await this.getFirmwareVersion()}}async getSerialNumber(){const e=await this.device.getFeatureReport(6,32),t=e[1]+2;return new TextDecoder("ascii").decode(e.subarray(2,t))}}xi.Gen2PropertiesService=Cd;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.JpegButtonLcdImagePacker=void 0;const Dd=Ur();var mi,Ln;class Ed{constructor(e,t){W(this,mi);W(this,Ln);K(this,mi,e),K(this,Ln,t)}async convertPixelBuffer(e,t,n){const i=(0,Dd.transformImageBuffer)(e,t,{colorMode:"rgba",xFlip:h(this,Ln),yFlip:h(this,Ln)},0,n.width,n.height);return h(this,mi).call(this,i,n.width,n.height)}}mi=new WeakMap,Ln=new WeakMap;ka.JpegButtonLcdImagePacker=Ed;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.Gen2InputService=void 0;const Id=zn,xd=Ur();var Qt,en,An,gi,Gr,Xl,Jl,Zl;class kd extends Id.ButtonOnlyInputService{constructor(t,n){super(t,n);W(this,Gr);W(this,Qt);W(this,en);W(this,An);W(this,gi);K(this,Qt,n),K(this,en,t.CONTROLS.filter(a=>a.type==="encoder"));const i=Math.max(-1,...h(this,en).map(a=>a.index));K(this,An,new Array(i+1).fill(!1)),K(this,gi,t.CONTROLS.filter(a=>a.type==="lcd-segment"))}handleInput(t){switch(t[0]){case 0:super.handleInput(t);break;case 2:Ue(this,Gr,Xl).call(this,t);break;case 3:Ue(this,Gr,Jl).call(this,t);break;case 4:Ue(this,Gr,Zl).call(this,t);break}}}Qt=new WeakMap,en=new WeakMap,An=new WeakMap,gi=new WeakMap,Gr=new WeakSet,Xl=function(t){const n=h(this,gi).find(o=>o.id===0);if(!n)return;const i=(0,xd.uint8ArrayToDataView)(t),a={x:i.getUint16(5,!0),y:i.getUint16(7,!0)};switch(t[3]){case 1:h(this,Qt).emit("lcdShortPress",n,a);break;case 2:h(this,Qt).emit("lcdLongPress",n,a);break;case 3:{const o={x:i.getUint16(9,!0),y:i.getUint16(11,!0)};h(this,Qt).emit("lcdSwipe",n,a,o);break}}},Jl=function(t){switch(t[3]){case 0:for(const n of h(this,en)){const i=!!t[4+n.hidIndex];i!==h(this,An)[n.index]&&(h(this,An)[n.index]=i,i?h(this,Qt).emit("down",n):h(this,Qt).emit("up",n))}break;case 1:for(const n of h(this,en)){const a=new Int8Array(t.buffer,t.byteOffset,t.byteLength)[4+n.hidIndex];a!==0&&h(this,Qt).emit("rotate",n,a)}break}},Zl=function(t){if(!this.deviceProperties.HAS_NFC_READER)return;const n=t[1]+t[2]*256,i=new TextDecoder("ascii").decode(t.subarray(3,3+n));h(this,Qt).emit("nfcRead",i)};Pa.Gen2InputService=kd;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.EncoderLedService=void 0;var tn,Or;class Pd{constructor(e,t){W(this,tn);W(this,Or);K(this,tn,e),K(this,Or,t.filter(n=>n.type==="encoder"))}async clearAll(){const e=[];for(const t of h(this,Or))t.hasLed&&e.push(this.setEncoderColor(t.index,0,0,0)),t.ledRingSteps>0&&e.push(this.setEncoderRingSingleColor(t.index,0,0,0));await Promise.all(e)}async setEncoderColor(e,t,n,i){const a=h(this,Or).find(l=>l.index===e);if(!a)throw new Error(`Invalid encoder index ${e}`);if(!a.hasLed)throw new Error("Encoder does not have an LED");const o=new Uint8Array(1024);o[0]=2,o[1]=16,o[2]=e,o[3]=t,o[4]=n,o[5]=i,await h(this,tn).sendReports([o])}async setEncoderRingSingleColor(e,t,n,i){const a=h(this,Or).find(l=>l.index===e);if(!a)throw new Error(`Invalid encoder index ${e}`);if(a.ledRingSteps<=0)throw new Error("Encoder does not have an LED ring");const o=new Uint8Array(1024);o[0]=2,o[1]=15,o[2]=e;for(let l=0;l<a.ledRingSteps;l++){const c=3+l*3;o[c]=t,o[c+1]=n,o[c+2]=i}await h(this,tn).sendReports([o])}async setEncoderRingColors(e,t){const n=h(this,Or).find(o=>o.index===e);if(!n)throw new Error(`Invalid encoder index ${e}`);if(n.ledRingSteps<=0)throw new Error("Encoder does not have an LED ring");if(t.length!==n.ledRingSteps*3)throw new Error("Invalid colors length");let i=t instanceof Uint8Array?t:new Uint8Array(t);if(n.lcdRingOffset){const o=i;i=new Uint8Array(o.length),i.set(o.slice(n.lcdRingOffset*3),0),i.set(o.slice(0,n.lcdRingOffset*3),n.lcdRingOffset*3)}const a=new Uint8Array(1024);a[0]=2,a[1]=15,a[2]=e,a.set(i,3),await h(this,tn).sendReports([a])}}tn=new WeakMap,Or=new WeakMap;Ma.EncoderLedService=Pd;Object.defineProperty(_n,"__esModule",{value:!0});_n.createBaseGen2Properties=Bd;const Md=ur,Ld=kt,Ad=Ii,Td=pn,Nd=xi,Rd=ka,Od=Pa,Fd=Ma;function Vd(r){return{...r,KEY_DATA_OFFSET:3}}function Bd(r,e,t,n,i){const a=Vd(t),o=new Td.CallbackHook;return{deviceProperties:a,events:o,properties:n??new Nd.Gen2PropertiesService(r),buttonsLcd:new Ad.DefaultButtonsLcdService(new Md.StreamdeckDefaultImageWriter(new Ld.StreamdeckGen2ImageHeaderGenerator),new Rd.JpegButtonLcdImagePacker(e.encodeJPEG,!i),r,a),lcdSegmentDisplay:null,inputService:new Od.Gen2InputService(a,o),encoderLed:new Fd.EncoderLedService(r,t.CONTROLS)}}var eo;function jd(){if(eo)return Fi;eo=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.StreamDeck32KeyFactory=a;const r=Kr(),e=_n,t=ht,n=Wt,i={SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,n.freezeDefinitions)((0,n.generateButtonsGrid)(8,4,{width:96,height:96})),KEY_SPACING_HORIZONTAL:32,KEY_SPACING_VERTICAL:39,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1};function a(o,l,c,u){const f={...i,MODEL:o,PRODUCT_NAME:t.MODEL_NAMES[o]},d=(0,e.createBaseGen2Properties)(l,c,f,null);return new r.StreamDeckBase(l,c,d)}return Fi}var Vi={},to;function $d(){if(to)return Vi;to=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.StreamDeck15KeyFactory=a;const r=Kr(),e=_n,t=ht,n=Wt,i={SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,n.freezeDefinitions)((0,n.generateButtonsGrid)(5,3,{width:72,height:72})),KEY_SPACING_HORIZONTAL:25,KEY_SPACING_VERTICAL:25,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1};function a(o,l,c,u){const f={...i,MODEL:o,PRODUCT_NAME:t.MODEL_NAMES[o]},d=(0,e.createBaseGen2Properties)(l,c,f,null);return new r.StreamDeckBase(l,c,d)}return Vi}var Bi={},La={};Object.defineProperty(La,"__esModule",{value:!0});La.StreamDeckPlusLcdService=void 0;const Gd=kt,Kd=ur,Ud=Ur(),Hd=qn,qd=ht;var yi,rn,gr,ua;class zd{constructor(e,t,n){W(this,yi);W(this,rn);W(this,gr);W(this,ua,new Kd.StreamdeckDefaultImageWriter(new Gd.StreamdeckPlusLcdImageHeaderGenerator));K(this,yi,e),K(this,rn,t),K(this,gr,n)}async fillLcd(e,t,n){const i=h(this,gr).find(o=>o.id===e);if(!i)throw new Error(`Invalid lcd segment index ${e}`);const a=await this.prepareFillControlRegion(i,0,0,t,{format:n.format,width:i.pixelSize.width,height:i.pixelSize.height});await h(this,rn).sendReports(a)}async fillLcdRegion(e,t,n,i,a){const o=h(this,gr).find(c=>c.id===e);if(!o)throw new Error(`Invalid lcd segment index ${e}`);const l=await this.prepareFillControlRegion(o,t,n,i,a);await h(this,rn).sendReports(l)}async prepareFillLcdRegion(e,t,n,i,a,o){const l=h(this,gr).find(u=>u.id===e);if(!l)throw new Error(`Invalid lcd segment index ${e}`);const c=await this.prepareFillControlRegion(l,t,n,i,a);return(0,Hd.wrapBufferToPreparedBuffer)(qd.DeviceModelId.PLUS,"fill-lcd-region",c,o??!1)}async clearLcdSegment(e){const t=h(this,gr).find(a=>a.id===e);if(!t)throw new Error(`Invalid lcd segment index ${e}`);const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*4),i=await this.prepareFillControlRegion(t,0,0,n,{format:"rgba",width:t.pixelSize.width,height:t.pixelSize.height});await h(this,rn).sendReports(i)}async clearAllLcdSegments(){const e=[];for(const t of h(this,gr))e.push(this.clearLcdSegment(t.id));await Promise.all(e)}async prepareFillControlRegion(e,t,n,i,a){const o=e.pixelSize;if(t<0||t+a.width>o.width)throw new TypeError("Image will not fit within the lcd segment");if(n<0||n+a.height>o.height)throw new TypeError("Image will not fit within the lcd segment");const l=a.width*a.height*a.format.length;if(i.length!==l)throw new RangeError(`Expected image buffer of length ${l}, got length ${i.length}`);const c=await this.convertFillLcdBuffer(i,a);return h(this,ua).generateFillImageWrites({...a,x:t,y:n},c)}async convertFillLcdBuffer(e,t){const n={format:t.format,offset:0,stride:t.width*t.format.length},i=(0,Ud.transformImageBuffer)(e,n,{colorMode:"rgba"},0,t.width,t.height);return h(this,yi).call(this,i,t.width,t.height)}}yi=new WeakMap,rn=new WeakMap,gr=new WeakMap,ua=new WeakMap;La.StreamDeckPlusLcdService=zd;var ro;function Wd(){if(ro)return Bi;ro=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.StreamDeckPlusFactory=c;const r=Kr(),e=_n,t=ht,n=Wt,i=La,a=(0,n.generateButtonsGrid)(4,2,{width:120,height:120});a.push({type:"lcd-segment",row:2,column:0,columnSpan:4,rowSpan:1,id:0,pixelSize:Object.freeze({width:800,height:100}),drawRegions:!0},{type:"encoder",row:3,column:0,index:0,hidIndex:0,hasLed:!1,ledRingSteps:0},{type:"encoder",row:3,column:1,index:1,hidIndex:1,hasLed:!1,ledRingSteps:0},{type:"encoder",row:3,column:2,index:2,hidIndex:2,hasLed:!1,ledRingSteps:0},{type:"encoder",row:3,column:3,index:3,hidIndex:3,hasLed:!1,ledRingSteps:0});const o={MODEL:t.DeviceModelId.PLUS,PRODUCT_NAME:t.MODEL_NAMES[t.DeviceModelId.PLUS],SUPPORTS_RGB_KEY_FILL:!0,CONTROLS:(0,n.freezeDefinitions)(a),KEY_SPACING_HORIZONTAL:99,KEY_SPACING_VERTICAL:40,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1},l=o.CONTROLS.filter(u=>u.type==="lcd-segment");function c(u,f){const d=(0,e.createBaseGen2Properties)(u,f,o,null,!0);return d.lcdSegmentDisplay=new i.StreamDeckPlusLcdService(f.encodeJPEG,u,l),new r.StreamDeckBase(u,f,d)}return Bi}var ji={},Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.PedalPropertiesService=void 0;var Tn;class Yd{constructor(e){W(this,Tn);K(this,Tn,e)}async setBrightness(e){}async resetToLogo(){}async getFirmwareVersion(){const e=await h(this,Tn).getFeatureReport(5,32),t=e.indexOf(0,6);return new TextDecoder("ascii").decode(e.subarray(6,t===-1?void 0:t))}async getAllFirmwareVersions(){return{AP2:await this.getFirmwareVersion()}}async getSerialNumber(){const e=await h(this,Tn).getFeatureReport(6,32);return new TextDecoder("ascii").decode(e.subarray(2,14))}}Tn=new WeakMap;Aa.PedalPropertiesService=Yd;var ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.FakeLcdService=void 0;class Xd{calculateFillPanelDimensions(e){return null}async clearKey(e){}async clearPanel(){}async fillKeyColor(e,t,n,i){}async fillKeyBuffer(e,t,n){}async prepareFillKeyBuffer(e,t,n,i){throw new Error("Not supported")}async fillPanelBuffer(e,t){}async prepareFillPanelBuffer(e,t,n){throw new Error("Not supported")}}ki.FakeLcdService=Xd;var no;function Jd(){if(no)return ji;no=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.StreamDeckPedalFactory=u;const r=Kr(),e=ht,t=Wt,n=Aa,i=ki,a=pn,o=zn,l=[{type:"button",row:0,column:0,index:0,hidIndex:0,feedbackType:"none"},{type:"button",row:0,column:1,index:1,hidIndex:1,feedbackType:"none"},{type:"button",row:0,column:2,index:2,hidIndex:2,feedbackType:"none"}],c={MODEL:e.DeviceModelId.PEDAL,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.PEDAL],KEY_DATA_OFFSET:3,SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,t.freezeDefinitions)(l),KEY_SPACING_HORIZONTAL:0,KEY_SPACING_VERTICAL:0,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1};function u(f,d){const _=new a.CallbackHook;return new r.StreamDeckBase(f,d,{deviceProperties:c,events:_,properties:new n.PedalPropertiesService(f),buttonsLcd:new i.FakeLcdService,lcdSegmentDisplay:null,inputService:new o.ButtonOnlyInputService(c,_),encoderLed:null})}return ji}var $i={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.StreamDeckNeoLcdService=void 0;const Zd=kt,Qd=ur,ef=Ur();var wi,bi,nn,da;class tf{constructor(e,t,n){W(this,wi);W(this,bi);W(this,nn);W(this,da,new Qd.StreamdeckDefaultImageWriter(new Zd.StreamdeckNeoLcdImageHeaderGenerator));K(this,wi,e),K(this,bi,t),K(this,nn,n)}async fillLcdRegion(e,t,n,i,a){throw new Error("Not supported for this model")}async prepareFillLcdRegion(e,t,n,i,a,o){throw new Error("Not supported for this model")}async fillLcd(e,t,n){const i=h(this,nn).find(c=>c.id===e);if(!i)throw new Error(`Invalid lcd segment index ${e}`);const a=i.pixelSize.width*i.pixelSize.height*n.format.length;if(t.length!==a)throw new RangeError(`Expected image buffer of length ${a}, got length ${t.length}`);const o=await this.convertFillLcdBuffer(t,i.pixelSize,n),l=h(this,da).generateFillImageWrites(null,o);await h(this,bi).sendReports(l)}async clearLcdSegment(e){const t=h(this,nn).find(i=>i.id===e);if(!t)throw new Error(`Invalid lcd segment index ${e}`);const n=new Uint8Array(t.pixelSize.width*t.pixelSize.height*4);await this.fillLcd(e,n,{format:"rgba"})}async clearAllLcdSegments(){const e=[];for(const t of h(this,nn))e.push(this.clearLcdSegment(t.id));await Promise.all(e)}async convertFillLcdBuffer(e,t,n){const i={format:n.format,offset:0,stride:t.width*n.format.length},a=(0,ef.transformImageBuffer)(e,i,{colorMode:"rgba",xFlip:!0,yFlip:!0},0,t.width,t.height);return h(this,wi).call(this,a,t.width,t.height)}}wi=new WeakMap,bi=new WeakMap,nn=new WeakMap,da=new WeakMap;Ta.StreamDeckNeoLcdService=tf;var io;function rf(){if(io)return $i;io=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.StreamDeckNeoFactory=c;const r=Kr(),e=ht,t=_n,n=Wt,i=Ta,a=(0,n.generateButtonsGrid)(4,2,{width:96,height:96});a.push({type:"button",row:2,column:0,index:8,hidIndex:8,feedbackType:"rgb"},{type:"lcd-segment",row:2,column:1,columnSpan:2,rowSpan:1,id:0,pixelSize:{width:248,height:58},drawRegions:!1},{type:"button",row:2,column:3,index:9,hidIndex:9,feedbackType:"rgb"});const o={MODEL:e.DeviceModelId.NEO,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.NEO],CONTROLS:(0,n.freezeDefinitions)(a),KEY_SPACING_HORIZONTAL:30,KEY_SPACING_VERTICAL:30,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!1,SUPPORTS_RGB_KEY_FILL:!0},l=o.CONTROLS.filter(u=>u.type==="lcd-segment");function c(u,f){const d=(0,t.createBaseGen2Properties)(u,f,o,null);return d.lcdSegmentDisplay=new i.StreamDeckNeoLcdService(f.encodeJPEG,u,l),new r.StreamDeckBase(u,f,d)}return $i}var Xa={},Na={},Gi={},ao;function Es(){if(ao)return Gi;ao=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.parseAllFirmwareVersionsHelper=e;const r=Ur();async function e(t){const n=new TextDecoder("ascii"),i={};if(t.ap2){const a=(0,r.uint8ArrayToDataView)(t.ap2);i.AP2=n.decode(t.ap2.subarray(6,14)),i.AP2_CHECKSUM=a.getUint32(2,!1).toString(16)}if(t.encoderLd&&(t.encoderLd[0]===24||t.encoderLd[1]===24)){const a=(0,r.uint8ArrayToDataView)(t.encoderLd);i.ENCODER_LD=n.decode(t.encoderLd.subarray(2,10)),i.ENCODER_LD_CHECKSUM=a.getUint32(10,!1).toString(16)}if(t.encoderAp2&&(t.encoderAp2[0]===24||t.encoderAp2[1]===24)){const a=(0,r.uint8ArrayToDataView)(t.encoderAp2);i.ENCODER_AP2=n.decode(t.encoderAp2.subarray(2,10)),i.ENCODER_AP2_CHECKSUM=a.getUint32(10,!1).toString(16)}return i}return Gi}Object.defineProperty(Na,"__esModule",{value:!0});Na.StudioPropertiesService=void 0;const nf=Es(),af=xi;class sf extends af.Gen2PropertiesService{async getAllFirmwareVersions(){const[e,t,n]=await Promise.all([this.device.getFeatureReport(5,32),this.device.getFeatureReport(17,32),this.device.getFeatureReport(19,32)]);return(0,nf.parseAllFirmwareVersionsHelper)({ap2:e,encoderAp2:t,encoderLd:n})}}Na.StudioPropertiesService=sf;var so;function of(){return so||(so=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.studioProperties=void 0,r.StreamDeckStudioFactory=l;const e=Kr(),t=_n,n=ht,i=Wt,a=Na,o=[{type:"encoder",row:0,column:0,index:0,hidIndex:0,hasLed:!0,ledRingSteps:24},...(0,i.generateButtonsGrid)(16,2,{width:144,height:112},!1,1),{type:"encoder",row:0,column:17,index:1,hidIndex:1,hasLed:!0,ledRingSteps:24,lcdRingOffset:12}];r.studioProperties={MODEL:n.DeviceModelId.STUDIO,PRODUCT_NAME:n.MODEL_NAMES[n.DeviceModelId.STUDIO],SUPPORTS_RGB_KEY_FILL:!0,CONTROLS:(0,i.freezeDefinitions)(o),KEY_SPACING_HORIZONTAL:0,KEY_SPACING_VERTICAL:0,FULLSCREEN_PANELS:2,HAS_NFC_READER:!0,SUPPORTS_CHILD_DEVICES:!0};function l(c,u,f){const d=(0,t.createBaseGen2Properties)(c,u,r.studioProperties,f??new a.StudioPropertiesService(c),!0);return new e.StreamDeckBase(c,u,d)}}(Xa)),Xa}var Ki={},Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.FakeInputService=void 0;class lf{handleInput(e){}}Ra.FakeInputService=lf;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.NetworkDockPropertiesService=void 0;const cf=Es();var an;class uf{constructor(e){W(this,an);K(this,an,e)}async setBrightness(e){}async resetToLogo(){}async getFirmwareVersion(){const e=await h(this,an).getFeatureReport(131,-1);return new TextDecoder("ascii").decode(e.subarray(8,16))}async getAllFirmwareVersions(){const[e]=await Promise.all([h(this,an).getFeatureReport(131,-1)]);return(0,cf.parseAllFirmwareVersionsHelper)({ap2:e.slice(2),encoderAp2:null,encoderLd:null})}async getSerialNumber(){const e=await h(this,an).getFeatureReport(132,-1),t=e[3];return new TextDecoder("ascii").decode(e.subarray(4,4+t))}}an=new WeakMap;Oa.NetworkDockPropertiesService=uf;var oo;function df(){if(oo)return Ki;oo=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.NetworkDockFactory=c;const r=Kr(),e=ht,t=Wt,n=pn,i=ki,a=Ra,o=Oa,l={MODEL:e.DeviceModelId.NETWORK_DOCK,PRODUCT_NAME:e.MODEL_NAMES[e.DeviceModelId.NETWORK_DOCK],KEY_DATA_OFFSET:0,SUPPORTS_RGB_KEY_FILL:!1,CONTROLS:(0,t.freezeDefinitions)([]),KEY_SPACING_HORIZONTAL:0,KEY_SPACING_VERTICAL:0,FULLSCREEN_PANELS:0,HAS_NFC_READER:!1,SUPPORTS_CHILD_DEVICES:!0};function c(u,f,d){const _=new n.CallbackHook;return new r.StreamDeckBase(u,f,{deviceProperties:l,events:_,properties:new o.NetworkDockPropertiesService(u),buttonsLcd:new i.FakeLcdService,lcdSegmentDisplay:null,inputService:new a.FakeInputService,encoderLed:null})}return Ki}var Ja={},lo;function ff(){return lo||(lo=1,Object.defineProperty(Ja,"__esModule",{value:!0})),Ja}var Za={},co;function vf(){return co||(co=1,Object.defineProperty(Za,"__esModule",{value:!0})),Za}var Qn={},uo;function hf(){if(uo)return Qn;uo=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.StreamDeckProxy=void 0;class r{constructor(t){Ze(this,"device");this.device=t}get CONTROLS(){return this.device.CONTROLS}get MODEL(){return this.device.MODEL}get PRODUCT_NAME(){return this.device.PRODUCT_NAME}get HAS_NFC_READER(){return this.device.HAS_NFC_READER}calculateFillPanelDimensions(...t){return this.device.calculateFillPanelDimensions(...t)}async close(){return this.device.close()}async getHidDeviceInfo(...t){return this.device.getHidDeviceInfo(...t)}async sendPreparedBuffer(...t){return this.device.sendPreparedBuffer(...t)}async fillKeyColor(...t){return this.device.fillKeyColor(...t)}async fillKeyBuffer(...t){return this.device.fillKeyBuffer(...t)}async prepareFillKeyBuffer(...t){return this.device.prepareFillKeyBuffer(...t)}async fillPanelBuffer(...t){return this.device.fillPanelBuffer(...t)}async prepareFillPanelBuffer(...t){return this.device.prepareFillPanelBuffer(...t)}async clearKey(...t){return this.device.clearKey(...t)}async clearPanel(...t){return this.device.clearPanel(...t)}async setBrightness(...t){return this.device.setBrightness(...t)}async resetToLogo(...t){return this.device.resetToLogo(...t)}async getFirmwareVersion(){return this.device.getFirmwareVersion()}async getAllFirmwareVersions(){return this.device.getAllFirmwareVersions()}async getSerialNumber(){return this.device.getSerialNumber()}async fillLcd(...t){return this.device.fillLcd(...t)}async setEncoderColor(...t){return this.device.setEncoderColor(...t)}async setEncoderRingSingleColor(...t){return this.device.setEncoderRingSingleColor(...t)}async setEncoderRingColors(...t){return this.device.setEncoderRingColors(...t)}async fillLcdRegion(...t){return this.device.fillLcdRegion(...t)}async prepareFillLcdRegion(...t){return this.device.prepareFillLcdRegion(...t)}async clearLcdSegment(...t){return this.device.clearLcdSegment(...t)}async getChildDeviceInfo(...t){return this.device.getChildDeviceInfo(...t)}eventNames(){return this.device.eventNames()}listeners(t){return this.device.listeners(t)}listenerCount(t){return this.device.listenerCount(t)}emit(t,...n){return this.device.emit(t,...n)}on(t,n,i){return this.device.on(t,n,i),this}addListener(t,n,i){return this.device.addListener(t,n,i),this}once(t,n,i){return this.device.once(t,n,i),this}removeListener(t,n,i,a){return this.device.removeListener(t,n,i,a),this}off(t,n,i,a){return this.device.off(t,n,i,a),this}removeAllListeners(t){return this.device.removeAllListeners(t),this}}return Qn.StreamDeckProxy=r,Qn}var fo;function na(){return fo||(fo=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEVICE_MODELS=r.DEVICE_MODELS2=r.DeviceModelType=r.VENDOR_ID=r.parseAllFirmwareVersionsHelper=r.uint8ArrayToDataView=r.StreamDeckProxy=void 0;const e=nd,t=ht,n=bd(),i=Sd(),a=jd(),o=$d(),l=Wd(),c=Jd(),u=rf(),f=of(),d=df();e.__exportStar(ff(),r),e.__exportStar(ht,r),e.__exportStar(vf(),r);var _=hf();Object.defineProperty(r,"StreamDeckProxy",{enumerable:!0,get:function(){return _.StreamDeckProxy}});var p=Ur();Object.defineProperty(r,"uint8ArrayToDataView",{enumerable:!0,get:function(){return p.uint8ArrayToDataView}});var v=Es();Object.defineProperty(r,"parseAllFirmwareVersionsHelper",{enumerable:!0,get:function(){return v.parseAllFirmwareVersionsHelper}}),r.VENDOR_ID=4057;var y;(function(g){g.STREAMDECK="streamdeck",g.PEDAL="pedal",g.NETWORK_DOCK="network-dock"})(y||(r.DeviceModelType=y={})),r.DEVICE_MODELS2={[t.DeviceModelId.ORIGINAL]:{type:y.STREAMDECK,productIds:[96],factory:n.StreamDeckOriginalFactory,hasNativeTcp:!1},[t.DeviceModelId.MINI]:{type:y.STREAMDECK,productIds:[99,144],factory:(...g)=>(0,i.StreamDeck6KeyFactory)(t.DeviceModelId.MINI,...g),hasNativeTcp:!1},[t.DeviceModelId.XL]:{type:y.STREAMDECK,productIds:[108,143],factory:(...g)=>(0,a.StreamDeck32KeyFactory)(t.DeviceModelId.XL,...g),hasNativeTcp:!1},[t.DeviceModelId.ORIGINALV2]:{type:y.STREAMDECK,productIds:[109],factory:(...g)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.ORIGINALV2,...g),hasNativeTcp:!1},[t.DeviceModelId.ORIGINALMK2]:{type:y.STREAMDECK,productIds:[128],factory:(...g)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.ORIGINALMK2,...g),hasNativeTcp:!1},[t.DeviceModelId.ORIGINALMK2SCISSOR]:{type:y.STREAMDECK,productIds:[165],factory:(...g)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.ORIGINALMK2SCISSOR,...g),hasNativeTcp:!1},[t.DeviceModelId.PLUS]:{type:y.STREAMDECK,productIds:[132],factory:l.StreamDeckPlusFactory,hasNativeTcp:!1},[t.DeviceModelId.PEDAL]:{type:y.PEDAL,productIds:[134],factory:c.StreamDeckPedalFactory,hasNativeTcp:!1},[t.DeviceModelId.NEO]:{type:y.STREAMDECK,productIds:[154],factory:u.StreamDeckNeoFactory,hasNativeTcp:!1},[t.DeviceModelId.STUDIO]:{type:y.STREAMDECK,productIds:[170],factory:f.StreamDeckStudioFactory,hasNativeTcp:!0},[t.DeviceModelId.MODULE6]:{type:y.STREAMDECK,productIds:[184],factory:(...g)=>(0,i.StreamDeck6KeyFactory)(t.DeviceModelId.MODULE6,...g),hasNativeTcp:!1},[t.DeviceModelId.MODULE15]:{type:y.STREAMDECK,productIds:[185],factory:(...g)=>(0,o.StreamDeck15KeyFactory)(t.DeviceModelId.MODULE15,...g),hasNativeTcp:!1},[t.DeviceModelId.MODULE32]:{type:y.STREAMDECK,productIds:[186],factory:(...g)=>(0,a.StreamDeck32KeyFactory)(t.DeviceModelId.MODULE32,...g),hasNativeTcp:!1},[t.DeviceModelId.NETWORK_DOCK]:{type:y.NETWORK_DOCK,productIds:[65535],factory:d.NetworkDockFactory,hasNativeTcp:!0}},r.DEVICE_MODELS=Object.entries(r.DEVICE_MODELS2).map(([g,S])=>{const w=g;return{id:w,productName:t.MODEL_NAMES[w],...S}})}(Ya)),Ya}var Fa={},Is={},Ql={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,d,_){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,d||c,_),v=t?t+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=t?t+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var _=0,p=d.length,v=new Array(p);_<p;_++)v[_]=d[_].fn;return v},l.prototype.listenerCount=function(u){var f=t?t+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,_,p,v){var y=t?t+u:u;if(!this._events[y])return!1;var g=this._events[y],S=arguments.length,w,P;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),S){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,f),!0;case 3:return g.fn.call(g.context,f,d),!0;case 4:return g.fn.call(g.context,f,d,_),!0;case 5:return g.fn.call(g.context,f,d,_,p),!0;case 6:return g.fn.call(g.context,f,d,_,p,v),!0}for(P=1,w=new Array(S-1);P<S;P++)w[P-1]=arguments[P];g.fn.apply(g.context,w)}else{var R=g.length,k;for(P=0;P<R;P++)switch(g[P].once&&this.removeListener(u,g[P].fn,void 0,!0),S){case 1:g[P].fn.call(g[P].context);break;case 2:g[P].fn.call(g[P].context,f);break;case 3:g[P].fn.call(g[P].context,f,d);break;case 4:g[P].fn.call(g[P].context,f,d,_);break;default:if(!w)for(k=1,w=new Array(S-1);k<S;k++)w[k-1]=arguments[k];g[P].fn.apply(g[P].context,w)}}return!0},l.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,_){var p=t?t+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!_||v.once)&&(!d||v.context===d)&&o(this,p);else{for(var y=0,g=[],S=v.length;y<S;y++)(v[y].fn!==f||_&&!v[y].once||d&&v[y].context!==d)&&g.push(v[y]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=t?t+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l})(Ql);var pf=Ql.exports,Va={exports:{}},_f=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})));const mf=_f;class ec extends Error{constructor(e){super(e),this.name="TimeoutError"}}const tc=(r,e,t)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(r);return}const a=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(c){i(c)}return}const o=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,l=t instanceof Error?t:new ec(o);typeof r.cancel=="function"&&r.cancel(),i(l)},e);mf(r.then(n,i),()=>{clearTimeout(a)})});Va.exports=tc;Va.exports.default=tc;Va.exports.TimeoutError=ec;var gf=Va.exports,xs={},ks={};Object.defineProperty(ks,"__esModule",{value:!0});function yf(r,e,t){let n=0,i=r.length;for(;i>0;){const a=i/2|0;let o=n+a;t(r[o],e)<=0?(n=++o,i-=a+1):i=a}return n}ks.default=yf;Object.defineProperty(xs,"__esModule",{value:!0});const wf=ks;class bf{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);const n={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}const i=wf.default(this._queue,n,(a,o)=>o.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}}xs.default=bf;Object.defineProperty(Is,"__esModule",{value:!0});const Sf=pf,rc=gf,Cf=xs,Ui=()=>{},Df=new rc.TimeoutError;class Ef extends Sf{constructor(e){var t,n,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Ui,this._resolveIdle=Ui,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Cf.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Ui,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Ui,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{const a=async()=>{this._pendingCount++,this._intervalCount++;try{const o=this._timeout===void 0&&t.timeout===void 0?e():rc.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&i(Df)});n(await o)}catch(o){i(o)}this._next()};this._queue.enqueue(a,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}Is.default=Ef;Object.defineProperty(Fa,"__esModule",{value:!0});Fa.WebHIDDevice=void 0;const If=Wl,xf=Is;class kf extends If.EventEmitter{constructor(t){super();Ze(this,"device");Ze(this,"reportQueue",new xf.default({concurrency:1}));this.device=t,this.device.addEventListener("inputreport",n=>{if(n.reportId===1){const i=new Uint8Array(n.data.buffer,n.data.byteOffset,n.data.byteLength);this.emit("input",i)}})}async close(){return this.device.close()}async forget(){return this.device.forget()}async sendFeatureReport(t){return this.device.sendFeatureReport(t[0],t.subarray(1))}async getFeatureReport(t,n){const i=await this.device.receiveFeatureReport(t);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}async sendReports(t){return this.reportQueue.add(async()=>{for(const n of t)await this.device.sendReport(n[0],n.subarray(1))})}async getDeviceInfo(){return{path:void 0,productId:this.device.productId,vendorId:this.device.vendorId}}async getChildDeviceInfo(){return null}}Fa.WebHIDDevice=kf;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.encodeJPEG=Pf;async function Pf(r,e,t){const n=await new Promise((i,a)=>{const o=document.createElement("canvas");o.width=e,o.height=t;const l=o.getContext("2d");if(l){const c=l.createImageData(e,t);c.data.set(r),l.putImageData(c,0,0),o.toBlob(u=>{u?i(u):a(new Error("No image generated"))},"image/jpeg",.9)}else a(new Error("Failed to get canvas context"))});return new Uint8Array(await n.arrayBuffer())}var li={};Object.defineProperty(li,"__esModule",{value:!0});li.StreamDeckWeb=void 0;const Mf=na();class Lf extends Mf.StreamDeckProxy{constructor(t,n){super(t);Ze(this,"hid");this.hid=n}async forget(){await this.hid.forget()}async fillKeyCanvas(t,n){const i=n.getContext("2d");if(!i)throw new Error("Failed to get canvas context");const a=this.CONTROLS.find(l=>l.type==="button"&&l.index===t);if(!a||a.feedbackType==="none")throw new TypeError("Expected a valid keyIndex");if(a.feedbackType!=="lcd")throw new TypeError(`keyIndex ${a.index} does not support lcd feedback`);const o=i.getImageData(0,0,a.pixelSize.width,a.pixelSize.height);return this.device.fillKeyBuffer(t,o.data,{format:"rgba"})}async fillPanelCanvas(t){const n=t.getContext("2d");if(!n)throw new Error("Failed to get canvas context");const i=this.device.calculateFillPanelDimensions();if(!i)throw new Error("Panel does not support filling");const a=n.getImageData(0,0,i.width,i.height);return this.device.fillPanelBuffer(a.data,{format:"rgba"})}}li.StreamDeckWeb=Lf;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StreamDeckWeb=r.StreamDeckProxy=r.DeviceModelId=r.VENDOR_ID=void 0,r.requestStreamDecks=l,r.getStreamDecks=c,r.openDevice=u;const e=na(),t=Fa,n=Ps,i=li;var a=na();Object.defineProperty(r,"VENDOR_ID",{enumerable:!0,get:function(){return a.VENDOR_ID}}),Object.defineProperty(r,"DeviceModelId",{enumerable:!0,get:function(){return a.DeviceModelId}}),Object.defineProperty(r,"StreamDeckProxy",{enumerable:!0,get:function(){return a.StreamDeckProxy}});var o=li;Object.defineProperty(r,"StreamDeckWeb",{enumerable:!0,get:function(){return o.StreamDeckWeb}});async function l(f){const d=await navigator.hid.requestDevice({filters:[{vendorId:e.VENDOR_ID}]});return Promise.all(d.map(async _=>u(_,f)))}async function c(f){const _=(await navigator.hid.getDevices()).filter(v=>v.vendorId===e.VENDOR_ID);return(await Promise.all(_.map(async v=>u(v,f).catch(y=>null)))).filter(v=>!!v)}async function u(f,d){const _=e.DEVICE_MODELS.find(p=>f.vendorId===e.VENDOR_ID&&p.productIds.includes(f.productId));if(!_)throw new Error("Stream Deck is of unexpected type.");await f.open();try{const p={encodeJPEG:n.encodeJPEG,...d},v=new t.WebHIDDevice(f),y=_.factory(v,p||{});return new i.StreamDeckWeb(y,v)}catch(p){throw await f.close().catch(()=>null),p}}})(cs);const Af={VENDOR_ID:4057};function Tf(r){return r.vendorId===Af.VENDOR_ID}class Nf{constructor(){this.connectedDevices=new Map,this.listeners=new Map,this.buttonStates=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.has(e)&&this.listeners.get(e).delete(t)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}async requestDevice(){if(!navigator.hid)throw new Error("WebHID not supported in this browser");try{const e=await cs.requestStreamDecks();for(const t of e)await this._setupStreamDeck(t);return e[0]||null}catch(e){throw e.name==="NotAllowedError"?new Error("Failed to open Stream Deck. Please close the Elgato Stream Deck software and try again."):e}}async autoReconnect(){if(!navigator.hid)return console.warn("WebHID not supported"),[];try{const e=await cs.getStreamDecks(),t=[];for(const n of e)try{await this._setupStreamDeck(n),t.push(n)}catch(i){console.warn("Failed to reconnect to Stream Deck:",i)}return t}catch(e){return console.error("Failed to auto-reconnect Stream Deck devices:",e),[]}}async _setupStreamDeck(e){try{const t=e.serialNumber||e.SERIAL_NUMBER||`${e.PRODUCT_NAME||"StreamDeck"}-${e.MODEL||e.PRODUCT_ID||"unknown"}`.replace(/\s+/g,"-").toLowerCase();return console.log("Stream Deck serial number:",t,"Product:",e.PRODUCT_NAME,"Model:",e.MODEL),this.buttonStates.set(t,new Map),e.on("down",n=>{let i;if(typeof n=="number"?i=n:typeof n=="object"&&n!==null?i=n.index:typeof n=="string"&&(i=parseInt(n)),typeof i!="number"||isNaN(i)){console.warn("Could not extract button index from Stream Deck event:",n);return}const a=this.buttonStates.get(t);a&&typeof i=="number"&&a.set(i,!0),this._emit("buttondown",{device:e,serialNumber:t,button:i,model:e.PRODUCT_NAME||"Stream Deck"})}),e.on("up",n=>{let i;if(typeof n=="number"?i=n:typeof n=="object"&&n!==null?i=n.index:typeof n=="string"&&(i=parseInt(n)),typeof i!="number"||isNaN(i))return;const a=this.buttonStates.get(t);a&&typeof i=="number"&&a.set(i,!1),this._emit("buttonup",{device:e,serialNumber:t,button:i,model:e.PRODUCT_NAME||"Stream Deck"})}),await e.setBrightness(100),await e.clearPanel(),this.connectedDevices.set(t,e),this._emit("connected",{device:e,serialNumber:t,model:e.PRODUCT_NAME||"Stream Deck",buttonCount:e.NUM_KEYS}),e}catch(t){throw console.error("Failed to setup Stream Deck:",t),t}}async disconnectDevice(e){const t=this.connectedDevices.get(e);t&&(await t.close(),this.connectedDevices.delete(e),this.buttonStates.delete(e),this._emit("disconnected",{serialNumber:e}))}async setButtonColor(e,t,n){const i=this.connectedDevices.get(e);if(!i)return!1;const a=i.NUM_KEYS||15;if(t<0||t>=a)return!1;try{const o=this._parseColor(n);return o?(await i.fillKeyColor(t,o.r,o.g,o.b),!0):!1}catch(o){return console.error(`Failed to set button ${t} color on ${e}:`,o),!1}}async clearButtonColor(e,t){return await this.setButtonColor(e,t,"#000000")}_parseColor(e){const t=document.createElement("div");t.style.color=e,document.body.appendChild(t);const n=window.getComputedStyle(t).color;document.body.removeChild(t);const i=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return i?{r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3])}:null}getConnectedDevices(){return Array.from(this.connectedDevices.values())}async disconnectAll(){const e=Array.from(this.connectedDevices.keys());for(const t of e)await this.disconnectDevice(t)}}class Pi{constructor(e,t,n){this.id=e,this.name=t,this.type=n,this.controls=new Map,this.listeners=new Map}getValue(e){const t=this.controls.get(e);return t?t.value:0}_setValue(e,t,n=0,i=1){this.controls.has(e)||this.controls.set(e,{type:"value",value:0,min:n,max:i});const a=this.controls.get(e);a.value=t,a.min=n,a.max=i,this._emit("change",{controlId:e,value:t,control:a})}_trigger(e,t=1){this._emit("trigger",{controlId:e,velocity:t})}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e),i=n.indexOf(t);i!==-1&&n.splice(i,1)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}disconnect(){}getControlIds(){return Array.from(this.controls.keys())}}class Rf extends Pi{constructor(e){super(e.id,e.name||"MIDI Device","midi"),this.midiInput=e,this.midiInput.onmidimessage=this._handleMIDIMessage.bind(this)}_handleMIDIMessage(e){const[t,n,i]=e.data;switch(t&240){case 144:if(i>0){const u=`note-${n}`;this._trigger(u,i/127)}else{const u=`note-${n}`;this._emit("release",{controlId:u})}break;case 128:const o=`note-${n}`;this._emit("release",{controlId:o});break;case 176:const l=`cc-${n}`;this._setValue(l,i/127,0,1);break;case 224:const c=(i<<7|n)-8192;this._setValue("pitchbend",c/8192,-1,1);break}}disconnect(){this.midiInput&&(this.midiInput.onmidimessage=null)}}class Of extends Pi{constructor(e,t={}){super(e.productId.toString(),t.name||"HID Device","hid"),this.hidDevice=e,this.config=t,this.buttonStates=new Map,this.hidDevice.oninputreport=this._handleInputReport.bind(this)}_handleInputReport(e){const{data:t,reportId:n}=e,i=new Uint8Array(t.buffer);for(let a=0;a<i.length;a++){const o=i[a];for(let l=0;l<8;l++){const c=a*8+l,u=o>>l&1,f=`button-${c}`,d=this.buttonStates.get(f)||!1;u&&!d?(this.buttonStates.set(f,!0),this._trigger(f,127)):!u&&d&&(this.buttonStates.set(f,!1),this._emit("release",{controlId:f}))}}}async sendOutput(e,t){this.hidDevice&&this.hidDevice.opened&&await this.hidDevice.sendReport(e,t)}disconnect(){this.hidDevice&&(this.hidDevice.oninputreport=null,this.hidDevice.close()),this.buttonStates.clear()}}class Ff extends Pi{constructor(){super("keyboard","Keyboard","keyboard"),this.pressedKeys=new Set,this._boundKeyDown=this._handleKeyDown.bind(this),this._boundKeyUp=this._handleKeyUp.bind(this),window.addEventListener("keydown",this._boundKeyDown),window.addEventListener("keyup",this._boundKeyUp)}_handleKeyDown(e){if(e.target.matches("input, textarea"))return;const t=`key-${e.code}`;this.pressedKeys.has(e.code)||(this.pressedKeys.add(e.code),this._trigger(t),this._setValue(t,1,0,1))}_handleKeyUp(e){const t=`key-${e.code}`;this.pressedKeys.has(e.code)&&(this.pressedKeys.delete(e.code),this._emit("release",{controlId:t}),this._setValue(t,0,0,1))}disconnect(){window.removeEventListener("keydown",this._boundKeyDown),window.removeEventListener("keyup",this._boundKeyUp),this.pressedKeys.clear()}}class Vf extends Pi{constructor(e="Virtual"){super(`virtual-${Date.now()}`,e,"virtual")}trigger(e,t=1){this._trigger(e,t)}setValue(e,t){this._setValue(e,t,0,1)}addButton(e,t){this.controls.set(e,{type:"button",value:0,label:t})}addKnob(e,t,n=0){this.controls.set(e,{type:"knob",value:n,label:t,min:0,max:1})}}class Bf{constructor(){Ze(this,"listeners",new Map);this.devices=new Map,this.midiAccess=null,this.keyboardDevice=null,this.streamDeckManager=new Nf,this._setupStreamDeckListeners()}_setupStreamDeckListeners(){this.streamDeckManager.on("connected",({device:e,model:t,serialNumber:n})=>{console.log(`Stream Deck connected: ${t}`);const i=n,a=new Pi(i,t||"Stream Deck","hid");a.streamDeck=e,this.devices.set(i,a),this._emit("deviceadded",a)}),this.streamDeckManager.on("buttondown",({device:e,button:t,model:n,serialNumber:i})=>{const a=i,o=this.devices.get(a);if(o){const l=`button-${t}`;o._trigger(l,127)}}),this.streamDeckManager.on("buttonup",({serialNumber:e,button:t})=>{const n=e,i=this.devices.get(n);if(i){const a=`button-${t}`;i._emit("release",{controlId:a})}}),this.streamDeckManager.on("disconnected",({serialNumber:e})=>{console.log("Stream Deck disconnected"),this.removeDevice(e)})}async initMIDI(){if(!navigator.requestMIDIAccess)return console.warn("WebMIDI not supported"),!1;try{this.midiAccess=await navigator.requestMIDIAccess(),this.midiAccess.onstatechange=this._handleMIDIStateChange.bind(this);for(const e of this.midiAccess.inputs.values())this._addMIDIDevice(e);return!0}catch(e){return console.error("Failed to initialize MIDI:",e),!1}}_handleMIDIStateChange(e){const t=e.port;t.type==="input"&&(t.state==="connected"?this._addMIDIDevice(t):t.state==="disconnected"&&this.removeDevice(t.id))}_addMIDIDevice(e){const t=new Rf(e);this.devices.set(t.id,t),this._emit("deviceadded",t)}async requestStreamDeck(){try{return await this.streamDeckManager.requestDevice()}catch(e){throw console.error("Failed to request Stream Deck:",e),e}}async autoReconnectStreamDecks(){try{const e=await this.streamDeckManager.autoReconnect();return console.log(`Auto-reconnected ${e.length} Stream Deck(s)`),e}catch(e){return console.error("Failed to auto-reconnect Stream Decks:",e),[]}}async requestHIDDevice(e=[]){if(!navigator.hid)return console.warn("WebHID not supported"),null;try{const t=await navigator.hid.requestDevice({filters:e});for(const n of t){if(Tf(n))return await this.streamDeckManager.connectDevice(n);if(!n.opened)try{await n.open()}catch(a){throw console.error("Failed to open HID device:",a),new Error(`Cannot open device. Make sure it's not being used by another application. Error: ${a.message}`)}const i=new Of(n);return this.devices.set(i.id,i),this._emit("deviceadded",i),i}}catch(t){throw console.error("Failed to request HID device:",t),t}return null}enableKeyboard(){return this.keyboardDevice||(this.keyboardDevice=new Ff,this.devices.set(this.keyboardDevice.id,this.keyboardDevice),this._emit("deviceadded",this.keyboardDevice)),this.keyboardDevice}createVirtual(e){const t=new Vf(e);return this.devices.set(t.id,t),this._emit("deviceadded",t),t}removeDevice(e){const t=this.devices.get(e);t&&(t.disconnect(),this.devices.delete(e),this._emit("deviceremoved",t))}getDevice(e){return this.devices.get(e)}getAllDevices(){return Array.from(this.devices.values())}getInputDevices(){return this.getAllDevices()}getInputDevice(e){return this.getDevice(e)}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e),i=n.indexOf(t);i!==-1&&n.splice(i,1)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}disconnectAll(){for(const e of this.devices.values())e.disconnect();this.devices.clear()}}class jf{constructor(e,t,n){this.inputDeviceManager=new Bf,this.mappingLibrary=e||new ml,this.customPropertyManager=t||new yl,this.triggerManager=n||new gl,this.listeners=new Map,this._setupInputListeners()}async initialize(){this.customPropertyManager.initialize(),this.inputDeviceManager.on("deviceadded",e=>{this._setupDeviceListeners(e),this._emit("deviceadded",e)}),this.inputDeviceManager.on("deviceremoved",e=>{this._emit("deviceremoved",e)}),await this.inputDeviceManager.initMIDI(),await this.inputDeviceManager.autoReconnectStreamDecks(),this.inputDeviceManager.enableKeyboard()}_setupInputListeners(){}_setupDeviceListeners(e){e.on("trigger",({controlId:t,velocity:n})=>{this._handleTrigger(e.id,t,n)}),e.on("release",({controlId:t})=>{this._handleRelease(e.id,t)}),e.on("change",({controlId:t,value:n})=>{this._handleValueChange(e.id,t,n)})}_generateClassName(e,t){return`${e.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}_${t}`}_handleTrigger(e,t,n){const i=this.mappingLibrary.getByInput(e,t);if(i.length>0){const a=this._generateClassName(t,"down");this.triggerManager.addRawClass(a);const o=this._generateClassName(t,"up");this.triggerManager.removeRawClass(o);for(const l of i)l.mode==="trigger"&&(this.triggerManager.trigger(l),this._emit("trigger",{mapping:l,velocity:n}))}}_handleRelease(e,t){const n=this.mappingLibrary.getByInput(e,t);if(n.length>0){const i=this._generateClassName(t,"down");this.triggerManager.removeRawClass(i);const a=this._generateClassName(t,"up");this.triggerManager.addRawClass(a);for(const o of n)o.mode==="trigger"&&o.triggerType!=="always"&&(this.triggerManager.release(o),this._emit("release",{mapping:o}))}}_handleValueChange(e,t,n){const i=this.mappingLibrary.getByInput(e,t),a=i.find(o=>o.mode==="input");if(a&&a.name){const o=a.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),l=Math.round(n*100);this.customPropertyManager.setProperty(o,`${l}%`)}for(const o of i)if(o.mode==="direct"){const l=o.getPropertyName(),c=o.mapValue(n);this.customPropertyManager.setProperty(l,c),this._emit("valuechange",{mapping:o,value:n,propertyValue:c})}}async requestStreamDeck(){return await this.inputDeviceManager.requestStreamDeck()}async requestHIDDevice(e=[]){return await this.inputDeviceManager.requestHIDDevice(e)}getInputDevices(){return this.inputDeviceManager.getAllDevices()}getInputDevice(e){return this.inputDeviceManager.getDevice(e)}createVirtualDevice(e){return this.inputDeviceManager.createVirtual(e)}setTriggerContainer(e){this.triggerManager.setContainer(e)}on(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}off(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e),i=n.indexOf(t);i!==-1&&n.splice(i,1)}_emit(e,t){if(!this.listeners.has(e))return;const n=this.listeners.get(e);for(const i of n)i(t)}destroy(){this.inputDeviceManager.disconnectAll(),this.customPropertyManager.destroy(),this.triggerManager.clearAll(),this.listeners.clear()}}Vc();var $f=ol("<title> </title>"),Gf=ol("<svg><!><!></svg>");function Rt(r,e){const t=zs(e,["children","$$slots","$$events","$$legacy"]),n=zs(t,["data","viewBox","size","width","height","color","stroke","fill","title"]);wt(e,!1);const i=Oo();let a=ve(e,"data",8,""),o=ve(e,"viewBox",24,()=>v(a())),l=ve(e,"size",8,"20px"),c=ve(e,"width",24,l),u=ve(e,"height",24,l),f=ve(e,"color",8,"currentColor"),d=ve(e,"stroke",24,f),_=ve(e,"fill",24,f),p=ve(e,"title",8,"");function v(P){const k=/viewBox="([\d\- \.]+)"/.exec(P);return k?k[1]:"0 0 20 20"}au(()=>il(a()),()=>{D(i,a().replace(/<svg[ \n]([^>]*)>/,"").replace("</svg>",""))}),su(),Vu();var y=Gf();Nu(y,()=>({xmlns:"http://www.w3.org/2000/svg",width:c(),height:u(),viewBox:o(),stroke:d(),fill:_(),...n}));var g=m(y);{var S=P=>{var R=$f(),k=m(R);ee(()=>ie(k,p())),C(P,R)};le(g,P=>{p()&&P(S)})}var w=b(g);un(w,()=>s(i),!0),C(r,y),bt()}const Kf=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
    <path fill="#2196f3" d="M 17 2 A 1 1 0 0 0 16.123047 2.5214844 L 8.1738281 15.433594 L 8.1738281 15.435547 A 1 1 0 0 0 8 16 A 1 1 0 0 0 9 17 L 14.5 17 L 13.019531 26.800781 A 1 1 0 0 0 13 27 A 1 1 0 0 0 14 28 A 1 1 0 0 0 14.882812 27.466797 L 14.884766 27.466797 L 22.806641 14.589844 L 22.796875 14.572266 C 22.915239 14.407976 23 14.217804 23 14 C 23 13.448 22.552 13 22 13 L 16.5 13 L 17.955078 3.2949219 A 1 1 0 0 0 18 3 A 1 1 0 0 0 17 2 z"></path>
</svg>
`,Uf=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
    <path fill="#9C27B0" d="M21 4H26.001V43H21z" transform="rotate(45.001 23.5 23.5)"></path>
    <path fill="#9C27B0" d="M21 4H26.001V43H21z" transform="rotate(134.999 23.5 23.5)"></path>
</svg>
`,Hf=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#9C27B0" d="M21 6H26V41H21z"></path><path fill="#9C27B0" d="M6 21H41V26H6z"></path>
</svg>`,qf='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="#2196F3" d="M16 15c0 1.104-.896 2-2 2H8c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V15zM29 15c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V15zM42 15c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V15zM16 26c0 1.104-.896 2-2 2H8c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V26zM29 26c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V26zM42 26c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V26zM16 37c0 1.104-.896 2-2 2H8c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V37zM29 37c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V37zM42 37c0 1.104-.896 2-2 2h-6c-1.104 0-2-.896-2-2v-4c0-1.104.896-2 2-2h6c1.104 0 2 .896 2 2V37z"/></svg>',zf='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="#f44336" d="M16,13c0,0,0,23.988,0,24h3V21.583L36,16v17h3V6L16,13z"/><path fill="#f44336" d="M13 31A6 6 0 1 0 13 43 6 6 0 1 0 13 31zM33 27A6 6 0 1 0 33 39 6 6 0 1 0 33 27z"/></svg>';var Wf=O('<div class="dialog-header svelte-pz05fu"><h2 class="svelte-pz05fu"> </h2></div>'),Yf=O('<div class="dialog-footer svelte-pz05fu"><div class="dialog-footer-tools svelte-pz05fu"><!></div> <div class="dialog-footer-buttons svelte-pz05fu"><!></div></div>'),Xf=O('<dialog><!> <div class="dialog-body svelte-pz05fu"><!></div> <!></dialog>');function Cr(r,e){wt(e,!0);let t=ve(e,"title",3,null),n=ve(e,"onclose",3,null),i=ve(e,"dialogRef",15,null),a=ve(e,"anchored",3,!1),o=ve(e,"anchorId",3,null),l=ve(e,"showArrow",3,!0),c=ve(e,"lightDismiss",3,!0);function u(){var P;(P=i())==null||P.close(),n()&&n()()}function f(P){a()&&c()&&P.target===i()&&u()}var d=Xf();let _;d.__click=f;var p=m(d);{var v=P=>{var R=Wf(),k=m(R),T=m(k);ee(()=>ie(T,t())),C(P,R)};le(p,P=>{t()&&P(v)})}var y=b(p,2),g=m(y);zi(g,()=>e.children);var S=b(y,2);{var w=P=>{var R=Yf(),k=m(R),T=m(k);{var j=ce=>{var oe=at(),we=_e(oe);zi(we,()=>e.tools),C(ce,oe)};le(T,ce=>{e.tools&&ce(j)})}var H=b(k,2),ne=m(H);{var ue=ce=>{var oe=at(),we=_e(oe);zi(we,()=>e.buttons),C(ce,oe)};le(ne,ce=>{e.buttons&&ce(ue)})}C(P,R)};le(S,P=>{(e.tools||e.buttons)&&P(w)})}dn(d,P=>i(P),()=>i()),ee(()=>{_=Dt(d,1,"dialog svelte-pz05fu",null,_,{anchored:a(),"show-arrow":l()&&a()}),Ot(d,a()&&o()?`position-anchor: --${o()}`:"")}),C(r,d),bt()}Mt(["click"]);var Jf=O('<button id="start" class="svelte-4b3o1e"><!> Connect DMX controller</button>'),Zf=O('<button id="stop" class="svelte-4b3o1e"><!> Disconnect</button>'),Qf=O('<div class="device-item svelte-4b3o1e"><span class="device-name svelte-4b3o1e"> </span></div>'),ev=O('<div class="device-list svelte-4b3o1e"></div>'),tv=O('<div class="device-item svelte-4b3o1e"><span class="device-name svelte-4b3o1e"> </span></div>'),rv=O('<div class="device-list svelte-4b3o1e"></div>'),nv=O('<div class="device-section svelte-4b3o1e"><button class="connect-device-btn svelte-4b3o1e"><!> Connect Stream Deck</button> <!></div> <div class="device-section svelte-4b3o1e"><button class="connect-device-btn svelte-4b3o1e"><!> Connect MIDI Device</button> <!></div>',1),iv=O('<header class="svelte-4b3o1e"><!> <button id="devices-button" style="anchor-name: --devices-button" title="Connect input devices" class="svelte-4b3o1e"><!></button></header> <!>',1);function av(r,e){wt(e,!0);let t=U(null),n=U(null),i=U(Me([])),a=ye(()=>s(i).filter(k=>k.type==="hid"&&k.id!=="keyboard")),o=ye(()=>s(i).filter(k=>k.type==="midi")),l=ye(()=>s(o).length>0);function c(){e.inputController&&D(i,e.inputController.getInputDevices(),!0),requestAnimationFrame(()=>{var k;(k=s(t))==null||k.showModal()})}function u(){var k;(k=s(t))==null||k.close()}async function f(){var k,T;try{await((k=e.inputController)==null?void 0:k.requestStreamDeck()),D(i,((T=e.inputController)==null?void 0:T.getInputDevices())||[],!0)}catch(j){alert(`Failed to connect Stream Deck: ${j.message}

Please close the Elgato Stream Deck software and try again.`)}}async function d(){var k,T,j;try{await((T=(k=e.inputController)==null?void 0:k.inputDeviceManager)==null?void 0:T.initMIDI()),D(i,((j=e.inputController)==null?void 0:j.getInputDevices())||[],!0)}catch(H){alert(`Failed to connect MIDI: ${H.message}`)}}var _=iv(),p=_e(_),v=m(p);{var y=k=>{var T=Jf();T.__click=function(...H){var ne;(ne=e.onconnect)==null||ne.apply(this,H)};var j=m(T);Rt(j,{get data(){return Kf}}),C(k,T)},g=k=>{var T=Zf();T.__click=function(...H){var ne;(ne=e.ondisconnect)==null||ne.apply(this,H)};var j=m(T);Rt(j,{get data(){return Uf}}),C(k,T)};le(v,k=>{e.connected?k(g,!1):k(y)})}var S=b(v,2);S.__click=c;var w=m(S);Rt(w,{get data(){return Hf}}),dn(S,k=>D(n,k),()=>s(n));var P=b(p,2);{var R=k=>{Cr(k,{anchored:!0,anchorId:"devices-button",showArrow:!0,lightDismiss:!0,onclose:u,get dialogRef(){return s(t)},set dialogRef(T){D(t,T,!0)},children:(T,j)=>{var H=nv(),ne=_e(H),ue=m(ne);ue.__click=f;var ce=m(ue);Rt(ce,{get data(){return qf}});var oe=b(ue,2);{var we=V=>{var E=ev();ke(E,21,()=>s(a),x=>x.id,(x,N)=>{var L=Qf(),F=m(L),M=m(F);ee(()=>ie(M,s(N).name)),C(x,L)}),C(V,E)};le(oe,V=>{s(a).length>0&&V(we)})}var me=b(ne,2),he=m(me);he.__click=d;var J=m(he);Rt(J,{get data(){return zf}});var te=b(he,2);{var $=V=>{var E=rv();ke(E,21,()=>s(o),x=>x.id,(x,N)=>{var L=tv(),F=m(L),M=m(F);ee(()=>ie(M,s(N).name)),C(x,L)}),C(V,E)};le(te,V=>{s(o).length>0&&V($)})}ee(()=>he.disabled=s(l)),C(T,H)},$$slots:{default:!0}})};le(P,k=>{s(n)&&k(R)})}C(r,_),bt()}Mt(["click"]);const sv='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="#3F51B5" d="M17.8 18.1L10.4 25.4 6.2 21.3 4 23.5 10.4 29.9 20 20.3zM17.8 5.1L10.4 12.4 6.2 8.3 4 10.5 10.4 16.9 20 7.3zM17.8 31.1L10.4 38.4 6.2 34.3 4 36.5 10.4 42.9 20 33.3z"/><g><path fill="#90CAF9" d="M24 22H44V26H24zM24 9H44V13H24zM24 35H44V39H24z"/></g></svg>',ov='<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px" baseProfile="basic"><path fill="#64b5f6" d="M24,44C12.972,44,4,35.028,4,24S12.972,4,24,4s20,8.972,20,20S35.028,44,24,44z M24,6	C14.075,6,6,14.075,6,24s8.075,18,18,18s18-8.075,18-18S33.925,6,24,6z"/><path fill="#64b5f6" d="M24,37c-7.168,0-13-5.832-13-13s5.832-13,13-13s13,5.832,13,13S31.168,37,24,37z M24,13	c-6.065,0-11,4.935-11,11s4.935,11,11,11s11-4.935,11-11S30.065,13,24,13z"/><path fill="#64b5f6" d="M24,31c-3.86,0-7-3.14-7-7s3.14-7,7-7s7,3.14,7,7S27.86,31,24,31z M24,19c-2.757,0-5,2.243-5,5	s2.243,5,5,5s5-2.243,5-5S26.757,19,24,19z"/><circle cx="40" cy="14" r="2" fill="#0d47a1"/><circle cx="12" cy="39" r="3" fill="#5e35b1"/><circle cx="33" cy="32" r="3" fill="#0d47a1"/><circle cx="14" cy="8" r="2" fill="#5e35b1"/><circle cx="12" cy="25" r="2" fill="#0d47a1"/><circle cx="24" cy="24" r="3.094" fill="#ffe082"/></svg>',lv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="none" stroke="#02abc0" stroke-miterlimit="10" stroke-width="4" d="M8 21L8 10 19 10"></path><path fill="none" stroke="#02abc0" stroke-miterlimit="10" stroke-width="4" d="M8,10c5.763,6.146,13,15,20,15 c8.505,0,13-6.102,13-9.748C41,11.932,39.013,9,35.007,9C28.52,9,23.02,16.775,23.346,23.808C23.769,33.967,31.596,41,40,41"></path>
</svg>`,cv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#2196F3" d="M11 5A7 7 0 1 0 11 19A7 7 0 1 0 11 5Z"></path><path fill="#FFA726" d="M23.082 28.861c.713 1.412 2.483 1.967 3.934 1.232 1.454-.734 2.059-2.488 1.346-3.899l-3.186-6.319c-.712-1.41-2.482-1.966-3.934-1.23-1.453.733-2.059 2.486-1.347 3.898L23.082 28.861zM28.39 26.234c.713 1.41 2.483 1.967 3.937 1.232 1.453-.733 2.057-2.488 1.344-3.9l-3.186-6.318c-.713-1.41-2.48-1.967-3.934-1.231-1.453.732-2.059 2.485-1.348 3.898L28.39 26.234zM33.7 23.607c.712 1.413 2.481 1.966 3.935 1.234 1.452-.734 2.058-2.49 1.344-3.9l-3.187-6.32c-.712-1.412-2.479-1.965-3.933-1.232-1.453.734-2.059 2.489-1.348 3.9L33.7 23.607zM40.215 23.421c-.307-.608.047.093.381.755C40.752 24.488 40.496 23.978 40.215 23.421z"></path><path fill="#FFA726" d="M20.815,22.174c-0.486,0.246-1.081,0.053-1.324-0.436l-5.78-11.459c-0.493-0.976-2.209-2.19-3.969-1.301c-1.76,0.89-1.757,3.085-1.313,3.967c0.243,0.482,3.405,6.754,6.226,12.342c2.339,4.635,4.438,8.803,4.438,8.803l-5.523-1.625c-1.83-0.603-3.687,0.198-4.15,2.302c-0.465,1.767,0.762,3.524,2.392,4.056l7.5,2.462c3.865,1.269,7.878,0.809,11.523-1.04l0.545-0.275l0.762-0.305l4.807-2.43l1.27-0.785c3.546-2.574,4.857-7.359,2.819-11.397c0,0-0.216-0.43-0.44-0.876c-0.175-0.344-0.857-1.696-2.6-5.153L20.815,22.174z"></path><g><path fill="#FFCDD2" d="M9.359 12.6c-.511-1.038-.135-2.27.846-2.751.976-.479 2.186-.024 2.692 1.011C13.409 11.898 9.869 13.635 9.359 12.6M11.882 37.605c-1.178-.316-1.874-1.527-1.561-2.707.319-1.178 1.531-1.875 2.707-1.559C14.207 33.657 13.061 37.924 11.882 37.605"></path></g>
</svg>`,uv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#FFC107" d="M33 22L23.6 22 30 5 19 5 13 26 21.6 26 17 45z"></path>
</svg>`,dv=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#3F51B5" d="M36 34L33 31.5 39.8 24 33 16.5 36 14 45 24zM13 34L4 24 13 14 16 16.5 9.1 24 16 31.5z"></path><path fill="#2196F3" d="M21 39L17.2 37.7 27 9 30.8 10.3z"></path>
</svg>`;var fv=O('<div class="clear-universe svelte-1f8dwwb"><button class="svelte-1f8dwwb">Clear</button></div>'),vv=O('<div class="tabs-container svelte-1f8dwwb"><nav class="svelte-1f8dwwb"><label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Devices</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Animations</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Inputs</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Triggers</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> CSS</label> <label class="svelte-1f8dwwb"><input type="radio" name="view" class="svelte-1f8dwwb"/> <!> Universe</label></nav> <!></div>');function hv(r,e){wt(e,!0);const t=[];let n=ve(e,"view",15),i=ve(e,"onClearUniverse",3,null);var a=vv(),o=m(a),l=m(o),c=m(l);c.value=c.__value="devices";var u=b(c,2);Rt(u,{get data(){return sv}});var f=b(l,2),d=m(f);d.value=d.__value="animations";var _=b(d,2);Rt(_,{get data(){return lv}});var p=b(f,2),v=m(p);v.value=v.__value="inputs";var y=b(v,2);Rt(y,{get data(){return cv}});var g=b(p,2),S=m(g);S.value=S.__value="triggers";var w=b(S,2);Rt(w,{get data(){return uv}});var P=b(g,2),R=m(P);R.value=R.__value="css";var k=b(R,2);Rt(k,{get data(){return dv}});var T=b(P,2),j=m(T);j.value=j.__value="universe";var H=b(j,2);Rt(H,{get data(){return ov}});var ne=b(o,2);{var ue=ce=>{var oe=fv(),we=m(oe);we.__click=function(...me){var he;(he=i())==null||he.apply(this,me)},C(ce,oe)};le(ne,ce=>{n()==="universe"&&i()&&ce(ue)})}gn(t,[],c,n,n),gn(t,[],d,n,n),gn(t,[],v,n,n),gn(t,[],S,n,n),gn(t,[],R,n,n),gn(t,[],j,n,n),C(r,a),bt()}Mt(["click"]);var pv=O('<div class="channel svelte-134r4z3"><label class="svelte-134r4z3"></label> <input type="number" min="0" max="255" class="svelte-134r4z3"/></div>'),_v=O('<div class="universe-container svelte-134r4z3"><div class="channels-grid svelte-134r4z3"></div></div>');function mv(r,e){wt(e,!0);let t=U(Me(new Array(512).fill(0))),n;function i(){e.dmxController&&D(t,Array.from(e.dmxController.getUniverse()),!0)}Hn(()=>{n=setInterval(i,100)}),Sa(()=>{n&&clearInterval(n)});function a(c,u){const f=parseInt(u.target.value)||0;e.dmxController&&e.dmxController.setChannel(c,f),s(t)[c]=f}var o=_v(),l=m(o);ke(l,21,()=>s(t),Ye,(c,u,f)=>{var d=pv(),_=m(d);Vt(_,"for",`ch-${f}`),_.textContent=f+1;var p=b(_,2);Vt(p,"id",`ch-${f}`),p.__change=v=>a(f,v),ee(()=>$t(p,s(u))),C(c,d)}),C(r,o),bt()}Mt(["change"]);function Ba(r,e){var a,o;const t=(a=Oe[r])==null?void 0:a.controls,n=(o=Oe[e])==null?void 0:o.controls;if(!t||!n)return{};const i={};for(const l of t)for(const c of n)if(l.name===c.name&&l.type===c.type){i[l.name]=c.name;break}return i}function gv(r,e){const t=Ba(r,e);return Object.keys(t).length>0}function fs(r,e){const t=Oe[r],n=t.controls.find(a=>a.name===e);if(!n)return[];const i=[];for(const a of Object.values(n.components)){const o=t.components[a].channel;i.push(o)}return i}function vo(r,e,t,n,i=null,a=!1){const o=Ba(r,e),l=[...n];for(const[c,u]of Object.entries(o)){if(i!==null&&!i.includes(c))continue;const f=fs(r,c),d=fs(e,u);for(let _=0;_<Math.min(f.length,d.length);_++){let p=t[f[_]];a&&c==="Pan/Tilt"&&_===0&&(p=255-p),l[d[_]]=p}}return l}function yv(r,e,t=null){const n=Ba(r,e),i=[];for(const[a,o]of Object.entries(n)){if(t!==null&&!t.includes(a))continue;const l=fs(e,o);i.push(...l)}return i}function wv(r,e){const t=Ba(r,e),n=Oe[r].controls,i=Oe[e].controls,a=[];for(const[o,l]of Object.entries(t)){const c=n.find(f=>f.name===o),u=i.find(f=>f.name===l);a.push({controlName:o,sourceControl:c,targetControl:u})}return a}var bv=O('<div class="xy-pad svelte-wbxrfb" role="slider" aria-label="Pan and Tilt Control" tabindex="0"><div class="grid-line vertical svelte-wbxrfb" style="left: 25%"></div> <div class="grid-line vertical svelte-wbxrfb" style="left: 50%"></div> <div class="grid-line vertical svelte-wbxrfb" style="left: 75%"></div> <div class="grid-line horizontal svelte-wbxrfb" style="top: 25%"></div> <div class="grid-line horizontal svelte-wbxrfb" style="top: 50%"></div> <div class="grid-line horizontal svelte-wbxrfb" style="top: 75%"></div> <div></div></div>');function Sv(r,e){wt(e,!0);let t=ve(e,"panValue",15,127),n=ve(e,"tiltValue",15,127),i=ve(e,"onUpdate",3,null),a=U(null),o=U(!1);function l(y,g){if(!s(a))return;const S=s(a).getBoundingClientRect();let w=(y-S.left)/S.width,P=(g-S.top)/S.height;w=Math.max(0,Math.min(1,w)),P=Math.max(0,Math.min(1,P)),t(Math.round(w*255)),n(Math.round((1-P)*255)),i()&&i()(t(),n())}function c(y){D(o,!0),l(y.clientX,y.clientY),y.preventDefault()}function u(y){s(o)&&l(y.clientX,y.clientY)}Er(()=>{const y=()=>{D(o,!1)};return window.addEventListener("mouseup",y),()=>window.removeEventListener("mouseup",y)});let f=ye(()=>t()/255*100),d=ye(()=>(1-n()/255)*100);var _=bv();_.__mousedown=c,_.__mousemove=u;var p=b(m(_),12);let v;dn(_,y=>D(a,y),()=>s(a)),ee(()=>{v=Dt(p,1,"crosshair svelte-wbxrfb",null,v,{active:s(o)}),Ot(p,`left: ${s(f)??""}%; top: ${s(d)??""}%`)}),C(r,_),bt()}Mt(["mousedown","mousemove"]);var Cv=O('<button type="button" role="switch"><span class="toggle-slider svelte-1fjc2jm"></span></button>');function Dv(r,e){wt(e,!0);let t=ve(e,"checked",15,!1),n=ve(e,"disabled",3,!1),i=ve(e,"onchange",3,null),a=ve(e,"label",3,null);function o(){n()||(t(!t()),i()&&i()(t()))}var l=Cv();let c;l.__click=o,ee(()=>{c=Dt(l,1,"toggle-switch svelte-1fjc2jm",null,c,{on:t()}),l.disabled=n(),Vt(l,"aria-checked",t()),Vt(l,"aria-label",a())}),C(r,l),bt()}Mt(["click"]);var Ev=O('<div class="control-xypad svelte-15qavlb"><label class="svelte-15qavlb"> </label> <div><!></div> <div class="xypad-inputs svelte-15qavlb"><input type="text" class="value-input svelte-15qavlb" title="X" maxlength="3"/> <input type="text" class="value-input svelte-15qavlb" title="Y" maxlength="3"/></div></div>'),Iv=O('<div class="control-group-label svelte-15qavlb"><label class="svelte-15qavlb"> </label></div>  <div class="control svelte-15qavlb"><label class="svelte-15qavlb"> </label> <div class="slider-wrapper svelte-15qavlb"><input type="range" min="0" max="255" class="color-slider svelte-15qavlb"/></div> <input type="text" class="value-input svelte-15qavlb" maxlength="3"/></div>  <div class="control svelte-15qavlb"><label class="svelte-15qavlb"> </label> <div class="slider-wrapper svelte-15qavlb"><input type="range" min="0" max="255" class="color-slider svelte-15qavlb"/></div> <input type="text" class="value-input svelte-15qavlb" maxlength="3"/></div>  <div class="control svelte-15qavlb"><label class="svelte-15qavlb"> </label> <div class="slider-wrapper svelte-15qavlb"><input type="range" min="0" max="255" class="color-slider svelte-15qavlb"/></div> <input type="text" class="value-input svelte-15qavlb" maxlength="3"/></div>',1),xv=O('<div class="control svelte-15qavlb"><label class="svelte-15qavlb"> </label> <div class="toggle-wrapper svelte-15qavlb"><!></div> <input type="text" class="value-input svelte-15qavlb" maxlength="3"/></div>'),kv=O('<div class="control svelte-15qavlb"><label class="svelte-15qavlb"> </label> <div class="slider-wrapper svelte-15qavlb"><input type="range" min="0" max="255" class="color-slider svelte-15qavlb"/></div> <input type="text" class="value-input svelte-15qavlb" maxlength="3"/></div>'),Pv=O('<div class="device-controls svelte-15qavlb"></div>');function ia(r,e){wt(e,!0);let t=ve(e,"values",31,()=>Me([])),n=ve(e,"onChange",3,null),i=ve(e,"disabledChannels",19,()=>[]),a=ve(e,"controlFilter",3,null);function o(){const S=Oe[e.deviceType].controls;return a()?S.filter(w=>a().includes(w.name)):S}function l(S,w){t(t()[S]=w,!0),n()&&n()(S,w)}function c(S,w,P,R){t(t()[S]=P,!0),t(t()[w]=R,!0),n()&&(n()(S,P),n()(w,R))}function u(S,w){const R=t()[S]===w.onValue?w.offValue:w.onValue;l(S,R)}function f(S,w,P){const R=parseInt(w);!isNaN(R)&&R>=0&&R<=255?l(S,R):w===""?P.target.value="":P.target.value=t()[S]}function d(S){S.target.value=S.target.value.replace(/[^0-9]/g,"")}function _(S){return i().includes(S)}function p(S){return Oe[e.deviceType].components[S].channel}function v(S){switch(S){case"Red":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,0,0) 100%)";case"Green":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(0,255,0) 100%)";case"Blue":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(0,0,255) 100%)";case"Amber":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,191,0) 100%)";case"White":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,255,255) 100%)";case"Dimmer":case"Intensity":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(255,255,255) 100%)";case"Output":return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(200,200,200) 100%)";default:return"linear-gradient(to right, rgb(0,0,0) 0%, rgb(128,128,128) 100%)"}}function y(S,w){switch(S){case"Red":return`rgb(${w}, 0, 0)`;case"Green":return`rgb(0, ${w}, 0)`;case"Blue":return`rgb(0, 0, ${w})`;case"Amber":return`rgb(${w}, ${Math.round(w*.749)}, 0)`;case"White":return`rgb(${w}, ${w}, ${w})`;case"Dimmer":case"Intensity":return`rgb(${w}, ${w}, ${w})`;case"Output":return`rgb(${Math.round(w*.784)}, ${Math.round(w*.784)}, ${Math.round(w*.784)})`;default:return`rgb(${Math.round(w*.5)}, ${Math.round(w*.5)}, ${Math.round(w*.5)})`}}var g=Pv();ke(g,21,o,Ye,(S,w)=>{var P=at(),R=_e(P);{var k=j=>{const H=ye(()=>p(s(w).components.x)),ne=ye(()=>p(s(w).components.y)),ue=ye(()=>_(s(H))),ce=ye(()=>_(s(ne))),oe=ye(()=>s(ue)&&s(ce));var we=Ev(),me=m(we),he=m(me),J=b(me,2);let te;var $=m(J);Sv($,{get panValue(){return t()[s(H)]},get tiltValue(){return t()[s(ne)]},onUpdate:(N,L)=>!s(oe)&&c(s(H),s(ne),N,L)});var V=b(J,2),E=m(V);E.__input=d,E.__change=N=>!s(ue)&&f(s(H),N.target.value,N);var x=b(E,2);x.__input=d,x.__change=N=>!s(ce)&&f(s(ne),N.target.value,N),ee(()=>{ie(he,s(w).name),te=Dt(J,1,"xypad-wrapper svelte-15qavlb",null,te,{disabled:s(oe)}),$t(E,t()[s(H)]),E.disabled=s(ue),$t(x,t()[s(ne)]),x.disabled=s(ce)}),C(j,we)},T=j=>{var H=at(),ne=_e(H);{var ue=oe=>{const we=ye(()=>Oe[e.deviceType].components),me=ye(()=>p(s(w).components.r)),he=ye(()=>p(s(w).components.g)),J=ye(()=>p(s(w).components.b)),te=ye(()=>_(s(me))),$=ye(()=>_(s(he))),V=ye(()=>_(s(J)));var E=Iv(),x=_e(E),N=m(x),L=m(N),F=b(x,2),M=m(F),G=m(M),X=b(M,2),Q=m(X);Q.__input=Fe=>!s(te)&&l(s(me),parseInt(Fe.target.value));var I=b(X,2);I.__input=d,I.__change=Fe=>!s(te)&&f(s(me),Fe.target.value,Fe);var A=b(F,2),Y=m(A),q=m(Y),re=b(Y,2),de=m(re);de.__input=Fe=>!s($)&&l(s(he),parseInt(Fe.target.value));var be=b(re,2);be.__input=d,be.__change=Fe=>!s($)&&f(s(he),Fe.target.value,Fe);var xe=b(A,2),qe=m(xe),ze=m(qe),We=b(qe,2),$e=m(We);$e.__input=Fe=>!s(V)&&l(s(J),parseInt(Fe.target.value));var lt=b(We,2);lt.__input=d,lt.__change=Fe=>!s(V)&&f(s(J),Fe.target.value,Fe),ee((Fe,kr,Pr,Hr,B,z)=>{ie(L,s(w).name),ie(G,s(we)[s(w).components.r].name),$t(Q,t()[s(me)]),Ot(Q,`--slider-gradient: ${Fe??""}; --thumb-color: ${kr??""}`),Q.disabled=s(te),$t(I,t()[s(me)]),I.disabled=s(te),ie(q,s(we)[s(w).components.g].name),$t(de,t()[s(he)]),Ot(de,`--slider-gradient: ${Pr??""}; --thumb-color: ${Hr??""}`),de.disabled=s($),$t(be,t()[s(he)]),be.disabled=s($),ie(ze,s(we)[s(w).components.b].name),$t($e,t()[s(J)]),Ot($e,`--slider-gradient: ${B??""}; --thumb-color: ${z??""}`),$e.disabled=s(V),$t(lt,t()[s(J)]),lt.disabled=s(V)},[()=>v("Red"),()=>y("Red",t()[s(me)]),()=>v("Green"),()=>y("Green",t()[s(he)]),()=>v("Blue"),()=>y("Blue",t()[s(J)])]),C(oe,E)},ce=oe=>{var we=at(),me=_e(we);{var he=te=>{const $=ye(()=>p(s(w).components.value)),V=ye(()=>_(s($))),E=ye(()=>t()[s($)]===s(w).onValue);var x=xv(),N=m(x),L=m(N),F=b(N,2),M=m(F);Dv(M,{get checked(){return s(E)},get disabled(){return s(V)},onchange:()=>u(s($),s(w)),get label(){return s(w).name}});var G=b(F,2);G.__input=d,G.__change=X=>!s(V)&&f(s($),X.target.value,X),ee(()=>{ie(L,s(w).name),$t(G,t()[s($)]),G.disabled=s(V)}),C(te,x)},J=te=>{var $=at(),V=_e($);{var E=x=>{const N=ye(()=>p(s(w).components.value)),L=ye(()=>_(s(N))),F=ye(()=>Oe[e.deviceType].components);var M=kv(),G=m(M),X=m(G),Q=b(G,2),I=m(Q);I.__input=Y=>!s(L)&&l(s(N),parseInt(Y.target.value));var A=b(Q,2);A.__input=d,A.__change=Y=>!s(L)&&f(s(N),Y.target.value,Y),ee((Y,q)=>{ie(X,s(w).name),$t(I,t()[s(N)]),Ot(I,`--slider-gradient: ${Y??""}; --thumb-color: ${q??""}`),I.disabled=s(L),$t(A,t()[s(N)]),A.disabled=s(L)},[()=>v(s(F)[s(w).components.value].name),()=>y(s(F)[s(w).components.value].name,t()[s(N)])]),C(x,M)};le(V,x=>{s(w).type==="slider"&&x(E)},!0)}C(te,$)};le(me,te=>{s(w).type==="toggle"?te(he):te(J,!1)},!0)}C(oe,we)};le(ne,oe=>{s(w).type==="rgb"?oe(ue):oe(ce,!1)},!0)}C(j,H)};le(R,j=>{s(w).type==="xypad"?j(k):j(T,!1)})}C(S,P)}),C(r,g),bt()}Mt(["input","change"]);var Mv=O("<button><!></button>");function He(r,e){let t=ve(e,"variant",3,"primary"),n=ve(e,"disabled",3,!1),i=ve(e,"onclick",3,null),a=ve(e,"type",3,"button"),o=ve(e,"form",3,null),l=ve(e,"pulsating",3,!1);var c=Mv();c.__click=function(...f){var d;(d=i())==null||d.apply(this,f)};var u=m(c);zi(u,()=>e.children),ee(()=>{Dt(c,1,`button ${t()??""} ${l()?"pulsating":""}`,"svelte-18f749u"),c.disabled=n(),Vt(c,"type",a()),Vt(c,"form",o()||void 0)}),C(r,c)}Mt(["click"]);var Lv=O("<button><!></button>");function Ms(r,e){let t=ve(e,"onclick",3,null),n=ve(e,"disabled",3,!1),i=ve(e,"size",3,"medium");var a=Lv();a.__click=function(...l){var c;(c=t())==null||c.apply(this,l)};var o=m(a);Rt(o,{get data(){return e.icon}}),ee(()=>{Dt(a,1,`icon-button ${i()??""}`,"svelte-cwtv5f"),a.disabled=n(),Vt(a,"aria-label",e.label),Vt(a,"title",e.label)}),C(r,a)}Mt(["click"]);const ja=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 30 30">
    <path d="M 22.828125 3 C 22.316375 3 21.804562 3.1954375 21.414062 3.5859375 L 19 6 L 24 11 L 26.414062 8.5859375 C 27.195062 7.8049375 27.195062 6.5388125 26.414062 5.7578125 L 24.242188 3.5859375 C 23.851688 3.1954375 23.339875 3 22.828125 3 z M 17 8 L 5.2597656 19.740234 C 5.2597656 19.740234 6.1775313 19.658 6.5195312 20 C 6.8615312 20.342 6.58 22.58 7 23 C 7.42 23.42 9.6438906 23.124359 9.9628906 23.443359 C 10.281891 23.762359 10.259766 24.740234 10.259766 24.740234 L 22 13 L 17 8 z M 4 23 L 3.0566406 25.671875 A 1 1 0 0 0 3 26 A 1 1 0 0 0 4 27 A 1 1 0 0 0 4.328125 26.943359 A 1 1 0 0 0 4.3378906 26.939453 L 4.3632812 26.931641 A 1 1 0 0 0 4.3691406 26.927734 L 7 26 L 5.5 24.5 L 4 23 z"></path>
</svg>`,Av=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#1976D2" d="M38 14h-3c-5.514 0-10 4.486-10 10s4.486 10 10 10h3c5.514 0 10-4.486 10-10S43.514 14 38 14M38 30h-3c-3.309 0-6-2.691-6-6s2.691-6 6-6h3c3.309 0 6 2.691 6 6S41.309 30 38 30M13 14h-3C4.486 14 0 18.486 0 24s4.486 10 10 10h3c5.514 0 10-4.486 10-10S18.514 14 13 14M13 30h-3c-3.309 0-6-2.691-6-6s2.691-6 6-6h3c3.309 0 6 2.691 6 6S16.309 30 13 30"></path><path fill="#42A5F5" d="M33,22H15c-1.104,0-2,0.896-2,2s0.896,2,2,2h18c1.104,0,2-0.896,2-2S34.104,22,33,22"></path>
</svg>`,Mi=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 48 48">
<path fill="#b39ddb" d="M30.6,44H17.4c-2,0-3.7-1.4-4-3.4L9,11h30l-4.5,29.6C34.2,42.6,32.5,44,30.6,44z"></path><path fill="#9575cd" d="M28 6L20 6 14 12 34 12z"></path><path fill="#7e57c2" d="M10,8h28c1.1,0,2,0.9,2,2v2H8v-2C8,8.9,8.9,8,10,8z"></path>
</svg>`;var Tv=O("<option> </option>"),Nv=O('<div class="empty-state svelte-25wvt7"><p>No devices added yet. Add a device to get started!</p></div>'),Rv=O('<div class="device-card svelte-25wvt7"><div class="device-header svelte-25wvt7"><div class="color-preview svelte-25wvt7"></div> <h3 class="svelte-25wvt7"> </h3> <!> <!></div> <!></div>'),Ov=O("<!> Delete",1),Fv=O("<!> <!>",1),Vv=O("<option> </option>"),Bv=O(`<select id="link-select" class="svelte-25wvt7"><option>None</option><!></select> <small class="link-help svelte-25wvt7">Link this device to follow another device's values</small>`,1),jv=O('<p class="no-devices svelte-25wvt7">No compatible devices available to link</p>'),$v=O('<label class="sync-control-item svelte-25wvt7"><input type="checkbox" class="svelte-25wvt7"/> <span class="svelte-25wvt7"> </span></label>'),Gv=O('<div class="dialog-input-group svelte-25wvt7"><label class="checkbox-label svelte-25wvt7"><input type="checkbox" class="svelte-25wvt7"/> <span class="svelte-25wvt7">Mirror pan (invert pan values)</span></label> <small class="link-help svelte-25wvt7">Useful for moving heads facing each other</small></div>'),Kv=O('<div class="dialog-input-group svelte-25wvt7"><label>Sync controls:</label> <div class="sync-controls-list svelte-25wvt7"></div> <small class="link-help svelte-25wvt7">Select which controls to sync from the linked device</small></div> <!>',1),Uv=O('<form id="device-settings-form" method="dialog"><div class="dialog-input-group svelte-25wvt7"><label for="name-input">Name:</label> <input id="name-input" type="text" placeholder="Device name" class="svelte-25wvt7"/> <small class="css-id-preview svelte-25wvt7"> </small></div> <div class="dialog-input-group svelte-25wvt7"><label for="channel-input">Starting channel (1-512):</label> <input id="channel-input" type="number" min="1" max="512"/> <small class="channel-range svelte-25wvt7"> </small></div> <div class="dialog-input-group svelte-25wvt7"><label for="link-select">Link to device:</label> <!></div> <!></form>'),Hv=O('<div class="devices-container svelte-25wvt7"><div class="add-device-section svelte-25wvt7"><select class="svelte-25wvt7"></select> <!></div> <div class="devices-list svelte-25wvt7"><!> <!></div> <!></div>');function qv(r,e){wt(e,!0);let t=ve(e,"devices",31,()=>Me([])),n=U("RGB"),i=null,a=U(null),o=U(""),l=U(1),c=U(null),u=U(null),f=U(!1);function d(I){D(a,I,!0),D(o,I.name,!0),D(l,I.startChannel+1),D(c,I.linkedTo||null,!0),D(u,I.syncedControls||null,!0),D(f,I.mirrorPan||!1,!0),requestAnimationFrame(()=>{i==null||i.showModal()})}function _(){i==null||i.close(),D(a,null),D(o,""),D(c,null),D(u,null),D(f,!1)}function p(){s(a)&&confirm(`Are you sure you want to remove "${s(a).name}"?`)&&(H(s(a).id),_())}function v(){var A;return(s(o).trim()||((A=s(a))==null?void 0:A.name)||"").toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}function y(){if(!s(a)||!g(s(a),s(l)-1))return;const I=Math.max(0,Math.min(511,s(l)-1)),A=s(o).trim()||s(a).name,Y=A===s(a).name?s(a).cssId:null,q=new Jn(s(a).id,s(a).type,I,A,s(c),Y,s(c)!==null?s(u):null,s(c)!==null?s(f):!1);if(q.defaultValues=[...s(a).defaultValues],s(c)!==null){const re=t().find(de=>de.id===s(c));if(re){const de=vo(re.type,q.type,re.defaultValues,q.defaultValues,s(u),s(f));q.defaultValues=de}}e.dmxController&&q.defaultValues.forEach((re,de)=>{const be=q.startChannel+de;e.dmxController.setChannel(be,re)}),t(t().map(re=>re.id===s(a).id?q:re)),_()}function g(I,A){const Y=Oe[I.type].channels,q=A+Y;if(q>512||A<0)return!1;for(let re of t()){if(re.id===I.id)continue;const de=Oe[re.type].channels,be=re.startChannel,xe=be+de;if(A<xe&&q>be)return!1}return!0}function S(){try{const I=localStorage.getItem("dmx-devices");if(I){const A=JSON.parse(I);return{devices:A.devices.map(q=>{const re=new Jn(q.id,q.type,q.startChannel,q.name,q.linkedTo,q.cssId,q.syncedControls||null,q.mirrorPan||!1);return re.defaultValues=q.defaultValues||new Array(Oe[q.type].channels).fill(0),re}),nextId:A.nextId||1}}}catch(I){console.error("Failed to load from localStorage:",I)}return{devices:[],nextId:1}}const w=t().length===0?S():{devices:t(),nextId:null};t().length===0&&t(w.devices);const P=t().length>0?Math.max(...t().map(I=>I.id)):0;let R=U(Me(Math.max(P+1,w.nextId||1)));Er(()=>{try{const I={devices:t().map(A=>({id:A.id,name:A.name,type:A.type,startChannel:A.startChannel,defaultValues:A.defaultValues,linkedTo:A.linkedTo,cssId:A.cssId,syncedControls:A.syncedControls,mirrorPan:A.mirrorPan})),nextId:s(R)};localStorage.setItem("dmx-devices",JSON.stringify(I))}catch(I){console.error("Failed to save to localStorage:",I)}});function k(){if(t().length===0)return 0;let I=0;return t().forEach(A=>{const Y=A.startChannel+Oe[A.type].channels;Y>I&&(I=Y)}),I>=512?0:I}function T(I=s(n)){const A=k(),Y=new Jn(Ji(R),I,A);t([...t(),Y])}function j(){t(t().map(I=>(I.defaultValues=I.defaultValues.map(()=>0),I)))}function H(I){t(t().map(A=>(A.linkedTo===I&&(A.linkedTo=null),A)).filter(A=>A.id!==I))}function ne(I,A,Y){const q=new Jn(I.id,I.type,I.startChannel,I.name,I.linkedTo,I.cssId,I.syncedControls,I.mirrorPan);q.defaultValues=[...I.defaultValues],q.defaultValues[A]=Y,t(t().map(re=>re.id===I.id?q:re)),ue(q),ce(q)}function ue(I){e.dmxController&&I.defaultValues.forEach((A,Y)=>{const q=I.startChannel+Y;e.dmxController.setChannel(q,A)})}function ce(I){t(t().map(A=>{if(A.linkedTo===I.id){const Y=new Jn(A.id,A.type,A.startChannel,A.name,A.linkedTo,A.cssId,A.syncedControls,A.mirrorPan),q=vo(I.type,A.type,I.defaultValues,A.defaultValues,A.syncedControls,A.mirrorPan);return Y.defaultValues=q,ue(Y),Y}return A}))}function oe(I){return t().filter(A=>A.id!==I.id&&!A.isLinked()&&gv(I.type,A.type)&&A.linkedTo!==I.id)}function we(I){if(!I.linkedTo)return[];const A=t().find(Y=>Y.id===I.linkedTo);return A?yv(A.type,I.type,I.syncedControls):[]}function me(){if(!s(c)||!s(a))return[];const I=t().find(A=>A.id===s(c));return I?wv(I.type,s(a).type):[]}function he(I){if(s(u)===null){const A=me();D(u,A.map(Y=>Y.controlName).filter(Y=>Y!==I),!0)}else s(u).includes(I)?D(u,s(u).filter(A=>A!==I),!0):D(u,[...s(u),I],!0)}function J(I){return s(u)===null?!0:s(u).includes(I)}function te(){return me().some(A=>A.controlName==="Pan/Tilt")}Er(()=>{e.dmxController&&t().forEach(I=>{ue(I)})});var $={addDevice:T,clearAllDeviceValues:j},V=Hv(),E=m(V),x=m(E);ke(x,21,()=>Object.entries(Oe),Ye,(I,A)=>{var Y=ye(()=>uc(s(A),2));let q=()=>s(Y)[0],re=()=>s(Y)[1];var de=Tv(),be=m(de),xe={};ee(()=>{ie(be,re().name),xe!==(xe=q())&&(de.value=(de.__value=q())??"")}),C(I,de)});var N=b(x,2);He(N,{onclick:()=>T(s(n)),variant:"secondary",children:(I,A)=>{var Y=nt("Add Device");C(I,Y)},$$slots:{default:!0}});var L=b(E,2),F=m(L);{var M=I=>{var A=Nv();C(I,A)};le(F,I=>{t().length===0&&I(M)})}var G=b(F,2);ke(G,17,t,I=>I.id,(I,A)=>{var Y=Rv(),q=m(Y),re=m(q),de=b(re,2),be=m(de),xe=b(de,2);{var qe=$e=>{Rt($e,{get data(){return Av}})};le(xe,$e=>{s(A).isLinked()&&$e(qe)})}var ze=b(xe,2);Ms(ze,{get icon(){return ja},onclick:()=>d(s(A)),title:"Device settings",size:"small"});var We=b(q,2);{let $e=ye(()=>we(s(A)));ia(We,{get deviceType(){return s(A).type},get values(){return s(A).defaultValues},onChange:(lt,Fe)=>ne(s(A),lt,Fe),get disabledChannels(){return s($e)}})}ee($e=>{Ot(re,`background-color: ${$e??""}`),ie(be,s(A).name)},[()=>oi(s(A).type,s(A).defaultValues)]),C(I,Y)});var X=b(L,2);{var Q=I=>{Cr(I,{title:"Device",onclose:_,get dialogRef(){return i},set dialogRef(q){i=q},tools:q=>{He(q,{onclick:p,variant:"secondary",children:(re,de)=>{var be=Ov(),xe=_e(be);un(xe,()=>Mi),C(re,be)},$$slots:{default:!0}})},buttons:q=>{var re=Fv(),de=_e(re);He(de,{onclick:_,variant:"secondary",children:(xe,qe)=>{var ze=nt("Cancel");C(xe,ze)},$$slots:{default:!0}});var be=b(de,2);{let xe=ye(()=>!g(s(a),s(l)-1));He(be,{type:"submit",form:"device-settings-form",variant:"primary",get disabled(){return s(xe)},children:(qe,ze)=>{var We=nt("Save");C(qe,We)},$$slots:{default:!0}})}C(q,re)},children:(q,re)=>{var de=Uv(),be=m(de),xe=b(m(be),2),qe=b(xe,2),ze=m(qe),We=b(be,2),$e=b(m(We),2);let lt;var Fe=b($e,2),kr=m(Fe),Pr=b(We,2),Hr=b(m(Pr),2);{var B=se=>{var Z=Bv(),Le=_e(Z),Ae=m(Le);Ae.value=(Ae.__value=null)??"";var Ve=b(Ae);ke(Ve,17,()=>oe(s(a)),Ye,(Be,Ne)=>{var Ge=Vv(),et=m(Ge),tt={};ee(()=>{ie(et,`${s(Ne).name??""} (${Oe[s(Ne).type].name??""})`),tt!==(tt=s(Ne).id)&&(Ge.value=(Ge.__value=s(Ne).id)??"")}),C(Be,Ge)}),rt(Le,()=>s(c),Be=>D(c,Be)),C(se,Z)},z=se=>{var Z=jv();C(se,Z)};le(Hr,se=>{oe(s(a)).length>0||s(a).isLinked()?se(B):se(z,!1)})}var pe=b(Pr,2);{var ae=se=>{var Z=Kv(),Le=_e(Z),Ae=b(m(Le),2);ke(Ae,21,me,Ye,(Ne,Ge)=>{var et=$v(),tt=m(et);tt.__change=()=>he(s(Ge).controlName);var pt=b(tt,2),Bt=m(pt);ee(jt=>{Lu(tt,jt),ie(Bt,s(Ge).controlName)},[()=>J(s(Ge).controlName)]),C(Ne,et)});var Ve=b(Le,2);{var Be=Ne=>{var Ge=Gv(),et=m(Ge),tt=m(et);ti(tt,()=>s(f),pt=>D(f,pt)),C(Ne,Ge)};le(Ve,Ne=>{te()&&Ne(Be)})}C(se,Z)};le(pe,se=>{s(c)!==null&&se(ae)})}ee((se,Z)=>{ie(ze,`#${se??""}`),lt=Dt($e,1,"svelte-25wvt7",null,lt,Z),ie(kr,`Device uses ${Oe[s(a).type].channels??""} channels:
                ${s(l)??""}-${s(l)+Oe[s(a).type].channels-1}`)},[v,()=>({valid:g(s(a),s(l)-1),invalid:!g(s(a),s(l)-1)})]),on("submit",de,se=>{se.preventDefault(),y()}),wr(xe,()=>s(o),se=>D(o,se)),wr($e,()=>s(l),se=>D(l,se)),C(q,de)},$$slots:{tools:!0,buttons:!0,default:!0}})};le(X,I=>{s(a)&&I(Q)})}return rt(x,()=>s(n),I=>D(n,I)),C(r,V),bt($)}Mt(["change"]);var zv=O('<div class="gradient-segment svelte-ctef3a"></div>'),Wv=O('<div><div class="keyframe-time svelte-ctef3a"> </div></div>'),Yv=O("<!> Delete",1),Xv=O('<div class="timeline-container svelte-ctef3a"><div class="timeline svelte-ctef3a"><!> <!></div></div> <!>',1);function Jv(r,e){wt(e,!0);let t=ve(e,"animation",7),n=ve(e,"animationVersion",3,0),i=ve(e,"onUpdate",3,null),a=U(Me([0,0,0])),o=U(null),l=U(null),c=U(null),u=U(null),f=U(800),d=U(null),_=U(0),p=U(0),v=U(!1),y=ye(()=>(n(),t()?t().keyframes:[])),g=ye(()=>{if(n(),!t()||t().keyframes.length<2)return[];const $=[],V=t().keyframes,E=V[0];if(E.time>0){const N=t().getKeyframeColor(E);$.push({left:0,width:E.time*s(f),gradient:N})}for(let N=0;N<V.length-1;N++){const L=V[N],F=V[N+1],M=t().getKeyframeColor(L),G=t().getKeyframeColor(F),X=L.time*s(f),Q=(F.time-L.time)*s(f);$.push({left:X,width:Q,gradient:`linear-gradient(to right, ${M}, ${G})`})}const x=V[V.length-1];if(x.time<1){const N=t().getKeyframeColor(x),L=x.time*s(f),F=(1-x.time)*s(f);$.push({left:L,width:F,gradient:N})}return $});function S($){return n(),$.time*s(f)}function w($,V=null){if(!t())return;D(o,$,!0);const E=t().keyframes[$];D(a,[...E.values],!0),D(c,V,!0),requestAnimationFrame(()=>{var x;(x=s(l))==null||x.showModal()})}function P(){var $;($=s(l))==null||$.close(),D(o,null),D(c,null)}function R(){if(!t()||s(o)===null)return;const $=t().keyframes[s(o)];$.values=[...s(a)],e.animationLibrary.save(),i()&&i()()}function k(){if(!(!t()||s(o)===null)){if(t().keyframes.length<=2){alert("Animation must have at least 2 keyframes");return}confirm(`Delete keyframe at ${(t().keyframes[s(o)].time*100).toFixed(0)}%?`)&&(T(s(o)),P())}}function T($){if(!t()||t().keyframes.length<=2){alert("Animation must have at least 2 keyframes");return}t().keyframes=t().keyframes.filter((V,E)=>E!==$),e.animationLibrary.save(),i()&&i()(),D(o,null)}function j($){if(!t()||$.target.classList.contains("timeline-keyframe-marker")||$.target.classList.contains("keyframe-time")||$.target.closest(".timeline-keyframe-marker"))return;const E=$.currentTarget.getBoundingClientRect(),x=$.clientX-E.left,N=Math.max(0,Math.min(1,x/s(f))),L=Math.round(N*20)/20;if(t().keyframes.some(X=>Math.abs(X.time-L)<.001))return;const M=t().getValuesAtTime(L);t().addKeyframe(L,M),e.animationLibrary.save(),i()&&i()();const G=t().keyframes.findIndex(X=>Math.abs(X.time-L)<.001);G!==-1&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{const X=document.getElementById(`keyframe-${t().name}-${G}`);X&&w(G,X)})})}function H($,V,E){$.preventDefault(),$.stopPropagation(),D(d,{keyframe:V,index:E},!0),D(_,$.clientX,!0),D(p,V.time,!0),D(v,!1),document.addEventListener("mousemove",ne),document.addEventListener("mouseup",ue)}function ne($){if(!s(d)||!t())return;const V=$.clientX-s(_),E=V/s(f);let x=s(p)+E;x=Math.max(0,Math.min(1,x)),x=Math.round(x*100)/100;const N=t().keyframes[0],L=t().keyframes[t().keyframes.length-1];s(d).index!==0&&x===0&&N.time===0||s(d).index!==t().keyframes.length-1&&x===1&&L.time===1||(s(d).keyframe.time=x,t().keyframes.sort((F,M)=>F.time-M.time),s(d).index=t().keyframes.indexOf(s(d).keyframe),Math.abs(V)>3&&D(v,!0),i()&&i()())}function ue(){s(d)&&t()&&e.animationLibrary.save(),D(d,null),document.removeEventListener("mousemove",ne),document.removeEventListener("mouseup",ue),setTimeout(()=>{D(v,!1)},10)}var ce=Xv(),oe=_e(ce),we=m(oe);we.__click=j;var me=m(we);ke(me,17,()=>s(g),Ye,($,V)=>{var E=zv();ee(()=>Ot(E,`left: ${s(V).left??""}px; width: ${s(V).width??""}px; background: ${s(V).gradient??""}`)),C($,E)});var he=b(me,2);ke(he,19,()=>s(y),($,V)=>$.time+"-"+V+"-"+n(),($,V,E)=>{var x=Wv();let N;x.__mousedown=M=>H(M,s(V),s(E)),x.__click=M=>{M.stopPropagation(),s(v)||w(s(E),M.currentTarget)};var L=m(x),F=m(L);ee((M,G,X,Q)=>{var I;Vt(x,"id",`keyframe-${t().name??""}-${s(E)??""}`),N=Dt(x,1,"timeline-keyframe-marker svelte-ctef3a",null,N,{dragging:((I=s(d))==null?void 0:I.keyframe)===s(V)}),Ot(x,`left: ${M??""}px; --keyframe-color: ${G??""}; anchor-name: --keyframe-${t().name??""}-${s(E)??""}`),Vt(x,"title",`${X??""}%`),ie(F,`${Q??""}%`)},[()=>S(s(V)),()=>t().getKeyframeColor(s(V)),()=>(s(V).time*100).toFixed(0),()=>(s(V).time*100).toFixed(0)]),C($,x)}),dn(we,$=>D(u,$),()=>s(u));var J=b(oe,2);{var te=$=>{{const V=N=>{{let L=ye(()=>t().keyframes.length<=2);He(N,{onclick:k,variant:"secondary",get disabled(){return s(L)},children:(F,M)=>{var G=Yv(),X=_e(G);un(X,()=>Mi),C(F,G)},$$slots:{default:!0}})}};let E=ye(()=>`keyframe-${t().name}-${s(o)}`),x=ye(()=>(t().keyframes[s(o)].time*100).toFixed(0));Cr($,{anchored:!0,get anchorId(){return s(E)},showArrow:!0,lightDismiss:!0,onclose:P,get title(){return`Keyframe at ${s(x)??""}%`},get dialogRef(){return s(l)},set dialogRef(N){D(l,N,!0)},tools:V,children:(N,L)=>{{let F=ye(()=>t().getDeviceTypeForEditing());ia(N,{get deviceType(){return s(F)},onChange:R,get controlFilter(){return t().controls},get values(){return s(a)},set values(M){D(a,M,!0)}})}},$$slots:{tools:!0,default:!0}})}};le(J,$=>{s(c)&&t()&&s(o)!==null&&$(te)})}Fu(we,"clientWidth",$=>D(f,$)),C(r,ce),bt()}Mt(["click","mousedown"]);var Zv=O('<div class="empty-state svelte-nhkann"><p class="svelte-nhkann">No animations yet. Create one to get started!</p></div>'),Qv=O('<div class="animation-card svelte-nhkann"><div class="animation-header svelte-nhkann"><div class="animation-info svelte-nhkann"><h3 class="svelte-nhkann"> </h3> <div class="badges svelte-nhkann"><div class="target-badge svelte-nhkann"> </div></div></div> <!></div> <!></div>'),eh=O("<!> <!>",1),th=O("<option disabled>ââââââââââ</option>"),rh=O("<option> </option>"),nh=O('<form id="new-animation-form" method="dialog"><div class="dialog-input-group"><label for="animation-name">Animation Name:</label> <input id="animation-name" type="text" placeholder="e.g., rainbow, pulse, sweep"/></div> <div class="dialog-input-group"><label for="animation-target">Target:</label> <select id="animation-target" class="animation-target-select"></select> <small class="help-text svelte-nhkann">Select a specific control or entire device type</small></div></form>'),ih=O("<!> Delete",1),ah=O("<!> <!>",1),sh=O('<form id="edit-animation-form" method="dialog"><div class="dialog-input-group"><label for="edit-animation-name">Name:</label> <input id="edit-animation-name" type="text" placeholder="Animation name"/> <small class="css-preview"> </small></div></form>'),oh=O('<div class="animations-view svelte-nhkann"><div class="add-animation-section svelte-nhkann"><!></div> <div class="animations-list svelte-nhkann"><!></div></div> <!> <!>',1);function lh(r,e){wt(e,!0),ve(e,"devices",19,()=>[]);let t=U(Me([])),n=null,i=U(""),a=U("RGB|all"),o=null,l=U(null),c=U(""),u=U(0);function f(){if(D(t,e.animationLibrary.getAll(),!0),s(l)){const J=s(t).find(te=>te.name===s(l).name);J?D(l,J,!0):D(l,null)}}Hn(()=>{f()});function d(){D(i,""),D(a,"control|Color"),n==null||n.showModal()}function _(){const J=[],te=new Set;for(const V of Object.values(Oe))for(const E of V.controls)te.add(E.name);const $=Array.from(te).sort();for(const V of $)J.push({type:"control",value:`control|${V}`,label:V});J.push({type:"separator"});for(const[V,E]of Object.entries(Oe))J.push({type:"device",value:`device|${V}`,label:E.name});return J}function p(J){const te=J.split("|"),$=te[0];if($==="control"){const V=te[1];return{controls:[V],displayName:V}}else if($==="device"){const V=te[1],E=Oe[V];return{controls:E.controls.map(N=>N.name),displayName:E.name}}return{controls:["Color"],displayName:"Color"}}function v(){if(!s(i).trim())return;const J=p(s(a)),{controls:te,displayName:$}=J,V=new Ca(s(i).trim(),null,[],null,te,$),E=V.getNumChannels(),x=new Array(E).fill(0);V.addKeyframe(0,[...x]),V.addKeyframe(1,[...x]),e.animationLibrary.add(V),f(),n==null||n.close()}function y(J){D(l,J,!0),D(c,J.name,!0),requestAnimationFrame(()=>{o==null||o.showModal()})}function g(){o==null||o.close(),D(l,null),D(c,"")}function S(){!s(l)||!s(c).trim()||(s(l).name,s(l).name=s(c).trim(),s(l).updateCSSName(),e.animationLibrary.save(),f(),g())}function w(){return s(c).trim()?s(c).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):""}function P(){s(l)&&confirm(`Are you sure you want to delete "${s(l).name}"?`)&&(e.animationLibrary.remove(s(l).name),f(),g())}function R(){Ji(u)}var k=oh(),T=_e(k),j=m(T),H=m(j);He(H,{onclick:d,variant:"secondary",children:(J,te)=>{var $=nt("Add Animation");C(J,$)},$$slots:{default:!0}});var ne=b(j,2),ue=m(ne);{var ce=J=>{var te=Zv();C(J,te)},oe=J=>{var te=at(),$=_e(te);ke($,17,()=>s(t),V=>V.name,(V,E)=>{var x=Qv(),N=m(x),L=m(N),F=m(L),M=m(F),G=b(F,2),X=m(G),Q=m(X),I=b(L,2);Ms(I,{get icon(){return ja},onclick:()=>y(s(E)),title:"Edit animation",size:"small"});var A=b(N,2);Jv(A,{get animation(){return s(E)},get animationLibrary(){return e.animationLibrary},get animationVersion(){return s(u)},onUpdate:R}),ee(Y=>{ie(M,s(E).name),ie(Q,Y)},[()=>s(E).getDisplayName()]),C(V,x)}),C(J,te)};le(ue,J=>{s(t).length===0?J(ce):J(oe,!1)})}var we=b(T,2);Cr(we,{title:"Create New Animation",onclose:()=>n==null?void 0:n.close(),get dialogRef(){return n},set dialogRef(te){n=te},buttons:te=>{var $=eh(),V=_e($);He(V,{type:"button",onclick:()=>n==null?void 0:n.close(),variant:"secondary",children:(x,N)=>{var L=nt("Cancel");C(x,L)},$$slots:{default:!0}});var E=b(V,2);He(E,{type:"submit",form:"new-animation-form",variant:"primary",children:(x,N)=>{var L=nt("Create");C(x,L)},$$slots:{default:!0}}),C(te,$)},children:(te,$)=>{var V=nh(),E=m(V),x=b(m(E),2);Zi(x,!0);var N=b(E,2),L=b(m(N),2);ke(L,21,_,Ye,(F,M)=>{var G=at(),X=_e(G);{var Q=A=>{var Y=th();C(A,Y)},I=A=>{var Y=rh(),q=m(Y),re={};ee(()=>{ie(q,s(M).label),re!==(re=s(M).value)&&(Y.value=(Y.__value=s(M).value)??"")}),C(A,Y)};le(X,A=>{s(M).type==="separator"?A(Q):A(I,!1)})}C(F,G)}),on("submit",V,F=>{F.preventDefault(),v()}),wr(x,()=>s(i),F=>D(i,F)),rt(L,()=>s(a),F=>D(a,F)),C(te,V)},$$slots:{buttons:!0,default:!0}});var me=b(we,2);{var he=J=>{Cr(J,{title:"Animation",onclose:g,get dialogRef(){return o},set dialogRef(V){o=V},tools:V=>{He(V,{onclick:P,variant:"secondary",children:(E,x)=>{var N=ih(),L=_e(N);un(L,()=>Mi),C(E,N)},$$slots:{default:!0}})},buttons:V=>{var E=ah(),x=_e(E);He(x,{onclick:g,variant:"secondary",children:(L,F)=>{var M=nt("Cancel");C(L,M)},$$slots:{default:!0}});var N=b(x,2);He(N,{type:"submit",form:"edit-animation-form",variant:"primary",children:(L,F)=>{var M=nt("Save");C(L,M)},$$slots:{default:!0}}),C(V,E)},children:(V,E)=>{var x=sh(),N=m(x),L=b(m(N),2);Zi(L,!0);var F=b(L,2),M=m(F);ee(G=>ie(M,`@keyframes ${G??""}`),[w]),on("submit",x,G=>{G.preventDefault(),S()}),wr(L,()=>s(c),G=>D(c,G)),C(V,x)},$$slots:{tools:!0,buttons:!0,default:!0}})};le(me,J=>{s(l)&&J(he)})}C(r,k),bt()}var ch=O('<div class="empty-state svelte-an69h5"><p class="svelte-an69h5">No inputs detected yet. Start listening to detect inputs!</p></div>'),uh=O('<div class="input-color-badge svelte-an69h5"></div>'),dh=O('<div class="input-card svelte-an69h5"><!> <div class="input-header svelte-an69h5"><div class="input-name svelte-an69h5"> </div> <div class="input-device-name svelte-an69h5"> </div></div> <div class="input-actions svelte-an69h5"><button class="edit-button svelte-an69h5" title="Rename input"><!></button></div></div>'),fh=O("<!> Delete",1),vh=O("<!> <!>",1),hh=O('<code class="css-id svelte-an69h5"> </code> <code class="css-id svelte-an69h5"> </code>',1),ph=O('<code class="css-id svelte-an69h5"> </code>'),_h=O('<form id="edit-input-form"><div class="dialog-input-group svelte-an69h5"><label for="input-name">Name:</label> <input id="input-name" type="text" placeholder="Input name" class="svelte-an69h5"/> <div class="css-identifiers svelte-an69h5"><!></div></div></form>'),mh=O('<div class="inputs-view svelte-an69h5"><div class="listen-section svelte-an69h5"><!></div> <div class="inputs-grid svelte-an69h5"><!></div></div> <!>',1);function gh(r,e){wt(e,!0);let t=U(!1),n=U(Me([])),i=U(null),a=U(""),o=null,l=[];function c(){D(t,!0);const E=e.inputController.getInputDevices();for(const x of E){const N=L=>{u({deviceId:x.id,controlId:L.controlId,type:L.velocity!==void 0?"trigger":"change",device:x})};x.on("trigger",N),x.on("change",N),l.push({device:x,event:"trigger",handler:N}),l.push({device:x,event:"change",handler:N})}e.inputController.on("deviceadded",f)}function u(E){if(!s(t))return;const{deviceId:x,controlId:N,device:L}=E;if(!s(n).find(M=>M.inputDeviceId===x&&M.inputControlId===N)){const M=_((L==null?void 0:L.name)||x,N),G=(L==null?void 0:L.type)==="hid"&&L.id!=="keyboard",X=new Bn({name:M,mode:"input",inputDeviceId:x,inputControlId:N,inputDeviceName:(L==null?void 0:L.name)||x,color:G?void 0:null});if(e.mappingLibrary.add(X),T(),G&&N.startsWith("button-")){const Q=parseInt(N.replace("button-",""));if(!isNaN(Q)&&Q>=0){const I=e.inputController.inputDeviceManager.streamDeckManager,A=x;I.setButtonColor(A,Q,X.color).catch(Y=>{console.warn(`Could not set button ${Q} color:`,Y)})}}}}function f(E){if(!s(t))return;const x=N=>{u({deviceId:E.id,controlId:N.controlId,type:N.velocity!==void 0?"trigger":"change",device:E})};E.on("trigger",x),E.on("change",x),l.push({device:E,event:"trigger",handler:x}),l.push({device:E,event:"change",handler:x})}function d(){D(t,!1);for(const{device:E,event:x,handler:N}of l)E.off(x,N);l=[],e.inputController.off("deviceadded",f)}function _(E,x){if(x.startsWith("note-")){const N=x.replace("note-","");return`${E} Note ${N}`}else if(x.startsWith("control-")||x.startsWith("cc-")){const N=x.replace("control-","").replace("cc-","");return`${E} Control ${N}`}else if(x.startsWith("button-")){const N=x.replace("button-","");return`${E} Button ${N}`}else if(x.startsWith("key-")){const N=x.replace("key-","");return`Keyboard ${N.replace("Key","").replace("Digit","")||N}`}else return`${E} ${x}`}function p(E){D(i,E,!0),D(a,E.name,!0),requestAnimationFrame(()=>{o==null||o.showModal()})}function v(){if(!s(i)||!s(a).trim())return;const E=e.mappingLibrary.get(s(i).id);E&&(E.name=s(a).trim(),E.updateCSSIdentifiers(),e.mappingLibrary.update(E),T()),g()}function y(){g()}function g(){o==null||o.close(),D(i,null),D(a,"")}function S(){return s(a).trim()?`--${s(a).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}`:"--"}function w(){return s(a).trim()?`${s(a).toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_down`:""}function P(){return s(a).trim()?`${s(a).toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")}_up`:""}async function R(){s(i)&&confirm(`Are you sure you want to delete "${s(i).name}"?`)&&(await k(s(i).id),g())}async function k(E){const x=e.mappingLibrary.get(E);if(!x)return;const N=e.inputController.getInputDevice(x.inputDeviceId);if((N==null?void 0:N.type)==="hid"&&N.id!=="keyboard"&&x.inputControlId.startsWith("button-")){const L=parseInt(x.inputControlId.replace("button-",""));if(!isNaN(L)&&L>=0){const F=e.inputController.inputDeviceManager.streamDeckManager,M=x.inputDeviceId;await F.clearButtonColor(M,L)}}e.mappingLibrary.remove(E),T()}function T(){D(n,e.mappingLibrary.getAll().filter(E=>E.mode==="input"),!0)}async function j(){const E=e.inputController.inputDeviceManager.streamDeckManager;if(E.getConnectedDevices().length!==0)for(const N of s(n)){const L=e.inputController.getInputDevice(N.inputDeviceId);if((L==null?void 0:L.type)==="hid"&&L.id!=="keyboard"&&N.inputControlId.startsWith("button-")){const F=parseInt(N.inputControlId.replace("button-",""));if(!isNaN(F)&&F>=0){const M=N.inputDeviceId;await E.setButtonColor(M,F,N.color)}}}}Hn(()=>{T(),e.inputController.on("deviceadded",E=>{E.type==="hid"&&setTimeout(()=>j(),500)}),setTimeout(()=>j(),1e3)}),Sa(()=>{d()});var H=mh(),ne=_e(H),ue=m(ne),ce=m(ue);{var oe=E=>{He(E,{onclick:d,variant:"primary",pulsating:!0,children:(x,N)=>{var L=nt("Stop Listening");C(x,L)},$$slots:{default:!0}})},we=E=>{He(E,{onclick:c,variant:"secondary",children:(x,N)=>{var L=nt("Start Listening");C(x,L)},$$slots:{default:!0}})};le(ce,E=>{s(t)?E(oe):E(we,!1)})}var me=b(ue,2),he=m(me);{var J=E=>{var x=ch();C(E,x)},te=E=>{var x=at(),N=_e(x);ke(N,17,()=>s(n),L=>L.id,(L,F)=>{var M=dh(),G=m(M);{var X=xe=>{var qe=uh();ee(()=>Ot(qe,`background-color: ${s(F).color??""}`)),C(xe,qe)};le(G,xe=>{s(F).color&&xe(X)})}var Q=b(G,2),I=m(Q),A=m(I),Y=b(I,2),q=m(Y),re=b(Q,2),de=m(re);de.__click=()=>p(s(F));var be=m(de);un(be,()=>ja),ee(()=>{ie(A,s(F).name),ie(q,s(F).inputDeviceName||s(F).inputDeviceId)}),C(L,M)}),C(E,x)};le(he,E=>{s(n).length===0?E(J):E(te,!1)})}var $=b(ne,2);{var V=E=>{Cr(E,{title:"Input",onclose:g,get dialogRef(){return o},set dialogRef(L){o=L},tools:L=>{He(L,{onclick:R,variant:"secondary",children:(F,M)=>{var G=fh(),X=_e(G);un(X,()=>Mi),C(F,G)},$$slots:{default:!0}})},buttons:L=>{var F=vh(),M=_e(F);He(M,{onclick:y,variant:"secondary",children:(X,Q)=>{var I=nt("Cancel");C(X,I)},$$slots:{default:!0}});var G=b(M,2);He(G,{type:"submit",form:"edit-input-form",variant:"primary",children:(X,Q)=>{var I=nt("Save");C(X,I)},$$slots:{default:!0}}),C(L,F)},children:(L,F)=>{var M=_h(),G=m(M),X=b(m(G),2);X.__keydown=q=>{q.key==="Enter"&&v(),q.key==="Escape"&&y()},Zi(X,!0);var Q=b(X,2),I=m(Q);{var A=q=>{var re=hh(),de=_e(re),be=m(de),xe=b(de,2),qe=m(xe);ee((ze,We)=>{ie(be,`.${ze??""}`),ie(qe,`.${We??""}`)},[w,P]),C(q,re)},Y=q=>{var re=ph(),de=m(re);ee(be=>ie(de,be),[S]),C(q,re)};le(I,q=>{s(i).isButtonInput()?q(A):q(Y,!1)})}on("submit",M,q=>{q.preventDefault(),v()}),wr(X,()=>s(a),q=>D(a,q)),C(L,M)},$$slots:{tools:!0,buttons:!0,default:!0}})};le($,E=>{s(i)&&E(V)})}C(r,H),bt()}Mt(["click","keydown"]);var yh=O('<p class="svelte-17ww3d9">No inputs available. Go to the Inputs tab to detect and save inputs first.</p>'),wh=O('<p class="svelte-17ww3d9">No animations available. Go to the Animations tab to create animations first.</p>'),bh=O('<p class="svelte-17ww3d9">No devices available. Go to the Devices tab to add devices first.</p>'),Sh=O('<div class="empty-state svelte-17ww3d9"><!> <!> <!></div>'),Ch=O('<div class="empty-state svelte-17ww3d9"><p class="svelte-17ww3d9">No triggers created yet. Click Add Trigger to create one!</p></div>'),Dh=O('<div class="trigger-card svelte-17ww3d9"><div class="trigger-content svelte-17ww3d9"><span class="trigger-text svelte-17ww3d9"> </span> <!></div></div>'),Eh=O("<!> <!>",1),Ih=O("<option> </option>"),xh=O("<option> </option>"),kh=O("<option> </option>"),Ph=O("<option> </option>"),Mh=O("<option> </option>"),Lh=O("<option> </option>"),Ah=O('<div class="dialog-input-group"><label for="trigger-animation">Animation:</label> <select id="trigger-animation"></select></div> <div class="dialog-input-group"><label for="trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="trigger-easing">Easing:</label> <select id="trigger-easing"></select></div>',1),Th=O('<div class="dialog-input-group"><label>Set Channel Values:</label> <!></div>'),Nh=O('<form id="manual-trigger-form" method="dialog"><div class="trigger-columns svelte-17ww3d9"><div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="trigger-input">Input:</label> <select id="trigger-input"></select></div> <div class="dialog-input-group"><label for="trigger-type">Type:</label> <select id="trigger-type"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="trigger-action-type">Action:</label> <select id="trigger-action-type"></select></div> <div class="dialog-input-group"><label for="trigger-device">Device:</label> <select id="trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><!></div></div></form>'),Rh=O("<!> <!>",1),Oh=O("<option> </option>"),Fh=O("<option> </option>"),Vh=O("<option> </option>"),Bh=O('<form id="automatic-trigger-form" method="dialog"><div class="trigger-columns svelte-17ww3d9"><div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="auto-trigger-device">Device:</label> <select id="auto-trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="auto-trigger-animation">Animation:</label> <select id="auto-trigger-animation"></select></div> <div class="dialog-input-group"><label for="auto-trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="auto-trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="auto-trigger-easing">Easing:</label> <select id="auto-trigger-easing"></select></div></div></div></form>'),jh=O("<!> Delete",1),$h=O("<!> <!>",1),Gh=O("<option> </option>"),Kh=O("<option> </option>"),Uh=O("<option> </option>"),Hh=O("<option> </option>"),qh=O("<option> </option>"),zh=O('<div class="dialog-input-group"><label for="edit-trigger-animation">Animation:</label> <select id="edit-trigger-animation"></select></div> <div class="dialog-input-group"><label for="edit-trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="edit-trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="edit-trigger-easing">Easing:</label> <select id="edit-trigger-easing"></select></div>',1),Wh=O('<div class="dialog-input-group"><label>Set Channel Values:</label> <!></div>'),Yh=O('<div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-type">Type:</label> <select id="edit-trigger-type"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-action-type">Action:</label> <select id="edit-trigger-action-type"></select></div> <div class="dialog-input-group"><label for="edit-trigger-device">Device:</label> <select id="edit-trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><!></div>',1),Xh=O("<option> </option>"),Jh=O("<option> </option>"),Zh=O("<option> </option>"),Qh=O('<div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-device">Device:</label> <select id="edit-trigger-device"></select></div></div> <div class="trigger-column svelte-17ww3d9"><div class="dialog-input-group"><label for="edit-trigger-animation">Animation:</label> <select id="edit-trigger-animation"></select></div> <div class="dialog-input-group"><label for="edit-trigger-duration">Duration (ms):</label> <div class="duration-with-loop svelte-17ww3d9"><input id="edit-trigger-duration" type="number" min="100" step="100" class="svelte-17ww3d9"/> <div class="checkbox-field svelte-17ww3d9"><label class="svelte-17ww3d9"><input type="checkbox" class="svelte-17ww3d9"/> Loop</label></div></div></div> <div class="dialog-input-group"><label for="edit-trigger-easing">Easing:</label> <select id="edit-trigger-easing"></select></div></div>',1),ep=O('<form id="edit-trigger-form" method="dialog"><div class="trigger-columns svelte-17ww3d9"><!></div></form>'),tp=O('<div class="triggers-view svelte-17ww3d9"><div class="add-trigger-section svelte-17ww3d9"><!> <!></div> <div class="triggers-list svelte-17ww3d9"><!></div></div> <!> <!> <!>',1);function rp(r,e){wt(e,!0);let t=ve(e,"devices",19,()=>[]),n=U(Me([])),i=U(Me([])),a=U(Me([])),o=U(null),l=U(null),c=U(null),u=U("pressed"),f=U("animation"),d=U(null),_=U(null),p=U(1e3),v=U(!1),y=U("linear"),g=U(Me({})),S=U(null),w=U(null),P=U(null),R=U("pressed"),k=U("animation"),T=U(null),j=U(null),H=U(1e3),ne=U(!1),ue=U("linear"),ce=U(Me({}));const oe=[{value:"pressed",label:"Pressed"},{value:"not-pressed",label:"Not Pressed"}],we=[{value:"animation",label:"Run Animation"},{value:"setValue",label:"Set values"}],me=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier(0.4, 0.0, 0.2, 1)","cubic-bezier(0.68, -0.55, 0.265, 1.55)"];function he(){D(n,e.mappingLibrary.getAll().filter(B=>B.mode==="input"),!0),D(i,e.animationLibrary.getAll(),!0),D(a,e.mappingLibrary.getAll().filter(B=>B.mode==="trigger"),!0)}function J(){he()}function te(){var B,z,pe,ae;D(c,((B=s(n)[0])==null?void 0:B.id)||null,!0),D(u,"pressed"),D(f,"animation"),D(d,((z=t()[0])==null?void 0:z.id)||null,!0),D(_,((pe=s(i)[0])==null?void 0:pe.name)||null,!0),D(p,1e3),D(v,!1),D(y,"linear"),D(g,{},!0),(ae=s(o))==null||ae.showModal()}function $(){var B,z;D(d,((B=t()[0])==null?void 0:B.id)||null,!0),D(_,((z=s(i)[0])==null?void 0:z.name)||null,!0),D(p,1e3),D(v,!1),D(y,"linear"),requestAnimationFrame(()=>{var pe;(pe=s(l))==null||pe.showModal()})}function V(){var Le;if(!s(c)||!s(d)||s(f)==="animation"&&!s(_))return;const B=e.mappingLibrary.get(s(c));if(!B)return;const z=B.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),pe=s(u)==="pressed"?"down":"up",ae=`${z}-${pe}`,se=s(f)==="animation"?`${B.name}_${s(u)}_${s(_)}`:`${B.name}_${s(u)}_setValue`,Z=new Bn({name:se,mode:"trigger",triggerType:s(u),actionType:s(f),inputDeviceId:B.inputDeviceId,inputControlId:B.inputControlId,animationName:s(f)==="animation"?s(_):null,targetDeviceIds:s(f)==="animation"?[s(d)]:[],duration:s(p),easing:s(y),iterations:s(v)?"infinite":1,setValueDeviceId:s(f)==="setValue"?s(d):null,channelValues:s(f)==="setValue"?{...s(g)}:{},cssClassName:ae});e.mappingLibrary.add(Z),he(),(Le=s(o))==null||Le.close()}function E(){var z;if(!s(d)||!s(_))return;const B=new Bn({name:`always_${s(_)}`,mode:"trigger",triggerType:"always",inputDeviceId:null,inputControlId:null,animationName:s(_),targetDeviceIds:[s(d)],duration:s(p),easing:s(y),iterations:s(v)?"infinite":1,cssClassName:"always"});e.mappingLibrary.add(B),he(),(z=s(l))==null||z.close()}function x(B){D(w,B,!0),D(P,B.inputDeviceId+"_"+B.inputControlId),D(R,B.triggerType,!0),D(k,B.actionType||"animation",!0),B.actionType==="setValue"?(D(T,B.setValueDeviceId,!0),D(ce,{...B.channelValues},!0)):(D(T,B.targetDeviceIds[0],!0),D(j,B.animationName,!0)),D(H,B.duration,!0),D(ne,B.iterations==="infinite"),D(ue,B.easing,!0),requestAnimationFrame(()=>{var z;(z=s(S))==null||z.showModal()})}function N(){var B;(B=s(S))==null||B.close(),D(w,null)}function L(){if(s(w)){if(s(w).triggerType==="always")s(w).targetDeviceIds=[s(T)],s(w).animationName=s(j),s(w).duration=s(H),s(w).easing=s(ue),s(w).iterations=s(ne)?"infinite":1,s(w).name=`always_${s(j)}`;else{const B=s(n).find(se=>se.inputDeviceId===s(w).inputDeviceId&&se.inputControlId===s(w).inputControlId);if(!B)return;const z=B.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),pe=s(R)==="pressed"?"down":"up",ae=`${z}-${pe}`;s(w).triggerType=s(R),s(w).actionType=s(k),s(k)==="animation"?(s(w).animationName=s(j),s(w).targetDeviceIds=[s(T)],s(w).setValueDeviceId=null,s(w).channelValues={},s(w).name=`${B.name}_${s(R)}_${s(j)}`):(s(w).setValueDeviceId=s(T),s(w).channelValues={...s(ce)},s(w).animationName=null,s(w).targetDeviceIds=[],s(w).name=`${B.name}_${s(R)}_setValue`),s(w).duration=s(H),s(w).easing=s(ue),s(w).iterations=s(ne)?"infinite":1,s(w).cssClassName=ae}e.mappingLibrary.save(),he(),N()}}function F(){s(w)&&confirm("Are you sure you want to delete this trigger?")&&(e.mappingLibrary.remove(s(w).id),he(),N())}function M(B,z){const pe=s(n).find(ae=>ae.inputDeviceId===B&&ae.inputControlId===z);return(pe==null?void 0:pe.name)||`${B}_${z}`}function G(B){const z=t().find(pe=>pe.id===B);return(z==null?void 0:z.name)||B}function X(B){const z=s(i).find(pe=>pe.cssName===B);return(z==null?void 0:z.name)||B}function Q(B){const z=B.actionType||"animation";if(B.triggerType==="always"){const se=G(B.targetDeviceIds[0]);return`Always â ${X(B.animationName)} â ${se}`}const pe=M(B.inputDeviceId,B.inputControlId),ae=B.triggerType==="pressed"?"Pressed":"Not Pressed";if(z==="animation"){const se=G(B.targetDeviceIds[0]),Z=X(B.animationName);return`${pe} â ${ae} â ${Z} â ${se}`}else{const se=G(B.setValueDeviceId),Z=Object.keys(B.channelValues||{}).length;return`${pe} â ${ae} â Set ${Z} channel(s) â ${se}`}}function I(B,z,pe){const ae={...B};return pe===""||pe===null||pe===void 0?delete ae[z]:ae[z]=Math.max(0,Math.min(255,parseInt(pe)||0)),ae}function A(B,z){const pe=t().find(Z=>Z.id===B);if(!pe)return[];const ae=Oe[pe.type].channels,se=new Array(ae).fill(0);for(let Z=0;Z<ae;Z++)z[Z]!==void 0&&(se[Z]=z[Z]);return se}function Y(B,z){D(g,I(s(g),B,z),!0)}function q(B,z){D(ce,I(s(ce),B,z),!0)}Hn(()=>{he(),e.mappingLibrary.on("changed",J)}),Sa(()=>{e.mappingLibrary.off("changed",J)});var re=tp(),de=_e(re),be=m(de),xe=m(be);{let B=ye(()=>s(n).length===0||s(i).length===0||t().length===0);He(xe,{onclick:te,variant:"secondary",get disabled(){return s(B)},children:(z,pe)=>{var ae=nt("Add Manual Trigger");C(z,ae)},$$slots:{default:!0}})}var qe=b(xe,2);{let B=ye(()=>s(i).length===0||t().length===0);He(qe,{onclick:$,variant:"secondary",get disabled(){return s(B)},children:(z,pe)=>{var ae=nt("Add Automatic Trigger");C(z,ae)},$$slots:{default:!0}})}var ze=b(be,2),We=m(ze);{var $e=B=>{var z=Sh(),pe=m(z);{var ae=Ve=>{var Be=yh();C(Ve,Be)};le(pe,Ve=>{s(n).length===0&&Ve(ae)})}var se=b(pe,2);{var Z=Ve=>{var Be=wh();C(Ve,Be)};le(se,Ve=>{s(i).length===0&&Ve(Z)})}var Le=b(se,2);{var Ae=Ve=>{var Be=bh();C(Ve,Be)};le(Le,Ve=>{t().length===0&&Ve(Ae)})}C(B,z)},lt=B=>{var z=at(),pe=_e(z);{var ae=Z=>{var Le=Ch();C(Z,Le)},se=Z=>{var Le=at(),Ae=_e(Le);ke(Ae,17,()=>s(a),Ve=>Ve.id,(Ve,Be)=>{var Ne=Dh(),Ge=m(Ne),et=m(Ge),tt=m(et),pt=b(et,2);Ms(pt,{get icon(){return ja},onclick:()=>x(s(Be)),title:"Edit trigger",size:"small"}),ee(Bt=>ie(tt,Bt),[()=>Q(s(Be))]),C(Ve,Ne)}),C(Z,Le)};le(pe,Z=>{s(a).length===0?Z(ae):Z(se,!1)},!0)}C(B,z)};le(We,B=>{s(n).length===0||s(i).length===0||t().length===0?B($e):B(lt,!1)})}var Fe=b(de,2);Cr(Fe,{title:"Create Manual Trigger",onclose:()=>{var z;return(z=s(o))==null?void 0:z.close()},get dialogRef(){return s(o)},set dialogRef(z){D(o,z,!0)},buttons:z=>{var pe=Eh(),ae=_e(pe);He(ae,{type:"button",onclick:()=>{var Z;return(Z=s(o))==null?void 0:Z.close()},variant:"secondary",children:(Z,Le)=>{var Ae=nt("Cancel");C(Z,Ae)},$$slots:{default:!0}});var se=b(ae,2);He(se,{type:"submit",form:"manual-trigger-form",variant:"primary",children:(Z,Le)=>{var Ae=nt("Create");C(Z,Ae)},$$slots:{default:!0}}),C(z,pe)},children:(z,pe)=>{var ae=Nh(),se=m(ae),Z=m(se),Le=m(Z),Ae=b(m(Le),2);ke(Ae,21,()=>s(n),Ye,(fe,Se)=>{var ge=Ih(),Je=m(ge),Pe={};ee(()=>{ie(Je,s(Se).name),Pe!==(Pe=s(Se).id)&&(ge.value=(ge.__value=s(Se).id)??"")}),C(fe,ge)});var Ve=b(Le,2),Be=b(m(Ve),2);ke(Be,21,()=>oe,Ye,(fe,Se)=>{var ge=xh(),Je=m(ge),Pe={};ee(()=>{ie(Je,s(Se).label),Pe!==(Pe=s(Se).value)&&(ge.value=(ge.__value=s(Se).value)??"")}),C(fe,ge)});var Ne=b(Z,2),Ge=m(Ne),et=b(m(Ge),2);ke(et,21,()=>we,Ye,(fe,Se)=>{var ge=kh(),Je=m(ge),Pe={};ee(()=>{ie(Je,s(Se).label),Pe!==(Pe=s(Se).value)&&(ge.value=(ge.__value=s(Se).value)??"")}),C(fe,ge)});var tt=b(Ge,2),pt=b(m(tt),2);ke(pt,21,t,Ye,(fe,Se)=>{var ge=Ph(),Je=m(ge),Pe={};ee(()=>{ie(Je,s(Se).name),Pe!==(Pe=s(Se).id)&&(ge.value=(ge.__value=s(Se).id)??"")}),C(fe,ge)});var Bt=b(Ne,2),jt=m(Bt);{var hr=fe=>{var Se=Ah(),ge=_e(Se),Je=b(m(ge),2);ke(Je,21,()=>s(i),Ye,(ct,Yt)=>{var it=Mh(),Mr=m(it),Xt={};ee(()=>{ie(Mr,s(Yt).name),Xt!==(Xt=s(Yt).cssName)&&(it.value=(it.__value=s(Yt).cssName)??"")}),C(ct,it)});var Pe=b(ge,2),Ke=b(m(Pe),2),Re=m(Ke),Ce=b(Re,2),je=m(Ce),De=m(je),St=b(Pe,2),Qe=b(m(St),2);ke(Qe,21,()=>me,Ye,(ct,Yt)=>{var it=Lh(),Mr=m(it),Xt={};ee(()=>{ie(Mr,s(Yt)),Xt!==(Xt=s(Yt))&&(it.value=(it.__value=s(Yt))??"")}),C(ct,it)}),ee(()=>{Re.disabled=!s(_),De.disabled=!s(_),Qe.disabled=!s(_)}),rt(Je,()=>s(_),ct=>D(_,ct)),wr(Re,()=>s(p),ct=>D(p,ct)),ti(De,()=>s(v),ct=>D(v,ct)),rt(Qe,()=>s(y),ct=>D(y,ct)),C(fe,Se)},tr=fe=>{var Se=at(),ge=_e(Se);{var Je=Pe=>{const Ke=ye(()=>t().find(De=>De.id===s(d)));var Re=at(),Ce=_e(Re);{var je=De=>{var St=Th(),Qe=b(m(St),2);{let ct=ye(()=>A(s(d),s(g)));ia(Qe,{get deviceType(){return s(Ke).type},get values(){return s(ct)},onChange:Y})}C(De,St)};le(Ce,De=>{s(Ke)&&De(je)})}C(Pe,Re)};le(ge,Pe=>{s(f)==="setValue"&&s(d)&&Pe(Je)},!0)}C(fe,Se)};le(jt,fe=>{s(f)==="animation"?fe(hr):fe(tr,!1)})}on("submit",ae,fe=>{fe.preventDefault(),V()}),rt(Ae,()=>s(c),fe=>D(c,fe)),rt(Be,()=>s(u),fe=>D(u,fe)),rt(et,()=>s(f),fe=>D(f,fe)),rt(pt,()=>s(d),fe=>D(d,fe)),C(z,ae)},$$slots:{buttons:!0,default:!0}});var kr=b(Fe,2);Cr(kr,{title:"Create Automatic Trigger",onclose:()=>{var z;return(z=s(l))==null?void 0:z.close()},get dialogRef(){return s(l)},set dialogRef(z){D(l,z,!0)},buttons:z=>{var pe=Rh(),ae=_e(pe);He(ae,{type:"button",onclick:()=>{var Z;return(Z=s(l))==null?void 0:Z.close()},variant:"secondary",children:(Z,Le)=>{var Ae=nt("Cancel");C(Z,Ae)},$$slots:{default:!0}});var se=b(ae,2);He(se,{type:"submit",form:"automatic-trigger-form",variant:"primary",children:(Z,Le)=>{var Ae=nt("Create");C(Z,Ae)},$$slots:{default:!0}}),C(z,pe)},children:(z,pe)=>{var ae=Bh(),se=m(ae),Z=m(se),Le=m(Z),Ae=b(m(Le),2);ke(Ae,21,t,Ye,(fe,Se)=>{var ge=Oh(),Je=m(ge),Pe={};ee(()=>{ie(Je,s(Se).name),Pe!==(Pe=s(Se).id)&&(ge.value=(ge.__value=s(Se).id)??"")}),C(fe,ge)});var Ve=b(Z,2),Be=m(Ve),Ne=b(m(Be),2);ke(Ne,21,()=>s(i),Ye,(fe,Se)=>{var ge=Fh(),Je=m(ge),Pe={};ee(()=>{ie(Je,s(Se).name),Pe!==(Pe=s(Se).cssName)&&(ge.value=(ge.__value=s(Se).cssName)??"")}),C(fe,ge)});var Ge=b(Be,2),et=b(m(Ge),2),tt=m(et),pt=b(tt,2),Bt=m(pt),jt=m(Bt),hr=b(Ge,2),tr=b(m(hr),2);ke(tr,21,()=>me,Ye,(fe,Se)=>{var ge=Vh(),Je=m(ge),Pe={};ee(()=>{ie(Je,s(Se)),Pe!==(Pe=s(Se))&&(ge.value=(ge.__value=s(Se))??"")}),C(fe,ge)}),ee(()=>{tt.disabled=!s(_),jt.disabled=!s(_),tr.disabled=!s(_)}),on("submit",ae,fe=>{fe.preventDefault(),E()}),rt(Ae,()=>s(d),fe=>D(d,fe)),rt(Ne,()=>s(_),fe=>D(_,fe)),wr(tt,()=>s(p),fe=>D(p,fe)),ti(jt,()=>s(v),fe=>D(v,fe)),rt(tr,()=>s(y),fe=>D(y,fe)),C(z,ae)},$$slots:{buttons:!0,default:!0}});var Pr=b(kr,2);{var Hr=B=>{Cr(B,{title:"Trigger",onclose:N,get dialogRef(){return s(S)},set dialogRef(ae){D(S,ae,!0)},tools:ae=>{He(ae,{onclick:F,variant:"secondary",children:(se,Z)=>{var Le=jh(),Ae=_e(Le);un(Ae,()=>Mi),C(se,Le)},$$slots:{default:!0}})},buttons:ae=>{var se=$h(),Z=_e(se);He(Z,{onclick:N,variant:"secondary",children:(Ae,Ve)=>{var Be=nt("Cancel");C(Ae,Be)},$$slots:{default:!0}});var Le=b(Z,2);He(Le,{type:"submit",form:"edit-trigger-form",variant:"primary",children:(Ae,Ve)=>{var Be=nt("Save");C(Ae,Be)},$$slots:{default:!0}}),C(ae,se)},children:(ae,se)=>{var Z=ep(),Le=m(Z),Ae=m(Le);{var Ve=Ne=>{var Ge=Yh(),et=_e(Ge),tt=m(et),pt=b(m(tt),2);ke(pt,21,()=>oe,Ye,(Ke,Re)=>{var Ce=Gh(),je=m(Ce),De={};ee(()=>{ie(je,s(Re).label),De!==(De=s(Re).value)&&(Ce.value=(Ce.__value=s(Re).value)??"")}),C(Ke,Ce)});var Bt=b(et,2),jt=m(Bt),hr=b(m(jt),2);ke(hr,21,()=>we,Ye,(Ke,Re)=>{var Ce=Kh(),je=m(Ce),De={};ee(()=>{ie(je,s(Re).label),De!==(De=s(Re).value)&&(Ce.value=(Ce.__value=s(Re).value)??"")}),C(Ke,Ce)});var tr=b(jt,2),fe=b(m(tr),2);ke(fe,21,t,Ye,(Ke,Re)=>{var Ce=Uh(),je=m(Ce),De={};ee(()=>{ie(je,s(Re).name),De!==(De=s(Re).id)&&(Ce.value=(Ce.__value=s(Re).id)??"")}),C(Ke,Ce)});var Se=b(Bt,2),ge=m(Se);{var Je=Ke=>{var Re=zh(),Ce=_e(Re),je=b(m(Ce),2);ke(je,21,()=>s(i),Ye,(Lt,qr)=>{var pr=Hh(),$a=m(pr),Wn={};ee(()=>{ie($a,s(qr).name),Wn!==(Wn=s(qr).cssName)&&(pr.value=(pr.__value=s(qr).cssName)??"")}),C(Lt,pr)});var De=b(Ce,2),St=b(m(De),2),Qe=m(St),ct=b(Qe,2),Yt=m(ct),it=m(Yt),Mr=b(De,2),Xt=b(m(Mr),2);ke(Xt,21,()=>me,Ye,(Lt,qr)=>{var pr=qh(),$a=m(pr),Wn={};ee(()=>{ie($a,s(qr)),Wn!==(Wn=s(qr))&&(pr.value=(pr.__value=s(qr))??"")}),C(Lt,pr)}),ee(()=>{Qe.disabled=!s(j),it.disabled=!s(j),Xt.disabled=!s(j)}),rt(je,()=>s(j),Lt=>D(j,Lt)),wr(Qe,()=>s(H),Lt=>D(H,Lt)),ti(it,()=>s(ne),Lt=>D(ne,Lt)),rt(Xt,()=>s(ue),Lt=>D(ue,Lt)),C(Ke,Re)},Pe=Ke=>{var Re=at(),Ce=_e(Re);{var je=De=>{const St=ye(()=>t().find(it=>it.id===s(T)));var Qe=at(),ct=_e(Qe);{var Yt=it=>{var Mr=Wh(),Xt=b(m(Mr),2);{let Lt=ye(()=>A(s(T),s(ce)));ia(Xt,{get deviceType(){return s(St).type},get values(){return s(Lt)},onChange:q})}C(it,Mr)};le(ct,it=>{s(St)&&it(Yt)})}C(De,Qe)};le(Ce,De=>{s(k)==="setValue"&&s(T)&&De(je)},!0)}C(Ke,Re)};le(ge,Ke=>{s(k)==="animation"?Ke(Je):Ke(Pe,!1)})}rt(pt,()=>s(R),Ke=>D(R,Ke)),rt(hr,()=>s(k),Ke=>D(k,Ke)),rt(fe,()=>s(T),Ke=>D(T,Ke)),C(Ne,Ge)},Be=Ne=>{var Ge=Qh(),et=_e(Ge),tt=m(et),pt=b(m(tt),2);ke(pt,21,t,Ye,(Ce,je)=>{var De=Xh(),St=m(De),Qe={};ee(()=>{ie(St,s(je).name),Qe!==(Qe=s(je).id)&&(De.value=(De.__value=s(je).id)??"")}),C(Ce,De)});var Bt=b(et,2),jt=m(Bt),hr=b(m(jt),2);ke(hr,21,()=>s(i),Ye,(Ce,je)=>{var De=Jh(),St=m(De),Qe={};ee(()=>{ie(St,s(je).name),Qe!==(Qe=s(je).cssName)&&(De.value=(De.__value=s(je).cssName)??"")}),C(Ce,De)});var tr=b(jt,2),fe=b(m(tr),2),Se=m(fe),ge=b(Se,2),Je=m(ge),Pe=m(Je),Ke=b(tr,2),Re=b(m(Ke),2);ke(Re,21,()=>me,Ye,(Ce,je)=>{var De=Zh(),St=m(De),Qe={};ee(()=>{ie(St,s(je)),Qe!==(Qe=s(je))&&(De.value=(De.__value=s(je))??"")}),C(Ce,De)}),ee(()=>{Se.disabled=!s(j),Pe.disabled=!s(j),Re.disabled=!s(j)}),rt(pt,()=>s(T),Ce=>D(T,Ce)),rt(hr,()=>s(j),Ce=>D(j,Ce)),wr(Se,()=>s(H),Ce=>D(H,Ce)),ti(Pe,()=>s(ne),Ce=>D(ne,Ce)),rt(Re,()=>s(ue),Ce=>D(ue,Ce)),C(Ne,Ge)};le(Ae,Ne=>{s(w).triggerType!=="always"?Ne(Ve):Ne(Be,!1)})}on("submit",Z,Ne=>{Ne.preventDefault(),L()}),C(ae,Z)},$$slots:{tools:!0,buttons:!0,default:!0}})};le(Pr,B=>{s(w)&&B(Hr)})}C(r,re),bt()}var np=O('<div class="pan-tilt-indicator svelte-kr8awf"></div>'),ip=O('<div class="device-preview-item svelte-kr8awf"><div class="device-preview svelte-kr8awf"><!></div> <code class="device-id svelte-kr8awf"> </code></div>'),ap=O('<div class="reference-section svelte-kr8awf"><h4 class="svelte-kr8awf">Devices</h4> <div class="device-previews svelte-kr8awf"></div></div>'),sp=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>'),op=O('<div class="reference-section svelte-kr8awf"><h4 class="svelte-kr8awf">Animations</h4> <div class="reference-list svelte-kr8awf"></div></div>'),lp=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div> <div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>',1),cp=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>'),up=O('<div class="reference-item svelte-kr8awf"><code class="svelte-kr8awf"> </code></div>'),dp=O('<div class="reference-section svelte-kr8awf"><h4 class="svelte-kr8awf">Inputs</h4> <div class="reference-list svelte-kr8awf"></div></div>'),fp=O('<div class="css-view svelte-kr8awf"><div class="left-column svelte-kr8awf"><div class="reference-card svelte-kr8awf"><!> <!> <!></div> <div class="animation-targets svelte-kr8awf"></div></div> <div class="right-column svelte-kr8awf"><div class="css-scroll-container svelte-kr8awf"><pre class="css-editor readonly svelte-kr8awf"> </pre> <pre class="css-editor editable svelte-kr8awf" contenteditable="true" spellcheck="false"></pre></div></div></div>');function vp(r,e){wt(e,!0);let t=ve(e,"devices",19,()=>[]),n=ve(e,"isActive",3,!1),i=U(""),a=U("");function o(){return localStorage.getItem("dmx-custom-css")||`/* Add your custom CSS here to override device defaults and apply animations */
`}function l(){D(i,e.cssGenerator.generate(t()),!0)}let c,u=Me({}),f=Me({}),d=Me({}),_=ye(()=>e.animationLibrary?e.animationLibrary.getAll():[]),p=U(Me([])),v,y,g,S;function w(F,M){switch(F){case"RGB":return[M.Red||0,M.Green||0,M.Blue||0];case"RGBA":return[M.Red||0,M.Green||0,M.Blue||0,M.Amber||0];case"RGBW":return[M.Red||0,M.Green||0,M.Blue||0,M.White||0];case"DIMMER":return[M.Intensity||0];case"SMOKE":return[M.Output||0];case"MOVING_HEAD":return[M.Pan||127,M.Tilt||127,M.Dimmer||0,M.Red||0,M.Green||0,M.Blue||0,M.White||0];case"FLAMETHROWER":return[M.Safety||0,M.Fuel||0];default:return console.warn(`Unknown device type: ${F}`),[]}}function P(){if(!e.cssSampler)return;const F=e.cssSampler.sampleAll(t());t().forEach(M=>{const G=F.get(M.id);if(!G)return;const X=w(M.type,G);if(G.Red!==void 0&&G.Green!==void 0&&G.Blue!==void 0){const Q=G.White!==void 0?G.White:255,I=`rgba(${G.Red}, ${G.Green}, ${G.Blue}, ${Q/255})`;u[M.id]=I}else if(G.Intensity!==void 0){const Q=G.Intensity/255;f[M.id]=Q}M.type==="MOVING_HEAD"&&G.Pan!==void 0&&G.Tilt!==void 0&&(d[M.id]={pan:G.Pan,tilt:G.Tilt}),e.dmxController&&n()&&R(M,X)}),c=requestAnimationFrame(P)}function R(F,M){if(e.dmxController)for(let G=0;G<M.length;G++){const X=F.startChannel+G;e.dmxController.setChannel(X,M[G])}}function k(F){const M=F.target.textContent;D(a,M,!0),localStorage.setItem("dmx-custom-css",M),T()}function T(){if(v){const F=s(i)+`

`+s(a);v.textContent=`@scope (.animation-targets) {
${F}
}`}}function j(){D(p,e.mappingLibrary.getAll(),!0),l(),T()}function H(){l(),T()}Hn(()=>{const F=document.createElement("style");F.id="css-property-definitions",F.textContent=`
/* CSS Custom Property Definitions */
@property --safety {
  syntax: "none | probably";
  inherits: false;
  initial-value: none;
}

@property --fuel {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --smoke {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --pan {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --tilt {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

@property --amber {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}
`,document.head.appendChild(F),v=document.createElement("style"),v.id="css-animation-styles",document.head.appendChild(v),y&&(g=document.createElement("div"),g.className="trigger-classes",y.appendChild(g)),e.cssSampler&&g&&(e.cssSampler.initialize(g),e.cssSampler.updateDevices(t())),e.triggerManager&&g&&e.triggerManager.setContainer(g),e.mappingLibrary.on("changed",j),e.animationLibrary.on("changed",H),D(p,e.mappingLibrary.getAll(),!0),D(a,o(),!0),l(),S&&(S.textContent=s(a)),T(),t().forEach(M=>{u[M.id]=oi(M.type,M.defaultValues),f[M.id]=1,M.type==="MOVING_HEAD"&&(d[M.id]={pan:M.defaultValues[0]||127,tilt:M.defaultValues[1]||127})}),c||P()}),Er(()=>{e.cssSampler&&t()&&(e.cssSampler.updateDevices(t()),l(),T())}),Sa(()=>{c&&(cancelAnimationFrame(c),c=null),v&&v.parentNode&&v.parentNode.removeChild(v);const F=document.getElementById("css-property-definitions");F&&F.parentNode&&F.parentNode.removeChild(F),e.mappingLibrary.off("changed",j),e.animationLibrary.off("changed",H)});var ne=fp(),ue=m(ne),ce=m(ue),oe=m(ce);{var we=F=>{var M=ap(),G=b(m(M),2);ke(G,21,t,X=>X.id,(X,Q)=>{var I=ip(),A=m(I),Y=m(A);{var q=be=>{const xe=ye(()=>d[s(Q).id]),qe=ye(()=>s(xe).pan/255*100),ze=ye(()=>(1-s(xe).tilt/255)*100);var We=np();ee(()=>Ot(We,`left: ${s(qe)??""}%; top: ${s(ze)??""}%`)),C(be,We)};le(Y,be=>{s(Q).type==="MOVING_HEAD"&&d[s(Q).id]&&be(q)})}var re=b(A,2),de=m(re);ee(be=>{Ot(A,`background-color: ${be??""}; opacity: ${(f[s(Q).id]||1)??""}`),Vt(A,"title",s(Q).name),ie(de,`#${s(Q).cssId??""}`)},[()=>u[s(Q).id]||oi(s(Q).type,s(Q).defaultValues)]),C(X,I)}),C(F,M)};le(oe,F=>{t().length>0&&F(we)})}var me=b(oe,2);{var he=F=>{var M=op(),G=b(m(M),2);ke(G,21,()=>s(_),X=>X.name,(X,Q)=>{var I=sp(),A=m(I),Y=m(A);ee(()=>ie(Y,s(Q).cssName)),C(X,I)}),C(F,M)};le(me,F=>{s(_).length>0&&F(he)})}var J=b(me,2);{var te=F=>{var M=dp(),G=b(m(M),2);ke(G,21,()=>s(p),X=>X.id,(X,Q)=>{var I=at(),A=_e(I);{var Y=re=>{var de=at(),be=_e(de);{var xe=ze=>{var We=lp(),$e=_e(We),lt=m($e),Fe=m(lt),kr=b($e,2),Pr=m(kr),Hr=m(Pr);ee((B,z)=>{ie(Fe,`.${B??""}`),ie(Hr,`.${z??""}`)},[()=>s(Q).getButtonDownClass(),()=>s(Q).getButtonUpClass()]),C(ze,We)},qe=ze=>{var We=cp(),$e=m(We),lt=m($e);ee(Fe=>ie(lt,Fe),[()=>s(Q).getInputPropertyName()]),C(ze,We)};le(be,ze=>{s(Q).isButtonInput()?ze(xe):ze(qe,!1)})}C(re,de)},q=re=>{var de=at(),be=_e(de);{var xe=qe=>{var ze=up(),We=m(ze),$e=m(We);ee(lt=>ie($e,lt),[()=>s(Q).getPropertyName()]),C(qe,ze)};le(be,qe=>{s(Q).mode==="direct"&&qe(xe)},!0)}C(re,de)};le(A,re=>{s(Q).mode==="input"?re(Y):re(q,!1)})}C(X,I)}),C(F,M)};le(J,F=>{s(p).length>0&&F(te)})}var $=b(ce,2);dn($,F=>y=F,()=>y);var V=b(ue,2),E=m(V),x=m(E),N=m(x),L=b(x,2);L.__input=k,dn(L,F=>S=F,()=>S),ee(()=>ie(N,s(i))),C(r,ne),bt()}Mt(["input"]);var hp=O("<!> <main><!> <div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div> <div><!></div></main>",1);function pp(r,e){wt(e,!0);let t=U("devices"),n=U(!1),i=Me(new zu),a=U(null),o=U(Me([])),l=Me(new Yu),c=Me(new ml),u=Me(new gl),f=Me(new yl),d=Me(new Ju),_=Me(new Xu(l,c)),p=Me(new jf(c,f,u));Er(()=>{p.initialize()}),Er(()=>{u.setSetValueCallback((L,F)=>{const M=s(o).find(G=>G.id===L);if(!(!M||!i)){for(const[G,X]of Object.entries(F)){const Q=parseInt(G);Q>=0&&Q<M.defaultValues.length&&(M.defaultValues[Q]=X,i.setChannel(M.startChannel+Q,X))}D(o,[...s(o)],!0)}})});async function v(){try{await i.connect(),D(n,!0)}catch(L){alert("Failed to connect: "+L.message)}}function y(){i.disconnect(),D(n,!1)}function g(){var L;i&&i.clearUniverse(),(L=s(a))!=null&&L.clearAllDeviceValues&&s(a).clearAllDeviceValues()}var S=hp(),w=_e(S);av(w,{onconnect:v,ondisconnect:y,get connected(){return s(n)},get inputController(){return p}});var P=b(w,2),R=m(P);hv(R,{onClearUniverse:g,get view(){return s(t)},set view(L){D(t,L,!0)}});var k=b(R,2);let T;var j=m(k);dn(qv(j,{get dmxController(){return i},get devices(){return s(o)},set devices(L){D(o,L,!0)}}),L=>D(a,L,!0),()=>s(a));var H=b(k,2);let ne;var ue=m(H);mv(ue,{get dmxController(){return i}});var ce=b(H,2);let oe;var we=m(ce);lh(we,{get animationLibrary(){return l},get cssGenerator(){return _},get devices(){return s(o)}});var me=b(ce,2);let he;var J=m(me);gh(J,{get inputController(){return p},get mappingLibrary(){return c}});var te=b(me,2);let $;var V=m(te);rp(V,{get mappingLibrary(){return c},get animationLibrary(){return l},get devices(){return s(o)}});var E=b(te,2);let x;var N=m(E);{let L=ye(()=>s(t)==="css");vp(N,{get dmxController(){return i},get devices(){return s(o)},get animationLibrary(){return l},get mappingLibrary(){return c},get cssGenerator(){return _},get cssSampler(){return d},get triggerManager(){return u},get customPropertyManager(){return f},get isActive(){return s(L)}})}ee(()=>{T=Dt(k,1,"view-container svelte-1n46o8q",null,T,{hidden:s(t)!=="devices"}),ne=Dt(H,1,"view-container svelte-1n46o8q",null,ne,{hidden:s(t)!=="universe"}),oe=Dt(ce,1,"view-container svelte-1n46o8q",null,oe,{hidden:s(t)!=="animations"}),he=Dt(me,1,"view-container svelte-1n46o8q",null,he,{hidden:s(t)!=="inputs"}),$=Dt(te,1,"view-container svelte-1n46o8q",null,$,{hidden:s(t)!=="triggers"}),x=Dt(E,1,"view-container svelte-1n46o8q",null,x,{hidden:s(t)!=="css"})}),C(r,S),bt()}bu(pp,{target:document.getElementById("app")});
